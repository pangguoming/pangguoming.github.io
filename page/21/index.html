<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="Software make the information world run, and programer make the softeware run.">
<meta property="og:type" content="website">
<meta property="og:title" content="庞国明-博客">
<meta property="og:url" content="http://pangguoming.com/page/21/index.html">
<meta property="og:site_name" content="庞国明-博客">
<meta property="og:description" content="Software make the information world run, and programer make the softeware run.">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="庞国明-博客">
<meta name="twitter:description" content="Software make the information world run, and programer make the softeware run.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://pangguoming.com/page/21/">





  <title>庞国明-博客</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">庞国明-博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">此心用度八千遍，不曾厌倦</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/c57be1b.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/c57be1b.html" itemprop="url">ES6 主要的新特性</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-28T10:35:00+08:00">
                2017-12-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div id="cnblogs_post_body" class="blogpost-body"><br><br>本文基于<a href="https://github.com/lukehoban" target="_blank" rel="noopener">lukehoban</a>/<a href="https://github.com/lukehoban/es6features" target="_blank" rel="noopener"><strong>es6features</strong></a> ，同时参考了大量博客资料，具体见文末引用。<br><br>ES6（<a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0CCoQFjAA&amp;url=%68%74%74%70%3a%2f%2f%65%6e%2e%77%69%6b%69%70%65%64%69%61%2e%6f%72%67%2f%77%69%6b%69%2f%45%43%4d%41%53%63%72%69%70%74&amp;ei=Q99JU5jwAoGC8gWq9YDoCQ&amp;usg=AFQjCNGgS-TjEL_-efubqc1RnkUfmn6wew&amp;sig2=Kx2DkQ1Qtv0Wu2E_v_fwGQ&amp;bvm=bv.64542518,d.dGc" target="_blank" rel="noopener">ECMAScript</a> 6）是即将到来的新版本JavaScript语言的标准，代号harmony(和谐之意，显然没有跟上我国的步伐，我们已经进入中国梦版本了)。上一次标准的制订还是2009年出台的ES5。目前ES6的标准化工作正在进行中，预计会在14年12月份放出正式敲定的版本。但大部分标准已经就绪，且各浏览器对ES6的支持也正在实现中。要查看ES6的支持情况请<a href="http://kangax.github.io/es5-compat-table/es6/" target="_blank" rel="noopener">点此</a>。<br><br>目前想要运行ES6代码的话，可以用<a href="https://github.com/google" target="_blank" rel="noopener">google</a>/<a href="https://github.com/google/traceur-compiler" target="_blank" rel="noopener"><strong>traceur-compiler</strong></a>将代码转译。<a href="http://google.github.io/traceur-compiler/demo/repl.html" target="_blank" rel="noopener">点此</a>访问traceur-compiler 在线版本时实编辑ES6代码并查看转换后的结果，代码运行结果会在console显示。<br><br>另外，关于Google Traceur，业界大神<a href="https://plus.google.com/+AddyOsmani" target="_blank" rel="noopener">Addy Osmani</a>利用前者写了个Chrome插件<a href="https://chrome.google.com/webstore/detail/es6-repl/alploljligeomonipppgaahpkenfnfkn" target="_blank" rel="noopener">ES6 Tepl</a>，安装后也可以进行ES6的测试。<br><br>当然，并不是所有ES6新特性都被实现了，所以上面的方法可以测试大部分，有一些还是无法测试的。<br><br>虽然ES6都还没真正发布，但已经有用<a href="http://blog.tastejs.com/rewriting-a-webapp-with-ecmascript-6" target="_blank" rel="noopener">ES6重写的程序</a>了，各种关于ES789的提议已经开始了，这你敢信。潮流不是我等大众所能追赶的。<br><br>潮流虽然太快，但我们不停下学习的步伐，就不会被潮流丢下的，下面来领略下ES6中新特性，一堵新生代JS的风采。<br><br># 箭头操作符<br><br>如果你会C#或者Java，你肯定知道lambda表达式，ES6中新增的箭头操作符=&gt;便有异曲同工之妙。它简化了函数的书写。操作符左边为输入的参数，而右边则是进行的操作以及返回的值Inputs=&gt;outputs。<br><br>我们知道在JS中回调是经常的事，而一般回调又以匿名函数的形式出现，每次都需要写一个function，甚是繁琐。当引入箭头操作符后可以方便地写回调了。请看下面的例子。<br><br><div class="highlight"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">var array = [1, 2, 3];</span><br><span class="line">    //传统写法</span><br><span class="line">    array.forEach(function(v, i, a) &#123;</span><br><span class="line">        console.log(v);</span><br><span class="line">    &#125;);</span><br><span class="line">    //ES6</span><br><span class="line">    array.forEach(v = &gt; console.log(v));</span><br></pre></td></tr></table></figure><br><br>大家可以打开文章开头提到的traceur在线代码转译页面输入代码来查看效果。<br><br>    # 类的支持<br><br>ES6中添加了对类的支持，引入了class关键字（其实class在JavaScript中一直是保留字，目的就是考虑到可能在以后的新版本中会用到，现在终于派上用场了）。JS本身就是面向对象的，ES6中提供的类实际上只是JS原型模式的包装。现在提供原生的class支持后，对象的创建，继承更加直观了，并且父类方法的调用，实例化，静态方法和构造函数等概念都更加形象化。<br><br>下面代码展示了类在ES6中的使用。再次啰嗦一句，你可以将代码贴到<a href="http://google.github.io/traceur-compiler/demo/repl.html" target="_blank" rel="noopener">traceur</a>自己查看运行结果。<br><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush:javascript;gutter:true;&quot;&gt;//类的定义</span><br><span class="line">class Animal &#123;</span><br><span class="line">    //ES6中新型构造器</span><br><span class="line">    constructor(name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    //实例方法</span><br><span class="line">    sayName() &#123;</span><br><span class="line">        console.log(&apos;My name is &apos;+this.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//类的继承</span><br><span class="line">class Programmer extends Animal &#123;</span><br><span class="line">    constructor(name) &#123;</span><br><span class="line">        //直接调用父类构造器进行初始化</span><br><span class="line">        super(name);</span><br><span class="line">    &#125;</span><br><span class="line">    program() &#123;</span><br><span class="line">        console.log(&quot;I&apos;m coding...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//测试我们的类</span><br><span class="line">var animal=new Animal(&apos;dummy&apos;),</span><br><span class="line">wayou=new Programmer(&apos;wayou&apos;);</span><br><span class="line">animal.sayName();//输出 ‘My name is dummy’</span><br><span class="line">wayou.sayName();//输出 ‘My name is wayou’</span><br><span class="line">wayou.program();//输出 ‘I&apos;m coding...’</span><br></pre></td></tr></table></figure><br><br>    # 增强的对象字面量<br><br>对象字面量被增强了，写法更加简洁与灵活，同时在定义对象的时候能够做的事情更多了。具体表现在：<br><br>    <em>   可以在对象字面量里面定义原型
    </em>   定义方法可以不用function关键字<br>    <em>   直接调用父类方法<br><br>这样一来，对象字面量与前面提到的类概念更加吻合，在编写面向对象的JavaScript时更加轻松方便了。<br><br>    <div class="highlight"><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush:javascript;gutter:true;&quot;&gt;//通过对象字面量创建对象</span><br><span class="line">var human = &#123;</span><br><span class="line">    breathe() &#123;</span><br><span class="line">        console.log(&apos;breathing...&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">var worker = &#123;</span><br><span class="line">    __proto__: human, //设置此对象的原型为human,相当于继承human</span><br><span class="line">    company: &apos;freelancer&apos;,</span><br><span class="line">    work() &#123;</span><br><span class="line">        console.log(&apos;working...&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">human.breathe();//输出 ‘breathing...’</span><br><span class="line">//调用继承来的breathe方法</span><br><span class="line">worker.breathe();//输出 ‘breathing...’</span><br></pre></td></tr></table></figure><br><br>    # 字符串模板<br><br>字符串模板相对简单易懂些。ES6中允许使用反引号 ` 来创建字符串，此种方法创建的字符串里面可以包含由美元符号加花括号包裹的变量${vraible}。如果你使用过像C#等后端强类型语言的话，对此功能应该不会陌生。<br><br>    <div class="highlight"><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush:javascript;gutter:true;&quot;&gt;//产生一个随机数</span><br><span class="line">var num=Math.random();</span><br><span class="line">//将这个数字输出到console</span><br><span class="line">console.log(`your num is $&#123;num&#125;`);</span><br></pre></td></tr></table></figure><br><br>    # 解构<br><br>自动解析数组或对象中的值。比如若一个函数要返回多个值，常规的做法是返回一个对象，将每个值做为这个对象的属性返回。但在ES6中，利用解构这一特性，可以直接返回一个数组，然后数组中的值会自动被解析到对应接收该值的变量中。<br><br>    <div class="highlight"><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush:javascript;gutter:true;&quot;&gt;var [x,y]=getVal(),//函数返回值的解构</span><br><span class="line">    [name,,age]=[&apos;wayou&apos;,&apos;male&apos;,&apos;secrect&apos;];//数组解构</span><br><span class="line"></span><br><span class="line">function getVal() &#123;</span><br><span class="line">    return [ 1, 2 ];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(&apos;x:&apos;+x+&apos;, y:&apos;+y);//输出：x:1, y:2 </span><br><span class="line">console.log(&apos;name:&apos;+name+&apos;, age:&apos;+age);//输出： name:wayou, age:secrect</span><br></pre></td></tr></table></figure><br><br>    # 参数默认值，不定参数，拓展参数<br><br>    ## 默认参数值<br><br>现在可以在定义函数的时候指定参数的默认值了，而不用像以前那样通过逻辑或操作符来达到目的了。<br><br>    <div class="highlight"><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush:javascript;gutter:true;&quot;&gt;function sayHello(name)&#123;</span><br><span class="line">    //传统的指定默认参数的方式</span><br><span class="line">    var name=name||&apos;dude&apos;;</span><br><span class="line">    console.log(&apos;Hello &apos;+name);</span><br><span class="line">&#125;</span><br><span class="line">//运用ES6的默认参数</span><br><span class="line">function sayHello2(name=&apos;dude&apos;)&#123;</span><br><span class="line">    console.log(`Hello $&#123;name&#125;`);</span><br><span class="line">&#125;</span><br><span class="line">sayHello();//输出：Hello dude</span><br><span class="line">sayHello(&apos;Wayou&apos;);//输出：Hello Wayou</span><br><span class="line">sayHello2();//输出：Hello dude</span><br><span class="line">sayHello2(&apos;Wayou&apos;);//输出：Hello Wayou</span><br></pre></td></tr></table></figure><br><br>    ## 不定参数<br><br>不定参数是在函数中使用命名参数同时接收不定数量的未命名参数。这只是一种语法糖，在以前的JavaScript代码中我们可以通过arguments变量来达到这一目的。不定参数的格式是三个句点后跟代表所有不定参数的变量名。比如下面这个例子中，…x代表了所有传入add函数的参数。<br><br>    <div class="highlight"><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush:javascript;gutter:true;&quot;&gt;//将所有参数相加的函数</span><br><span class="line">function add(...x)&#123;</span><br><span class="line">    return x.reduce((m,n)=&gt;m+n);</span><br><span class="line">&#125;</span><br><span class="line">//传递任意个数的参数</span><br><span class="line">console.log(add(1,2,3));//输出：6</span><br><span class="line">console.log(add(1,2,3,4,5));//输出：15</span><br></pre></td></tr></table></figure><br><br>    ## 拓展参数<br><br>拓展参数则是另一种形式的语法糖，它允许传递数组或者类数组直接做为函数的参数而不用通过apply。<br><br>    <div class="highlight"><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush:javascript;gutter:true;&quot;&gt;var people=[&apos;Wayou&apos;,&apos;John&apos;,&apos;Sherlock&apos;];</span><br><span class="line">//sayHello函数本来接收三个单独的参数人妖，人二和人三</span><br><span class="line">function sayHello(people1,people2,people3)&#123;</span><br><span class="line">    console.log(`Hello $&#123;people1&#125;,$&#123;people2&#125;,$&#123;people3&#125;`);</span><br><span class="line">&#125;</span><br><span class="line">//但是我们将一个数组以拓展参数的形式传递，它能很好地映射到每个单独的参数</span><br><span class="line">sayHello(...people);//输出：Hello Wayou,John,Sherlock </span><br><span class="line"></span><br><span class="line">//而在以前，如果需要传递数组当参数，我们需要使用函数的apply方法</span><br><span class="line">sayHello.apply(null,people);//输出：Hello Wayou,John,Sherlock</span><br></pre></td></tr></table></figure><br><br>    # let与const 关键字<br><br>可以把let看成var，只是它定义的变量被限定在了特定范围内才能使用，而离开这个范围则无效。const则很直观，用来定义常量，即无法被更改值的变量。<br><br>    <div class="highlight"><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush:javascript;gutter:true;&quot;&gt;for (let i=0;i&lt;2;i++)console.log(i);//输出: 0,1</span><br><span class="line">console.log(i);//输出：undefined,严格模式下会报错</span><br></pre></td></tr></table></figure><br><br>    # for of 值遍历<br><br>我们都知道for in 循环用于遍历数组，类数组或对象，ES6中新引入的for of循环功能相似，不同的是每次循环它提供的不是序号而是值。<br><br>    <div class="highlight"><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush:javascript;gutter:true;&quot;&gt;var someArray = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot; ];</span><br><span class="line"></span><br><span class="line">for (v of someArray) &#123;</span><br><span class="line">    console.log(v);//输出 a,b,c</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></div></div></div></div></div></div></div></em>注意，此功能google traceur并未实现，所以无法模拟调试,下面有些功能也是如此<em><br><br>    # iterator, generator<br><br>这一部分的内容有点生涩，详情可以参见<a href="http://domenic.me/2013/09/06/es6-iterators-generators-and-iterables/" target="_blank" rel="noopener">这里</a>。以下是些基本概念。

    </em>   iterator:它是这么一个对象，拥有一个next方法，这个方法返回一个对象{done,value}，这个对象包含两个属性，一个布尔类型的done和包含任意值的value<br>    <em>   iterable: 这是这么一个对象，拥有一个obj[@@iterator]方法，这个方法返回一个iterator
    </em>   generator: 它是一种特殊的iterator。反的next方法可以接收一个参数并且返回值取决与它的构造函数（generator function）。generator同时拥有一个throw方法<br>    <em>   generator 函数: 即generator的构造函数。此函数内可以使用yield关键字。在yield出现的地方可以通过generator的next或throw方法向外界传递值。generator 函数是通过function</em>来声明的<br>    <em>   yield 关键字：它可以暂停函数的执行，随后可以再进进入函数继续执行<br><br>    # 模块<br><br>在ES6标准中，JavaScript原生支持module了。这种将JS代码分割成不同功能的小块进行模块化的概念是在一些三方规范中流行起来的，比如CommonJS和AMD模式。<br><br>将不同功能的代码分别写在不同文件中，各模块只需导出公共接口部分，然后通过模块的导入的方式可以在其他地方使用。下面的例子来自<a href="http://code.tutsplus.com/tutorials/eight-cool-features-coming-in-es6--net-33175" target="_blank" rel="noopener">tutsplus</a>:<br><br>    <div class="highlight"><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush:javascript;gutter:true;&quot;&gt;// point.js</span><br><span class="line">module &quot;point&quot; &#123;</span><br><span class="line">    export class Point &#123;</span><br><span class="line">        constructor (x, y) &#123;</span><br><span class="line">            public x = x;</span><br><span class="line">            public y = y;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// myapp.js</span><br><span class="line">//声明引用的模块</span><br><span class="line">module point from &quot;/point.js&quot;;</span><br><span class="line">//这里可以看出，尽管声明了引用的模块，还是可以通过指定需要的部分进行导入</span><br><span class="line">import Point from &quot;point&quot;;</span><br><span class="line"></span><br><span class="line">var origin = new Point(0, 0);</span><br><span class="line">console.log(origin);</span><br></pre></td></tr></table></figure><br><br>    # Map，Set 和 WeakMap，WeakSet<br><br>这些是新加的集合类型，提供了更加方便的获取属性值的方法，不用像以前一样用hasOwnProperty来检查某个属性是属于原型链上的呢还是当前对象的。同时，在进行属性值添加与获取时有专门的get，set 方法。<br><br>下方代码来自<a href="https://github.com/lukehoban/es6features" target="_blank" rel="noopener">es6feature</a><br><br>    <div class="highlight"><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush:javascript;gutter:true;&quot;&gt;// Sets</span><br><span class="line">var s = new Set();</span><br><span class="line">s.add(&quot;hello&quot;).add(&quot;goodbye&quot;).add(&quot;hello&quot;);</span><br><span class="line">s.size === 2;</span><br><span class="line">s.has(&quot;hello&quot;) === true;</span><br><span class="line"></span><br><span class="line">// Maps</span><br><span class="line">var m = new Map();</span><br><span class="line">m.set(&quot;hello&quot;, 42);</span><br><span class="line">m.set(s, 34);</span><br><span class="line">m.get(s) == 34;</span><br></pre></td></tr></table></figure><br><br>有时候我们会把对象作为一个对象的键用来存放属性值，普通集合类型比如简单对象会阻止垃圾回收器对这些作为属性键存在的对象的回收，有造成内存泄漏的危险。而WeakMap,WeakSet则更加安全些，这些作为属性键的对象如果没有别的变量在引用它们，则会被回收释放掉，具体还看下面的例子。<br><br>正文代码来自<a href="https://github.com/lukehoban/es6features" target="_blank" rel="noopener">es6feature</a><br><br>    <div class="highlight"><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush:javascript;gutter:true;&quot;&gt;// Weak Maps</span><br><span class="line">var wm = new WeakMap();</span><br><span class="line">wm.set(s, &#123; extra: 42 &#125;);</span><br><span class="line">wm.size === undefined</span><br><span class="line"></span><br><span class="line">// Weak Sets</span><br><span class="line">var ws = new WeakSet();</span><br><span class="line">ws.add(&#123; data: 42 &#125;);//因为添加到ws的这个临时对象没有其他变量引用它，所以ws不会保存它的值，也就是说这次添加其实没有意思</span><br><span class="line"></span><br><span class="line">Proxies</span><br></pre></td></tr></table></figure><br><br>Proxy可以监听对象身上发生了什么事情，并在这些事情发生后执行一些相应的操作。一下子让我们对一个对象有了很强的追踪能力，同时在数据绑定方面也很有用处。<br><br>以下例子借用自<a href="http://ariya.ofilabs.com/2013/07/es6-and-proxy.html" target="_blank" rel="noopener">这里</a>。<code></code><br><br>    <div class="highlight"><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush:javascript;gutter:true;&quot;&gt;//定义被侦听的目标对象</span><br><span class="line">var engineer = &#123; name: &apos;Joe Sixpack&apos;, salary: 50 &#125;;</span><br><span class="line">//定义处理程序</span><br><span class="line">var interceptor = &#123;</span><br><span class="line">  set: function (receiver, property, value) &#123;</span><br><span class="line">    console.log(property, &apos;is changed to&apos;, value);</span><br><span class="line">    receiver[property] = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">//创建代理以进行侦听</span><br><span class="line">engineer = Proxy(engineer, interceptor);</span><br><span class="line">//做一些改动来触发代理</span><br><span class="line">engineer.salary = 60;//控制台输出：salary is changed to 60</span><br></pre></td></tr></table></figure><br><br>上面代码我已加了注释，这里进一步解释。对于处理程序，是在被侦听的对象身上发生了相应事件之后，处理程序里面的方法就会被调用，上面例子中我们设置了set的处理函数，表明，如果我们侦听的对象的属性被更改，也就是被set了，那这个处理程序就会被调用，同时通过参数能够得知是哪个属性被更改，更改为了什么值。<br><br>    # Symbols<br><br>我们知道对象其实是键值对的集合，而键通常来说是字符串。而现在除了字符串外，我们还可以用symbol这种值来做为对象的键。Symbol是一种基本类型，像数字，字符串还有布尔一样，它不是一个对象。Symbol 通过调用symbol函数产生，它接收一个可选的名字参数，该函数返回的symbol是唯一的。之后就可以用这个返回值做为对象的键了。Symbol还可以用来创建私有属性，外部无法直接访问由symbol做为键的属性值。<br><br>以下例子来自<a href="https://github.com/lukehoban/es6features" target="_blank" rel="noopener">es6features</a><br><br>    <div class="highlight"><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush:javascript;gutter:true;&quot;&gt;(function() &#123;</span><br><span class="line"></span><br><span class="line">  // 创建symbol</span><br><span class="line">  var key = Symbol(&quot;key&quot;);</span><br><span class="line"></span><br><span class="line">  function MyClass(privateData) &#123;</span><br><span class="line">    this[key] = privateData;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  MyClass.prototype = &#123;</span><br><span class="line">    doStuff: function() &#123;</span><br><span class="line">      ... this[key] ...</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">var c = new MyClass(&quot;hello&quot;)</span><br><span class="line">c[&quot;key&quot;] === undefined//无法访问该属性，因为是私有的</span><br></pre></td></tr></table></figure><br><br>    # Math，Number，String，Object 的新API<br><br>对Math,Number,String还有Object等添加了许多新的API。下面代码同样来自es6features，对这些新API进行了简单展示。<br><br>    <div class="highlight"><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush:javascript;gutter:true;&quot;&gt;Number.EPSILON</span><br><span class="line">Number.isInteger(Infinity) // false</span><br><span class="line">Number.isNaN(&quot;NaN&quot;) // false</span><br><span class="line"></span><br><span class="line">Math.acosh(3) // 1.762747174039086</span><br><span class="line">Math.hypot(3, 4) // 5</span><br><span class="line">Math.imul(Math.pow(2, 32) - 1, Math.pow(2, 32) - 2) // 2</span><br><span class="line"></span><br><span class="line">&quot;abcde&quot;.contains(&quot;cd&quot;) // true</span><br><span class="line">&quot;abc&quot;.repeat(3) // &quot;abcabcabc&quot;</span><br><span class="line"></span><br><span class="line">Array.from(document.querySelectorAll(&apos;*&apos;)) // Returns a real Array</span><br><span class="line">Array.of(1, 2, 3) // Similar to new Array(...), but without special one-arg behavior</span><br><span class="line">[0, 0, 0].fill(7, 1) // [0,7,7]</span><br><span class="line">[1,2,3].findIndex(x =&gt; x == 2) // 1</span><br><span class="line">[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;].entries() // iterator [0, &quot;a&quot;], [1,&quot;b&quot;], [2,&quot;c&quot;]</span><br><span class="line">[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;].keys() // iterator 0, 1, 2</span><br><span class="line">[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;].values() // iterator &quot;a&quot;, &quot;b&quot;, &quot;c&quot;</span><br><span class="line"></span><br><span class="line">Object.assign(Point, &#123; origin: new Point(0,0) &#125;)</span><br></pre></td></tr></table></figure><br><br>    # Promises<br><br>Promises是处理异步操作的一种模式，之前在很多三方库中有实现，比如jQuery的<a href="http://api.jquery.com/category/deferred-object/" target="_blank" rel="noopener">deferred</a> 对象。当你发起一个异步请求，并绑定了.when(), .done()等事件处理程序时，其实就是在应用promise模式。<br><br>    <div class="highlight"><br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush:javascript;gutter:true;&quot;&gt;//创建promise</span><br><span class="line">var promise = new Promise(function(resolve, reject) &#123;</span><br><span class="line">    // 进行一些异步或耗时操作</span><br><span class="line">    if ( /*如果成功 */ ) &#123;</span><br><span class="line">        resolve(&quot;Stuff worked!&quot;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        reject(Error(&quot;It broke&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">//绑定处理程序</span><br><span class="line">promise.then(function(result) &#123;</span><br><span class="line">    //promise成功的话会执行这里</span><br><span class="line">    console.log(result); // &quot;Stuff worked!&quot;</span><br><span class="line">&#125;, function(err) &#123;</span><br><span class="line">    //promise失败会执行这里</span><br><span class="line">    console.log(err); // Error: &quot;It broke&quot;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br><br>    # 总结<br><br>总结就是一句话，前后端差异越来越小了。<br><br>    # REFERENCE

    </div></div></div></div></div></div></div></em>   Google traceur online compiler <a href="http://google.github.io/traceur-compiler/demo/repl.html" target="_blank" rel="noopener">http://google.github.io/traceur-compiler/demo/repl.html</a><br>    <em>   array destruction <a href="http://ariya.ofilabs.com/2013/02/es6-and-destructuring-assignment.html" target="_blank" rel="noopener">http://ariya.ofilabs.com/2013/02/es6-and-destructuring-assignment.html</a>
    </em>   class <a href="http://www.joezimjs.com/javascript/javascript-prototypal-inheritance-and-what-es6-classes-have-to-say-about-it/" target="_blank" rel="noopener">http://www.joezimjs.com/javascript/javascript-prototypal-inheritance-and-what-es6-classes-have-to-say-about-it/</a><br>    <em>   enhanced object literal <a href="http://maximilianhoffmann.com/posts/object-based-javascript-in-es6" target="_blank" rel="noopener">http://maximilianhoffmann.com/posts/object-based-javascript-in-es6</a>
    </em>   parameters <a href="http://globaldev.co.uk/2013/10/es6-part-4/" target="_blank" rel="noopener">http://globaldev.co.uk/2013/10/es6-part-4/</a><br>    <em>   let keyword <a href="http://globaldev.co.uk/2013/09/es6-part-2/" target="_blank" rel="noopener">http://globaldev.co.uk/2013/09/es6-part-2/</a>
    </em>   for of iterator <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for…of#Browser_compatibility</a><br>    <em>   the Iterator protocol <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/The_Iterator_protocol" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/The_Iterator_protocol</a>
    </em>   generators <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*</a><br>    <em>   ES6 Iterators, Generators, and Iterables <a href="http://domenic.me/2013/09/06/es6-iterators-generators-and-iterables/" target="_blank" rel="noopener">http://domenic.me/2013/09/06/es6-iterators-generators-and-iterables/</a>
    </em>   proxies <a href="http://ariya.ofilabs.com/2013/07/es6-and-proxy.html" target="_blank" rel="noopener">http://ariya.ofilabs.com/2013/07/es6-and-proxy.html</a><br>    <em>   symbols <a href="http://tc39wiki.calculist.org/es6/symbols/" target="_blank" rel="noopener">http://tc39wiki.calculist.org/es6/symbols/</a>
    </em>   promise <a href="http://www.html5rocks.com/en/tutorials/es6/promises/" target="_blank" rel="noopener">http://www.html5rocks.com/en/tutorials/es6/promises/</a><br>    *   8 cool features in ES6 <a href="http://code.tutsplus.com/tutorials/eight-cool-features-coming-in-es6--net-33175" target="_blank" rel="noopener">http://code.tutsplus.com/tutorials/eight-cool-features-coming-in-es6–net-33175</a> （此文章错误较多）<br>    <a href="https://www.cnblogs.com/Wayou/p/es6_new_features.html#comment_form_container" title="快速评论" target="_blank" rel="noopener"></a><br>    <div id="MySignature"><br><br>Feel free to repost but keep the link to this page please!<br><br>    </div></div></div><br>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/81948fa2.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/81948fa2.html" itemprop="url">微服务Spring cloud经验总结系列(初级），第二篇：Spring boot 在Spring cloud下的通用配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-27T00:00:00+08:00">
                2017-12-27
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/系统架构/" itemprop="url" rel="index">
                    <span itemprop="name">系统架构</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/e3cfe810.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/e3cfe810.html" itemprop="url">微服务Spring cloud经验总结系列(初级），第一篇：Spring cloud基础知识介绍</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-26T20:34:42+08:00">
                2017-12-26
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/系统架构/" itemprop="url" rel="index">
                    <span itemprop="name">系统架构</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/34b8cb48.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/34b8cb48.html" itemprop="url">机器学习资料大汇总</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-26T11:02:00+08:00">
                2017-12-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="机器学习资料大汇总"><a href="#机器学习资料大汇总" class="headerlink" title="机器学习资料大汇总"></a><span id="i">机器学习资料大汇总</span></h2><p><em>作者：我爱机器学习(52ml.net)</em></p>
<p><strong>注：</strong>本页面主要针对想快速上手机器学习而又不想深入研究的同学，对于专门的researcher，建议直接啃PRML，ESL，MLAPP以及你相应方向的书（比如Numerical Optimization，Graphic Model等），另外就是Follow牛会牛paper，如果谁有兴趣也可以一起来整理个专业的汇总页。本页面将持续更新，敬请关注，如有推荐的文章请留言，谢谢！</p>
<h4 id="000-开源工具"><a href="#000-开源工具" class="headerlink" title="000 开源工具"></a><span id="000">000 开源工具</span></h4><p><a href="http://www.52ml.net/12043.html" title="机器学习的开源工具" target="_blank" rel="noopener">机器学习的开源工具</a></p>
<p><a href="http://www.52ml.net/13547.html" title="Python机器学习库" target="_blank" rel="noopener">Python机器学习库</a></p>
<p><a href="http://www.52ml.net/13002.html" title="C++矩阵运算库推荐" target="_blank" rel="noopener">C++矩阵运算库推荐</a></p>
<h4 id=""><a href="#" class="headerlink" title=" "></a> </h4><h4 id="001-公开课"><a href="#001-公开课" class="headerlink" title="001 公开课"></a><span id="001">001 公开课</span></h4><p><a href="https://www.coursera.org/course/ml" title="Machine Learning | Coursera" target="_blank" rel="noopener">Machine Learning | Coursera</a> Andrew NG在coursera上的课，难度比公开课略低，适合入门</p>
<p><a href="http://v.163.com/special/opencourse/machinelearning.html" title="斯坦福大学公开课 ：机器学习课程" target="_blank" rel="noopener">斯坦福大学公开课 ：机器学习课程</a> Andrew NG在学校里面的课程，网易公开课有中英文字幕，可以配合<a href="http://cs229.stanford.edu/" target="_blank" rel="noopener">笔记</a>来看</p>
<p><a href="http://www.cs.cmu.edu/~tom/10701_sp11/lectures.shtml" target="_blank" rel="noopener">CMU机器学习系主任Tom Mitchell院士机器学习课程视频及课件</a>（英文）</p>
<p><a href="http://work.caltech.edu/telecourse.html" target="_blank" rel="noopener">机器学习|加州理工</a>，老师是Yaser Abu-Mostafa，会从最基本的理论开始，为你构建机器学习的基础。</p>
<p><a href="https://www.coursera.org/course/ntumlone" target="_blank" rel="noopener">机器学习基石</a> 如果想听中文课程，台湾大学的这门就很合适，友情提示，台大的课程基本上都可以加快语速来听，原因你懂的</p>
<p><a href="https://www.coursera.org/course/nlp" target="_blank" rel="noopener">神经网络|多伦多大学</a> 鼎鼎大名的Geoffrey Hinton ，这门课着实不容错过</p>
<p><a href="https://class.stanford.edu/courses/Engineering/CVX101/Winter2014/" target="_blank" rel="noopener">凸优化课程|斯坦福</a> 授课老师是凸优化经典教材的作者Stephen Boyd！有难度有挑战！</p>
<p><a href="https://www.coursera.org/course/pgm" target="_blank" rel="noopener">概率图模型 </a> coursera的另外一个创始人，Daphne Koller的课程，值得一提的是，Koller因提出了Probabilistic Relational Models拿到了2001年的IJCAI Computers and Thought Award</p>
<p><a href="https://class.stanford.edu/courses/HumanitiesScience/StatLearning/Winter2014" target="_blank" rel="noopener">统计学习|斯坦福</a> 授课老师是ESL作者 ，还有同学把视频放在了<a href="http://pan.baidu.com/s/1gd5hNdL" target="_blank" rel="noopener">百度网盘</a>上～ 这个更快一些</p>
<h3 id="1-机器学习入门篇"><a href="#1-机器学习入门篇" class="headerlink" title="1. 机器学习入门篇"></a><span id="1">1. 机器学习入门篇</span></h3><h4 id="1-1-机器学习介绍"><a href="#1-1-机器学习介绍" class="headerlink" title="  1.1 机器学习介绍"></a><span id="_11">  1.1 机器学习介绍</span></h4><p><a href="http://zh.wikipedia.org/zh-cn/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0" target="_blank" rel="noopener">机器学习-维基百科</a>  <a href="http://en.wikipedia.org/wiki/Machine_learning" target="_blank" rel="noopener">Machine Learning-Wikipedia</a></p>
<p><a href="http://www.52ml.net/11881.html" title="机器学习简史" target="_blank" rel="noopener">机器学习简史</a></p>
<p><a href="http://www.52ml.net/12043.html" title="机器学习的开源工具" target="_blank" rel="noopener">规则与机器学习</a> 不建议为了机器学习而机器学习，对于初学者应该是先规则再机器学习，规则直观，可以深入理解领域知识和特征，要记住一个机器学习的专家必须首先是该领域知识的专家。</p>
<p>贝叶斯思想 MLAPP 第5章 Bayesian statistics 第6章 Frequentist statistics 机器学习第6章 贝叶斯学习</p>
<p>监督学习 ESL 第2章 Overview of Supervised Learning</p>
<h4 id="1-2-书籍"><a href="#1-2-书籍" class="headerlink" title="    1.2 书籍"></a><span id="_12">    1.2 书籍</span></h4><p><a href="http://www.52ml.net/14252.html" title="书籍：《统计学习方法》" target="_blank" rel="noopener">《统计学习方法》</a> 第1章 统计学习方法概论</p>
<p>《机器学习》（Mitchell） 第1章 引言</p>
<p><a href="http://research.microsoft.com/en-us/um/people/cmbishop/prml/" target="_blank" rel="noopener">PRML</a> 第1章 Introduction</p>
<p><a href="http://www.cs.ubc.ca/~murphyk/MLbook/index.html" target="_blank" rel="noopener">MLAPP</a> 第1章 Introduction 第2章 Probability</p>
<p><a href="http://statweb.stanford.edu/~tibs/ElemStatLearn/" target="_blank" rel="noopener">ESL</a> 第1章 Introduction</p>
<p><a href="http://research.microsoft.com/en-us/um/people/cburges/tech_reports/tr-2004-56.pdf" target="_blank" rel="noopener">Some Notes on Applied Mathematics for Machine</a> (选修)</p>
<p><a href="http://www.52ml.net/13522.html" title="Machine Learning Textbook minireviews" target="_blank" rel="noopener">Machine Learning Textbook minireviews</a></p>
<p><a href="http://www.52ml.net/13463.html" title="List of Cool Machine Learning Books" target="_blank" rel="noopener">List of Cool Machine Learning Books</a></p>
<h4 id="1-3-数学基础"><a href="#1-3-数学基础" class="headerlink" title="  1.3 数学基础"></a><span id="13">  1.3 数学基础</span></h4><p>线性代数：公开课：<a href="http://v.163.com/special/opencourse/daishu.html" target="_blank" rel="noopener"> 线性代数</a>；推荐文章 ： <a href="http://www.52ml.net/13425.html" target="_blank" rel="noopener">线性代数的本质</a>，</p>
<p>概率论：公开课： <a href="https://www.coursera.org/course/prob" target="_blank" rel="noopener">概率课|台大</a> 叶老师为人风趣幽默，课程也比较简单，容易听进去</p>
<pre><code>书籍：MLAPP第二章
</code></pre><p>微积分：公开课：<a href="http://v.163.com/special/sp/singlevariablecalculus.html" target="_blank" rel="noopener">单变量微积分|MIT</a> <a href="http://v.163.com/special/opencourse/multivariable.html" target="_blank" rel="noopener">多变量微积分|MIT</a></p>
<p>——————————————-</p>
<h4 id="1-4-LDA"><a href="#1-4-LDA" class="headerlink" title="  1.4 LDA"></a><span id="_14_LDA">  1.4 LDA</span></h4><p><a href="http://www.52ml.net/12272.html" title="LDA最佳学习资料汇总" target="_blank" rel="noopener">LDA最佳学习资料汇总</a></p>
<h4 id="1-4-Spectral-Clustering"><a href="#1-4-Spectral-Clustering" class="headerlink" title="  1.4 Spectral Clustering"></a><span id="_14_Spectral_Clustering">  1.4 Spectral Clustering</span></h4><p><a href="http://www.52ml.net/12358.html" title="Spectral Clustering最佳学习资料汇总" target="_blank" rel="noopener">Spectral Clustering最佳学习资料汇总</a></p>
<h4 id="1-5-图像处理"><a href="#1-5-图像处理" class="headerlink" title="  1.5 图像处理"></a><span id="_15">  1.5 图像处理</span></h4><p><a href="http://www.52ml.net/12668.html" title="图像处理和计算机视觉中的经典论文" target="_blank" rel="noopener">图像处理和计算机视觉中的经典论文</a></p>
<h3 id="2-线性回归模型"><a href="#2-线性回归模型" class="headerlink" title="2 线性回归模型"></a><span id="2">2 线性回归模型</span></h3><p>PRML 第3章 Linear Models for Regression</p>
<p>MLAPP 第7章 Linear Regression 第13章 Sparse Linear Models</p>
<p>ESL 第3章 Linear Method for Regression</p>
<h3 id="3-线性分类模型"><a href="#3-线性分类模型" class="headerlink" title="3 线性分类模型"></a><span id="3">3 线性分类模型</span></h3><p>PRML 第4章 Linear Models for Classification</p>
<p>MLAPP 第8章 Logistic Regression 第9章 Generalized Linear Models and the exponential family</p>
<p>ESL 第4章 Linear Method for Classification</p>
<p>统计机器学习 第6章 逻辑斯谛回归与最大熵模型</p>
<h3 id="4-神经网络"><a href="#4-神经网络" class="headerlink" title="4 神经网络"></a><span id="4">4 神经网络</span></h3><p>PRML 第5章 Neural Networks</p>
<p>ESL 第11章 Neural Networks</p>
<p>统计学习方法 第2章 感知机</p>
<p>机器学习 第4章 人工神经网络</p>
<h3 id="5-支持向量机"><a href="#5-支持向量机" class="headerlink" title="5 支持向量机"></a><span id="5">5 支持向量机</span></h3><p>统计学习方法 第7章 支持向量机 (强烈推荐)</p>
<p>PRML 第6章 Kernel Methods 第7章 Sparse Kernel Machine</p>
<p>ESL 第12章 Support Vector Machines and Flexible Discriminants</p>
<p>MLAPP 第14章 Kernels</p>
<h3 id="6-图模型"><a href="#6-图模型" class="headerlink" title="6 图模型"></a><span id="6">6 图模型</span></h3><p>PRML 第8章 Graphical Models</p>
<p>MLAPP 第10章 Directed graphical models（Bayes nets） 第19章 Undirected Graphical Models（Marcov random fields）第20章 Exact inference for graphical models 第26章 Graphical model structure learning</p>
<p>统计学习方法 第10章 隐马尔可夫模型 第11章 条件随机场</p>
<p>机器学习 6.11 贝叶斯信念网</p>
<p>ESL 第17章 Undirected Graphical Models</p>
<p>Koller 的书</p>
<p>Jordan 的书</p>
<h3 id="7-混合模型和EM"><a href="#7-混合模型和EM" class="headerlink" title="7 混合模型和EM"></a><span id="7_EM">7 混合模型和EM</span></h3><p>PRML 第9章 Mixture Models and EM</p>
<p>MLAPP 第11章 Mixture models and the EM algorithm</p>
<p>ESL 8.5 The EM Algorithm</p>
<p>统计学习方法 第9章 EM算法及其推广</p>
<h3 id="8-近似推理"><a href="#8-近似推理" class="headerlink" title="8 近似推理"></a><span id="8">8 近似推理</span></h3><p>PRML 第10章 Approximate Inference</p>
<p>MLAPP 第21章 Variational Inference 第22章 More Variational Inference</p>
<h3 id="9-采样方法"><a href="#9-采样方法" class="headerlink" title="9 采样方法"></a><span id="9">9 采样方法</span></h3><p>PRML 第11章 Sampling Methods</p>
<p>MLAPP 第23章 Monte Carlo inference 第24章 Markov Chain Monte Carlo (MCMC) inference</p>
<p>ESL 8.6 MCMC for Sampling from Posterior</p>
<h3 id="10-PCA"><a href="#10-PCA" class="headerlink" title="10 PCA"></a><span id="10_PCA">10 PCA</span></h3><p>PRML 第12章 Continuous Latent Variables</p>
<p>MLAPP 第12章 Latent Linear Models</p>
<p>ESL 14.5 Principal Componens， Curves and Surfaces</p>
<h3 id="11-HMM"><a href="#11-HMM" class="headerlink" title="11 HMM"></a><span id="11_HMM">11 HMM</span></h3><p>PRML 13.1 13.2 Hidden Marcov Models</p>
<p>MLAPP 第17章 Marcov and Hidden Marcov Models</p>
<h3 id="12-组合模型"><a href="#12-组合模型" class="headerlink" title="12 组合模型"></a><span id="12">12 组合模型</span></h3><p>(投票，boosting，bagging，树模型，model averaging)</p>
<p>PRML 第14章 Combining Models</p>
<p>统计学习方法 第5章 决策树 第8章 提升方法</p>
<p>MLAPP 第16章 Adaptive basis function models</p>
<p>ESL 第15章 Random Forests 第16章 Ensemble Learning 8.7 Bagging 第9章 Additive Models, Trees, and Related Methods 第10章 Boosting and Additive Trees</p>
<p>机器学习 第3章 决策树学习</p>
<h3 id="14-聚类"><a href="#14-聚类" class="headerlink" title="14 聚类"></a><span id="14">14 聚类</span></h3><p>ESL 14.3 Cluster Analysis</p>
<p>MLAPP 25章 Clustering</p>
<p>PRML 9.1 K-means Clustering</p>
<h3 id="15-近邻"><a href="#15-近邻" class="headerlink" title=" 15 近邻"></a><span id="15"> 15 近邻</span></h3><p>ELS 第13章 Protype Methods and Nearest-Neighbors</p>
<h3 id="16-Deep-Learning"><a href="#16-Deep-Learning" class="headerlink" title="16 Deep Learning"></a><span id="16_Deep_Learning">16 Deep Learning</span></h3><p><a href="http://deeplearning.net/" title="http://deeplearning.net/" target="_blank" rel="noopener">http://deeplearning.net/</a></p>
<p><a href="http://deeplearning.net/tutorial/" title="Deep Learning Tutorial" target="_blank" rel="noopener">Deep Learning Tutorial</a></p>
<p>MLAPP 第28章 Deep Learning</p>
<h4 id="2-2-Deep-Learning教程"><a href="#2-2-Deep-Learning教程" class="headerlink" title="  2.2 Deep Learning教程"></a><span id="_22_Deep_Learning">  2.2 Deep Learning教程</span></h4><p><a href="http://www.52ml.net/12019.html" title="UFLDL-斯坦福大学Andrew Ng教授“Deep Learning”教程" target="_blank" rel="noopener">UFLDL-斯坦福大学Andrew Ng教授“Deep Learning”教程</a></p>
<hr>
<h3 id="3-自然语言处理入门篇"><a href="#3-自然语言处理入门篇" class="headerlink" title="3. 自然语言处理入门篇"></a><span id="3-2">3. 自然语言处理入门篇</span></h3><h4 id="3-1-斯坦福大学自然语言处理公开课"><a href="#3-1-斯坦福大学自然语言处理公开课" class="headerlink" title="  3.1 斯坦福大学自然语言处理公开课"></a><span id="_31">  3.1 斯坦福大学自然语言处理公开课</span></h4><p><a href="https://www.coursera.org/course/nlp" target="_blank" rel="noopener">NLP | 斯坦福 </a> 授课教师是 Dan Jurafsky 以及 Christopher Manning，英文不是很有信心的可以参考<a href="http://www.52ml.net/14247.html" title="斯坦福大学自然语言处理公开课中文解读" target="_blank" rel="noopener">《斯坦福大学自然语言处理公开课中文解读》</a></p>
<p><a href="https://www.coursera.org/course/nlangp" target="_blank" rel="noopener">NLP | 哥伦比亚 </a>授课老师是Michael Collins大神</p>
<h4 id="3-2-统计机器翻译"><a href="#3-2-统计机器翻译" class="headerlink" title="  3.2 统计机器翻译"></a><span id="_32">  3.2 统计机器翻译</span></h4><p><a href="http://www.statmt.org/" title="Statistical Machine Translation" target="_blank" rel="noopener">Statistical Machine Translation</a></p>
<p><a href="http://www.52ml.net/12296.html" title="统计机器翻译开源软件汇总" target="_blank" rel="noopener">统计机器翻译开源软件汇总</a></p>
<hr>
<p><strong>注：</strong>本页面将持续更新，敬请期待！</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/4a9da00c.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/4a9da00c.html" itemprop="url">亚马逊AWS CentOS7(linux)改为用户名密码登录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-22T20:19:00+08:00">
                2017-12-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div id="article_content" class="article_content csdn-tracking-statistics tracking-click" data-mod="popu_519" data-dsm="post"><br><div class="markdown_views"><br><br># 1.进入AWS系统<br><br>略<br>系统为：centos 7<br>fox.风<br><br># 2.设置ROOT密码<br><br><code class="hljs bash has-numbering"><span class="hljs-built_in">sudo passwd root</span></code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*   1</span><br><span class="line"></span><br><span class="line"># 3.修改配置文件</span><br><span class="line"></span><br><span class="line">&lt;pre class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs bash has-numbering&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;sudo vim /etc/ssh/sshd_config&lt;/span&gt;&lt;/code&gt;</span><br></pre></td></tr></table></figure><br><br>    <em>   1<br><br>相应的参数修改为<br><br>    <pre class="prettyprint"><code class="hljs coffeescript has-numbering">PermitRootLogin <span class="hljs-literal">yes<br>    PasswordAuthentication <span class="hljs-literal">yes</span></span></code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    *   1</span><br><span class="line">    *   2</span><br><span class="line"></span><br><span class="line">    # 4.应用使之生效</span><br><span class="line"></span><br><span class="line">4.1重启服务器 即可</span><br><span class="line"></span><br><span class="line">    &lt;pre class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs bash has-numbering&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;sudo reboot&lt;/span&gt;&lt;/code&gt;</span><br></pre></td></tr></table></figure>

    </pre></em>   1<br><br>4.2重启服务<br><br>    <pre class="prettyprint"><code class="hljs bash has-numbering"><span class="hljs-built_in">sudo systemctl restart sshd.service</span></code><code>`</code><br><br>    *   1<br><br>    <div class="article_copyright">版权声明：原创文章欢迎转载，不过要记得加出处哦 <a href="http://blog.csdn.net/fenglailea/article/details/52711373" target="_blank" rel="noopener">http://blog.csdn.net/fenglailea/article/details/52711373</a></div></pre><br></div></div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/b5bf905d.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/b5bf905d.html" itemprop="url">Spring Boot 集成Swagger</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-21T13:58:00+08:00">
                2017-12-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Swagger 是一个规范和完整的框架，用于生成、描述、调用和可视化 RESTful 风格的 Web 服务。总体目标是使客户端和文件系统作为服务器以同样的速度来更新。文件的方法，参数和模型紧密集成到服务器端的代码，允许API来始终保持同步。Swagger 让部署管理和使用功能强大的API从未如此简单。</p>
<p>更多关于Swagger的作用，相信大家百度一下能了解的更全面，本文以SpringBoot中集成Swagger为例做介绍说明。</p>
<p><strong>一、修改pom.xml，添加maven依赖</strong></p>
<p><code class="hljs xml has-numbering">        <span class="hljs-comment"><!-- Swagger --><br>            <span class="hljs-tag">&lt;<span class="hljs-title">dependency&gt;<br>                <span class="hljs-tag">&lt;<span class="hljs-title">groupId&gt;io.springfox<span class="hljs-tag">&lt;/<span class="hljs-title">groupId&gt;<br>                <span class="hljs-tag">&lt;<span class="hljs-title">artifactId&gt;springfox-swagger2<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId&gt;<br>                <span class="hljs-tag">&lt;<span class="hljs-title">version&gt;2.6.1<span class="hljs-tag">&lt;/<span class="hljs-title">version&gt;<br>            <span class="hljs-tag">&lt;/<span class="hljs-title">dependency&gt;</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></p>
<pre><code>&lt;span class=&quot;hljs-tag&quot;&gt;&lt;&lt;span class=&quot;hljs-title&quot;&gt;dependency&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&lt;&lt;span class=&quot;hljs-title&quot;&gt;groupId&gt;io.springfox&lt;span class=&quot;hljs-tag&quot;&gt;&lt;/&lt;span class=&quot;hljs-title&quot;&gt;groupId&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&lt;&lt;span class=&quot;hljs-title&quot;&gt;artifactId&gt;springfox-swagger-ui&lt;span class=&quot;hljs-tag&quot;&gt;&lt;/&lt;span class=&quot;hljs-title&quot;&gt;artifactId&gt;
    &lt;span class=&quot;hljs-tag&quot;&gt;&lt;&lt;span class=&quot;hljs-title&quot;&gt;version&gt;2.6.1&lt;span class=&quot;hljs-tag&quot;&gt;&lt;/&lt;span class=&quot;hljs-title&quot;&gt;version&gt;
&lt;span class=&quot;hljs-tag&quot;&gt;&lt;/&lt;span class=&quot;hljs-title&quot;&gt;dependency&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**二、添加Swagger配置类**</span><br><span class="line"></span><br><span class="line">    &lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs java has-numbering&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;package com.example.swaggerdemo;</span><br><span class="line"></span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import &lt;span class=&quot;hljs-keyword&quot;&gt;static com.google.common.base.Predicates.or;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import &lt;span class=&quot;hljs-keyword&quot;&gt;static springfox.documentation.builders.PathSelectors.regex;</span><br><span class="line"></span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.springframework.context.annotation.Bean;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.springframework.context.annotation.Configuration;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.springframework.web.context.request.async.DeferredResult;</span><br><span class="line"></span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import springfox.documentation.service.ApiInfo;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import springfox.documentation.spi.DocumentationType;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import springfox.documentation.spring.web.plugins.Docket;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import springfox.documentation.swagger2.annotations.EnableSwagger2;</span><br><span class="line"></span><br><span class="line">    &lt;span class=&quot;hljs-javadoc&quot;&gt;/**</span><br><span class="line">     * SwaggerConfig</span><br><span class="line">     */</span><br><span class="line">    &lt;span class=&quot;hljs-annotation&quot;&gt;@Configuration</span><br><span class="line">    &lt;span class=&quot;hljs-annotation&quot;&gt;@EnableSwagger2</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class &lt;span class=&quot;hljs-title&quot;&gt;SwaggerConfig &#123;</span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-javadoc&quot;&gt;/**</span><br><span class="line">         * SpringBoot默认已经将classpath:/META-INF/resources/和classpath:/META-INF/resources/webjars/映射</span><br><span class="line">         * 所以该方法不需要重写，如果在SpringMVC中，可能需要重写定义（我没有尝试）</span><br><span class="line">         * 重写该方法需要 extends WebMvcConfigurerAdapter</span><br><span class="line">         * </span><br><span class="line">         */</span><br><span class="line">    &lt;span class=&quot;hljs-comment&quot;&gt;//    @Override</span><br><span class="line">    &lt;span class=&quot;hljs-comment&quot;&gt;//    public void addResourceHandlers(ResourceHandlerRegistry registry) &#123;</span><br><span class="line">    &lt;span class=&quot;hljs-comment&quot;&gt;//        registry.addResourceHandler(&quot;swagger-ui.html&quot;)</span><br><span class="line">    &lt;span class=&quot;hljs-comment&quot;&gt;//                .addResourceLocations(&quot;classpath:/META-INF/resources/&quot;);</span><br><span class="line">    &lt;span class=&quot;hljs-comment&quot;&gt;//</span><br><span class="line">    &lt;span class=&quot;hljs-comment&quot;&gt;//        registry.addResourceHandler(&quot;/webjars/**&quot;)</span><br><span class="line">    &lt;span class=&quot;hljs-comment&quot;&gt;//                .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;);</span><br><span class="line">    &lt;span class=&quot;hljs-comment&quot;&gt;//    &#125;</span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-javadoc&quot;&gt;/**</span><br><span class="line">         * 可以定义多个组，比如本类中定义把test和demo区分开了</span><br><span class="line">         * （访问页面就可以看到效果了） </span><br><span class="line">         *</span><br><span class="line">         */</span><br><span class="line">        &lt;span class=&quot;hljs-annotation&quot;&gt;@Bean</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public Docket &lt;span class=&quot;hljs-title&quot;&gt;testApi() &#123;</span><br><span class="line">            &lt;span class=&quot;hljs-keyword&quot;&gt;return &lt;span class=&quot;hljs-keyword&quot;&gt;new Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                    .groupName(&lt;span class=&quot;hljs-string&quot;&gt;&quot;test&quot;)</span><br><span class="line">                    .genericModelSubstitutes(DeferredResult.class)</span><br><span class="line">    &lt;span class=&quot;hljs-comment&quot;&gt;//                .genericModelSubstitutes(ResponseEntity.class)</span><br><span class="line">                    .useDefaultResponseMessages(&lt;span class=&quot;hljs-keyword&quot;&gt;false)</span><br><span class="line">                    .forCodeGeneration(&lt;span class=&quot;hljs-keyword&quot;&gt;true)</span><br><span class="line">                    .pathMapping(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/&quot;)&lt;span class=&quot;hljs-comment&quot;&gt;// base，最终调用接口后会和paths拼接在一起</span><br><span class="line">                    .select()</span><br><span class="line">                    .paths(or(regex(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/api/.*&quot;)))&lt;span class=&quot;hljs-comment&quot;&gt;//过滤的接口</span><br><span class="line">                    .build()</span><br><span class="line">                    .apiInfo(testApiInfo());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-annotation&quot;&gt;@Bean</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public Docket &lt;span class=&quot;hljs-title&quot;&gt;demoApi() &#123;</span><br><span class="line">            &lt;span class=&quot;hljs-keyword&quot;&gt;return &lt;span class=&quot;hljs-keyword&quot;&gt;new Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                    .groupName(&lt;span class=&quot;hljs-string&quot;&gt;&quot;demo&quot;)</span><br><span class="line">                    .genericModelSubstitutes(DeferredResult.class)</span><br><span class="line">    &lt;span class=&quot;hljs-comment&quot;&gt;//              .genericModelSubstitutes(ResponseEntity.class)</span><br><span class="line">                    .useDefaultResponseMessages(&lt;span class=&quot;hljs-keyword&quot;&gt;false)</span><br><span class="line">                    .forCodeGeneration(&lt;span class=&quot;hljs-keyword&quot;&gt;false)</span><br><span class="line">                    .pathMapping(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/&quot;)</span><br><span class="line">                    .select()</span><br><span class="line">                    .paths(or(regex(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/demo/.*&quot;)))&lt;span class=&quot;hljs-comment&quot;&gt;//过滤的接口</span><br><span class="line">                    .build()</span><br><span class="line">                    .apiInfo(demoApiInfo());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;private ApiInfo &lt;span class=&quot;hljs-title&quot;&gt;testApiInfo() &#123;</span><br><span class="line">            &lt;span class=&quot;hljs-keyword&quot;&gt;return &lt;span class=&quot;hljs-keyword&quot;&gt;new ApiInfoBuilder()</span><br><span class="line">                .title(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Electronic Health Record(EHR) Platform API&quot;)&lt;span class=&quot;hljs-comment&quot;&gt;//大标题</span><br><span class="line">                .description(&lt;span class=&quot;hljs-string&quot;&gt;&quot;EHR Platform&apos;s REST API, all the applications could access the Object model data via JSON.&quot;)&lt;span class=&quot;hljs-comment&quot;&gt;//详细描述</span><br><span class="line">                .version(&lt;span class=&quot;hljs-string&quot;&gt;&quot;1.0&quot;)&lt;span class=&quot;hljs-comment&quot;&gt;//版本</span><br><span class="line">                .termsOfServiceUrl(&lt;span class=&quot;hljs-string&quot;&gt;&quot;NO terms of service&quot;)</span><br><span class="line">                .contact(&lt;span class=&quot;hljs-keyword&quot;&gt;new Contact(&lt;span class=&quot;hljs-string&quot;&gt;&quot;小单&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;http://blog.csdn.net/catoop&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;365384722@qq.com&quot;))&lt;span class=&quot;hljs-comment&quot;&gt;//作者</span><br><span class="line">                .license(&lt;span class=&quot;hljs-string&quot;&gt;&quot;The Apache License, Version 2.0&quot;)</span><br><span class="line">                .licenseUrl(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://www.apache.org/licenses/LICENSE-2.0.html&quot;)</span><br><span class="line">                .build();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;private ApiInfo &lt;span class=&quot;hljs-title&quot;&gt;demoApiInfo() &#123;</span><br><span class="line">            &lt;span class=&quot;hljs-keyword&quot;&gt;return &lt;span class=&quot;hljs-keyword&quot;&gt;new ApiInfoBuilder()</span><br><span class="line">                .title(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Electronic Health Record(EHR) Platform API&quot;)&lt;span class=&quot;hljs-comment&quot;&gt;//大标题</span><br><span class="line">                .description(&lt;span class=&quot;hljs-string&quot;&gt;&quot;EHR Platform&apos;s REST API, all the applications could access the Object model data via JSON.&quot;)&lt;span class=&quot;hljs-comment&quot;&gt;//详细描述</span><br><span class="line">                .version(&lt;span class=&quot;hljs-string&quot;&gt;&quot;1.0&quot;)&lt;span class=&quot;hljs-comment&quot;&gt;//版本</span><br><span class="line">                .termsOfServiceUrl(&lt;span class=&quot;hljs-string&quot;&gt;&quot;NO terms of service&quot;)</span><br><span class="line">                .contact(&lt;span class=&quot;hljs-keyword&quot;&gt;new Contact(&lt;span class=&quot;hljs-string&quot;&gt;&quot;小单&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;http://blog.csdn.net/catoop&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;365384722@qq.com&quot;))&lt;span class=&quot;hljs-comment&quot;&gt;//作者</span><br><span class="line">                .license(&lt;span class=&quot;hljs-string&quot;&gt;&quot;The Apache License, Version 2.0&quot;)</span><br><span class="line">                .licenseUrl(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://www.apache.org/licenses/LICENSE-2.0.html&quot;)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">            &lt;span class=&quot;hljs-keyword&quot;&gt;return apiInfo;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;</span><br></pre></td></tr></table></figure>
</code></pre><p>经过这2步配置后，我们启动服务后，访问：<a href="http://localhost:8080/swagger-ui.html" target="_blank" rel="noopener">http://localhost:8080/swagger-ui.html</a> 就完成了集成。</p>
<p>Swagger会默认把所有Controller中的RequestMapping方法都生成API出来，实际上我们一般只需要标准接口的（像返回页面的那种Controller方法我们并不需要），所有你可以按下面的方法来设定要生成API的方法的要求。<br>如下我针对RestController注解的类和ResponseBody注解的方法才生成Swaager的API，并且排除了特定的类，代码如下：</p>
<pre><code>&lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs java has-numbering&quot;&gt;&lt;span class=&quot;hljs-annotation&quot;&gt;@Configuration
&lt;span class=&quot;hljs-annotation&quot;&gt;@EnableSwagger2 &lt;span class=&quot;hljs-comment&quot;&gt;// 启用 Swagger
&lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class &lt;span class=&quot;hljs-title&quot;&gt;SwaggerConfig {

    &lt;span class=&quot;hljs-annotation&quot;&gt;@Bean
    &lt;span class=&quot;hljs-keyword&quot;&gt;public Docket &lt;span class=&quot;hljs-title&quot;&gt;createRestApi() {
        Predicate&lt;RequestHandler&gt; predicate = &lt;span class=&quot;hljs-keyword&quot;&gt;new Predicate&lt;RequestHandler&gt;() {
            &lt;span class=&quot;hljs-annotation&quot;&gt;@Override
            &lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-keyword&quot;&gt;boolean &lt;span class=&quot;hljs-title&quot;&gt;apply(RequestHandler input) {
                Class&lt;?&gt; declaringClass = input.declaringClass();
                &lt;span class=&quot;hljs-keyword&quot;&gt;if (declaringClass == BasicErrorController.class)&lt;span class=&quot;hljs-comment&quot;&gt;// 排除
                    &lt;span class=&quot;hljs-keyword&quot;&gt;return &lt;span class=&quot;hljs-keyword&quot;&gt;false;
                &lt;span class=&quot;hljs-keyword&quot;&gt;if(declaringClass.isAnnotationPresent(RestController.class)) &lt;span class=&quot;hljs-comment&quot;&gt;// 被注解的类
                    &lt;span class=&quot;hljs-keyword&quot;&gt;return &lt;span class=&quot;hljs-keyword&quot;&gt;true;
                &lt;span class=&quot;hljs-keyword&quot;&gt;if(input.isAnnotatedWith(ResponseBody.class)) &lt;span class=&quot;hljs-comment&quot;&gt;// 被注解的方法
                    &lt;span class=&quot;hljs-keyword&quot;&gt;return &lt;span class=&quot;hljs-keyword&quot;&gt;true;
                &lt;span class=&quot;hljs-keyword&quot;&gt;return &lt;span class=&quot;hljs-keyword&quot;&gt;false;
            }
        };
        &lt;span class=&quot;hljs-keyword&quot;&gt;return &lt;span class=&quot;hljs-keyword&quot;&gt;new Docket(DocumentationType.SWAGGER_2)
                .apiInfo(apiInfo())
                .useDefaultResponseMessages(&lt;span class=&quot;hljs-keyword&quot;&gt;false)
                .select()
                .apis(predicate)
                .build();
    }

    &lt;span class=&quot;hljs-keyword&quot;&gt;private ApiInfo &lt;span class=&quot;hljs-title&quot;&gt;apiInfo() {
        &lt;span class=&quot;hljs-keyword&quot;&gt;return &lt;span class=&quot;hljs-keyword&quot;&gt;new ApiInfoBuilder()
            .title(&lt;span class=&quot;hljs-string&quot;&gt;&quot;包含媒体、咨询、搜索引擎关键字、广告等类型接口的服务&quot;)&lt;span class=&quot;hljs-comment&quot;&gt;//大标题
            .version(&lt;span class=&quot;hljs-string&quot;&gt;&quot;1.0&quot;)&lt;span class=&quot;hljs-comment&quot;&gt;//版本
            .build();
    }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**三、常见swagger注解一览与使用**</span><br><span class="line"></span><br><span class="line">最常用的5个注解</span><br><span class="line"></span><br><span class="line">    &lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs ruby has-numbering&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;@Api：修饰整个类，描述&lt;span class=&quot;hljs-constant&quot;&gt;Controller的作用</span><br><span class="line">    &lt;span class=&quot;hljs-variable&quot;&gt;@ApiOperation：描述一个类的一个方法，或者说一个接口</span><br><span class="line">    &lt;span class=&quot;hljs-variable&quot;&gt;@ApiParam：单个参数描述</span><br><span class="line">    &lt;span class=&quot;hljs-variable&quot;&gt;@ApiModel：用对象来接收参数</span><br><span class="line">    &lt;span class=&quot;hljs-variable&quot;&gt;@ApiProperty：用对象接收参数时，描述对象的一个字段&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;</span><br></pre></td></tr></table></figure>
</code></pre><p>其它若干</p>
<pre><code>&lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs ruby has-numbering&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;@ApiResponse：&lt;span class=&quot;hljs-constant&quot;&gt;HTTP响应其中&lt;span class=&quot;hljs-number&quot;&gt;1个描述
&lt;span class=&quot;hljs-variable&quot;&gt;@ApiResponses：&lt;span class=&quot;hljs-constant&quot;&gt;HTTP响应整体描述
&lt;span class=&quot;hljs-variable&quot;&gt;@ApiIgnore：使用该注解忽略这个&lt;span class=&quot;hljs-constant&quot;&gt;API 

&lt;span class=&quot;hljs-variable&quot;&gt;@ApiClass
&lt;span class=&quot;hljs-variable&quot;&gt;@ApiError
&lt;span class=&quot;hljs-variable&quot;&gt;@ApiErrors

&lt;span class=&quot;hljs-variable&quot;&gt;@ApiParamImplicit
&lt;span class=&quot;hljs-variable&quot;&gt;@ApiParamsImplicit&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">下面创建2个Controller来测试：   </span><br><span class="line">1、TestController.java</span><br><span class="line"></span><br><span class="line">    &lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs java has-numbering&quot;&gt;&lt;span class=&quot;hljs-annotation&quot;&gt;@Controller</span><br><span class="line">    &lt;span class=&quot;hljs-annotation&quot;&gt;@RequestMapping(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/api/test&quot;)</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class &lt;span class=&quot;hljs-title&quot;&gt;TestController &#123;</span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-annotation&quot;&gt;@ResponseBody</span><br><span class="line">        &lt;span class=&quot;hljs-annotation&quot;&gt;@RequestMapping(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;/show&quot;, method=RequestMethod.POST, produces=MediaType.APPLICATION_JSON_VALUE)&lt;span class=&quot;hljs-comment&quot;&gt;// 这里指定RequestMethod，如果不指定Swagger会把所有RequestMethod都输出，在实际应用中，具体指定请求类型也使接口更为严谨。</span><br><span class="line">        &lt;span class=&quot;hljs-annotation&quot;&gt;@ApiOperation(value=&lt;span class=&quot;hljs-string&quot;&gt;&quot;测试接口&quot;, notes=&lt;span class=&quot;hljs-string&quot;&gt;&quot;测试接口详细描述&quot;)</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public String &lt;span class=&quot;hljs-title&quot;&gt;show(</span><br><span class="line">                @&lt;span class=&quot;hljs-title&quot;&gt;ApiParam(required=&lt;span class=&quot;hljs-keyword&quot;&gt;true, name=&lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;, value=&lt;span class=&quot;hljs-string&quot;&gt;&quot;姓名&quot;)</span><br><span class="line">                &lt;span class=&quot;hljs-annotation&quot;&gt;@RequestParam(name = &lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;, required=&lt;span class=&quot;hljs-keyword&quot;&gt;true) String stuName)&#123;</span><br><span class="line">            &lt;span class=&quot;hljs-keyword&quot;&gt;return &lt;span class=&quot;hljs-string&quot;&gt;&quot;success&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;</span><br></pre></td></tr></table></figure>
</code></pre><p>2、DemoController.java</p>
<pre><code>&lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs java has-numbering&quot;&gt;&lt;span class=&quot;hljs-javadoc&quot;&gt;/**
 * DemoController
 * 
 */
&lt;span class=&quot;hljs-annotation&quot;&gt;@Controller
&lt;span class=&quot;hljs-annotation&quot;&gt;@RequestMapping(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;/demo&quot;)
&lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class &lt;span class=&quot;hljs-title&quot;&gt;DemoController {

    &lt;span class=&quot;hljs-keyword&quot;&gt;private Logger logger = LoggerFactory.getLogger(DemoController.class);

    &lt;span class=&quot;hljs-javadoc&quot;&gt;/**
     * 可以直接使用@ResponseBody响应JSON
     * 
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @param request
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @param response
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @return
     */
    &lt;span class=&quot;hljs-annotation&quot;&gt;@ResponseBody
    &lt;span class=&quot;hljs-annotation&quot;&gt;@RequestMapping(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;/getcount&quot;, method = RequestMethod.POST)
    &lt;span class=&quot;hljs-annotation&quot;&gt;@ApiOperation(value=&lt;span class=&quot;hljs-string&quot;&gt;&quot;测试-getCount&quot;, notes=&lt;span class=&quot;hljs-string&quot;&gt;&quot;getCount更多说明&quot;)
    &lt;span class=&quot;hljs-keyword&quot;&gt;public ModelMap &lt;span class=&quot;hljs-title&quot;&gt;getCount(HttpServletRequest request,
            HttpServletResponse response) {
        logger.info(&lt;span class=&quot;hljs-string&quot;&gt;&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; begin getCount &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;);
        ModelMap map = &lt;span class=&quot;hljs-keyword&quot;&gt;new ModelMap();
        map.addAttribute(&lt;span class=&quot;hljs-string&quot;&gt;&quot;count&quot;, &lt;span class=&quot;hljs-number&quot;&gt;158);

        &lt;span class=&quot;hljs-comment&quot;&gt;// 后台获取的国际化信息
        map.addAttribute(&lt;span class=&quot;hljs-string&quot;&gt;&quot;xstest&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;测试&quot;);
        &lt;span class=&quot;hljs-keyword&quot;&gt;return map;
    }

    &lt;span class=&quot;hljs-javadoc&quot;&gt;/**
     * 可以直接使用@ResponseBody响应JSON
     * 
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @param request
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @param response
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @return
     */
    &lt;span class=&quot;hljs-annotation&quot;&gt;@ApiIgnore&lt;span class=&quot;hljs-comment&quot;&gt;//使用该注解忽略这个API
    &lt;span class=&quot;hljs-annotation&quot;&gt;@ResponseBody
    &lt;span class=&quot;hljs-annotation&quot;&gt;@RequestMapping(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;/jsonTest1&quot;, method = RequestMethod.POST)
    &lt;span class=&quot;hljs-keyword&quot;&gt;public ModelMap &lt;span class=&quot;hljs-title&quot;&gt;jsonTest(HttpServletRequest request,
            HttpServletResponse response) {
        ModelMap map = &lt;span class=&quot;hljs-keyword&quot;&gt;new ModelMap();
        map.addAttribute(&lt;span class=&quot;hljs-string&quot;&gt;&quot;hello&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;你好&quot;);
        map.addAttribute(&lt;span class=&quot;hljs-string&quot;&gt;&quot;veryGood&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;很好&quot;);

        &lt;span class=&quot;hljs-keyword&quot;&gt;return map;
    }

    &lt;span class=&quot;hljs-javadoc&quot;&gt;/**
     * 可以直接使用@ResponseBody响应JSON
     * 
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @param request
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @param response
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @return
     */
    &lt;span class=&quot;hljs-annotation&quot;&gt;@ResponseBody
    &lt;span class=&quot;hljs-annotation&quot;&gt;@RequestMapping(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;/jsonTest3&quot;, method = RequestMethod.POST)
    &lt;span class=&quot;hljs-keyword&quot;&gt;public List&lt;String&gt; &lt;span class=&quot;hljs-title&quot;&gt;jsonTest3(HttpServletRequest request,
            HttpServletResponse response) {
        List&lt;String&gt; list = &lt;span class=&quot;hljs-keyword&quot;&gt;new ArrayList&lt;String&gt;();
        list.add(&lt;span class=&quot;hljs-string&quot;&gt;&quot;hello&quot;);
        list.add(&lt;span class=&quot;hljs-string&quot;&gt;&quot;你好&quot;);
        &lt;span class=&quot;hljs-keyword&quot;&gt;return list;
    }

    &lt;span class=&quot;hljs-javadoc&quot;&gt;/**
     * JSON请求一个对象&lt;br/&gt;
     * （Ajax Post Data：{&quot;name&quot;:&quot;名称&quot;,&quot;content&quot;:&quot;内容&quot;}）
     * 
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @param version
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @return
     */
    &lt;span class=&quot;hljs-annotation&quot;&gt;@ResponseBody
    &lt;span class=&quot;hljs-annotation&quot;&gt;@RequestMapping(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;/jsonTest2&quot;, method = RequestMethod.POST)
    &lt;span class=&quot;hljs-keyword&quot;&gt;public ModelMap &lt;span class=&quot;hljs-title&quot;&gt;jsonTest2(@RequestBody Demo demo) {
        logger.info(&lt;span class=&quot;hljs-string&quot;&gt;&quot;demoName：&quot; + demo.getName());
        logger.info(&lt;span class=&quot;hljs-string&quot;&gt;&quot;demoContent：&quot; + demo.getContent());
        ModelMap map = &lt;span class=&quot;hljs-keyword&quot;&gt;new ModelMap();
        map.addAttribute(&lt;span class=&quot;hljs-string&quot;&gt;&quot;result&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;ok&quot;);
        &lt;span class=&quot;hljs-keyword&quot;&gt;return map;
    }

    &lt;span class=&quot;hljs-javadoc&quot;&gt;/**
     * 直接读取URL参数值&lt;br/&gt;
     * /demo/jsonTest6.do?name=Hello&amp;content=World
     * 
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @param demoName
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @param content
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @return
     */
    &lt;span class=&quot;hljs-annotation&quot;&gt;@ResponseBody
    &lt;span class=&quot;hljs-annotation&quot;&gt;@RequestMapping(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;/jsonTest6&quot;, method = RequestMethod.POST)
    &lt;span class=&quot;hljs-keyword&quot;&gt;public ModelMap &lt;span class=&quot;hljs-title&quot;&gt;jsonTest6(@&lt;span class=&quot;hljs-title&quot;&gt;RequestParam(&quot;name&quot;) String demoName, @RequestParam String content) {
        logger.info(&lt;span class=&quot;hljs-string&quot;&gt;&quot;demoName：&quot; + demoName);
        ModelMap map = &lt;span class=&quot;hljs-keyword&quot;&gt;new ModelMap();
        map.addAttribute(&lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;,demoName + &lt;span class=&quot;hljs-string&quot;&gt;&quot;AAA&quot;);
        map.addAttribute(&lt;span class=&quot;hljs-string&quot;&gt;&quot;content&quot;,content + &lt;span class=&quot;hljs-string&quot;&gt;&quot;BBB&quot;);
        map.addAttribute(&lt;span class=&quot;hljs-string&quot;&gt;&quot;date&quot;,&lt;span class=&quot;hljs-keyword&quot;&gt;new java.util.Date());
        &lt;span class=&quot;hljs-keyword&quot;&gt;return map;
    }

    &lt;span class=&quot;hljs-javadoc&quot;&gt;/**
     * JSON请求一个对象，将RequestBody自动转换为JSONObject对象&lt;br/&gt;
     * （Ajax Post Data：{&quot;name&quot;:&quot;名称&quot;,&quot;content&quot;:&quot;内容&quot;}）
     * 
     * 使用JSONObject请添加依赖
     *  &lt;dependency&gt;
     *      &lt;groupId&gt;net.sf.json-lib&lt;/groupId&gt;
     *      &lt;artifactId&gt;json-lib&lt;/artifactId&gt;
     *      &lt;version&gt;2.4&lt;/version&gt;
     *      &lt;!--指定jdk版本 --&gt;
     *      &lt;classifier&gt;jdk15&lt;/classifier&gt;
     *  &lt;/dependency&gt;
     * 
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @param version
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @return
     */
    &lt;span class=&quot;hljs-annotation&quot;&gt;@ResponseBody
    &lt;span class=&quot;hljs-annotation&quot;&gt;@RequestMapping(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;/jsonTest5&quot;, method = RequestMethod.POST)
    &lt;span class=&quot;hljs-keyword&quot;&gt;public ModelMap &lt;span class=&quot;hljs-title&quot;&gt;jsonTest5(@RequestBody JSONObject jsonObject) {
        String name = jsonObject.getString(&lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot;);
        logger.info(&lt;span class=&quot;hljs-string&quot;&gt;&quot;demoName：&quot; + name);
        ModelMap map = &lt;span class=&quot;hljs-keyword&quot;&gt;new ModelMap();
        map.addAttribute(&lt;span class=&quot;hljs-string&quot;&gt;&quot;demoName&quot;,name);
        &lt;span class=&quot;hljs-keyword&quot;&gt;return map;
    }

    &lt;span class=&quot;hljs-javadoc&quot;&gt;/**
     * 输入 和输出为JSON格式的数据的方式 HttpEntity&lt;?&gt; ResponseEntity&lt;?&gt;
     * 
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @param u
     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @return
     */
    &lt;span class=&quot;hljs-annotation&quot;&gt;@ResponseBody
    &lt;span class=&quot;hljs-annotation&quot;&gt;@RequestMapping(value = &lt;span class=&quot;hljs-string&quot;&gt;&quot;/jsonTest4&quot;, method = RequestMethod.POST)
    &lt;span class=&quot;hljs-keyword&quot;&gt;public ResponseEntity&lt;String&gt; &lt;span class=&quot;hljs-title&quot;&gt;jsonTest4(HttpEntity&lt;Demo&gt; demo,
            HttpServletRequest request, HttpSession session) {
        &lt;span class=&quot;hljs-comment&quot;&gt;//获取Headers方法
        HttpHeaders headers = demo.getHeaders();

        &lt;span class=&quot;hljs-comment&quot;&gt;// 获取内容
        String demoContent = demo.getBody().getContent();

        &lt;span class=&quot;hljs-comment&quot;&gt;// 这里直接new一个对象（HttpHeaders headers = new HttpHeaders();）
        HttpHeaders responseHeaders = &lt;span class=&quot;hljs-keyword&quot;&gt;new HttpHeaders();
        responseHeaders.add(&lt;span class=&quot;hljs-string&quot;&gt;&quot;MyHeaderName&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;SHANHY&quot;);

        ResponseEntity&lt;String&gt; responseResult = &lt;span class=&quot;hljs-keyword&quot;&gt;new ResponseEntity&lt;String&gt;(
                demoContent, responseHeaders, HttpStatus.OK);
        &lt;span class=&quot;hljs-keyword&quot;&gt;return responseResult;
    }

}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;```
</code></pre><p>Swagger2默认将所有的Controller中的RequestMapping方法都会暴露，然而在实际开发中，我们并不一定需要把所有API都提现在文档中查看，这种情况下，使用注解@ApiIgnore来解决，如果应用在Controller范围上，则当前Controller中的所有方法都会被忽略，如果应用在方法上，则对应用的方法忽略暴露API。</p>
<p>注解@ApiOperation和@ApiParam可以理解为API说明，多动手尝试就很容易理解了。<br>如果我们不使用这样注解进行说明，Swagger2也是有默认值的，没什么可说的试试就知道了。</p>
<p>在 <a href="http://localhost:8080/swagger-ui.html" target="_blank" rel="noopener">http://localhost:8080/swagger-ui.html</a> 显示页面的右上角有api_key ，springfox-swagger 2.2.2 版本并没有进行处理，我们可以自己添加拦截器拦截 /v2/api-docs 来处理我们API文档的访问权限，如果要更严格更灵活的控制，可能需要修改源码来实现了。相信 springfox-swagger 的后期版本应该会支持更全面的应用需求的。</p>
<p>引自 <a href="http://blog.csdn.net/catoop/article/details/50668896" target="_blank" rel="noopener">http://blog.csdn.net/catoop/article/details/50668896</a></p>
<p></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/4d8e0f6a.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/4d8e0f6a.html" itemprop="url">彻底搞清楚javascript中的require、import和export</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-20T14:34:00+08:00">
                2017-12-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="为什么有模块概念"><a href="#为什么有模块概念" class="headerlink" title="为什么有模块概念"></a>为什么有模块概念</h2><p>理想情况下，开发者只需要实现核心的业务逻辑，其他都可以加载别人已经写好的模块。</p>
<p>但是，Javascript不是一种模块化编程语言，在es6以前，它是不支持”类”（class），所以也就没有”模块”（module）了。</p>
<h2 id="require时代"><a href="#require时代" class="headerlink" title="require时代"></a>require时代</h2><p>Javascript社区做了很多努力，在现有的运行环境中，实现”模块”的效果。</p>
<h3 id="原始写法"><a href="#原始写法" class="headerlink" title="原始写法"></a>原始写法</h3><p>模块就是实现特定功能的一组方法。<br>只要把不同的函数（以及记录状态的变量）简单地放在一起，就算是一个模块。</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><div class="line">5<br><div class="line">6<br><br></div></div></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="function"><span class="keyword">function <span class="title">m1(<span class="params">){</span></span></span></span><br><div class="line">　<span class="comment">//…</span><br><div class="line">}<br><div class="line"><span class="function"><span class="keyword">function <span class="title">m2(<span class="params">){</span></span></span></span><br><div class="line">　<span class="comment">//…　　</span><br><div class="line">}<br><br></div></div></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>上面的函数m1()和m2()，组成一个模块。使用的时候，直接调用就行了。</p>
<p>这种做法的缺点很明显：”污染”了全局变量，无法保证不与其他模块发生变量名冲突，而且模块成员之间看不出直接关系。</p>
<h3 id="对象写法"><a href="#对象写法" class="headerlink" title="对象写法"></a>对象写法</h3><p>为了解决上面的缺点，可以把模块写成一个对象，所有的模块成员都放到这个对象里面</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><div class="line">5<br><div class="line">6<br><div class="line">7<br><div class="line">8<br><div class="line">9<br><br></div></div></div></div></div></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="keyword">var module1 = <span class="keyword">new <span class="built_in">Object({</span></span></span><br><div class="line"><span class="attr">_count : <span class="number">0,</span></span><br><div class="line">　<span class="attr">m1 : <span class="function"><span class="keyword">function (<span class="params">){</span></span></span></span><br><div class="line">　　<span class="comment">//…</span><br><div class="line">　},<br><div class="line">　<span class="attr">m2 : <span class="function"><span class="keyword">function (<span class="params">){</span></span></span></span><br><div class="line">　　<span class="comment">//…</span><br><div class="line">　}<br><div class="line">});<br><br></div></div></div></div></div></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>上面的函数m1()和m2(），都封装在module1对象里。使用的时候，就是调用这个对象的属性</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><br></div></td><br><td class="code"><br><div class="line">module<span class="number">1.<span class="name">m1<span class="comment">();</span></span></span><br><br></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>这样的写法会暴露所有模块成员，内部状态可以被外部改写。比如，外部代码可以直接改变内部计数器的值。</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><br></div></td><br><td class="code"><br><div class="line">module._<span class="built_in">count = <span class="number">1<span class="comment">;</span></span></span><br><br></div></td><br><br></tr><br><br></tbody><br><br></table>

<h3 id="立即执行函数写法"><a href="#立即执行函数写法" class="headerlink" title="立即执行函数写法"></a>立即执行函数写法</h3><p>使用”立即执行函数”（Immediately-Invoked Function Expression，IIFE），可以达到不暴露私有成员的目的</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><div class="line">5<br><div class="line">6<br><div class="line">7<br><div class="line">8<br><div class="line">9<br><div class="line">10<br><div class="line">11<br><div class="line">12<br><div class="line">13<br><div class="line">14<br><br></div></div></div></div></div></div></div></div></div></div></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="keyword">var <span class="built_in">module = (<span class="function"><span class="keyword">function(<span class="params">) {</span></span></span></span></span><br><div class="line"><span class="keyword">var _count = <span class="number">0;</span></span><br><div class="line"><span class="keyword">var m1 = <span class="function"><span class="keyword">function(<span class="params">) {</span></span></span></span><br><div class="line">alert(_count)<br><div class="line">}<br><div class="line"><span class="keyword">var m2 = <span class="function"><span class="keyword">function(<span class="params">) {</span></span></span></span><br><div class="line">alert(_count + <span class="number">1)</span><br><div class="line">}<br><div class="line"><br><div class="line"><span class="keyword">return {</span><br><div class="line"><span class="attr">m1: m1,</span><br><div class="line"><span class="attr">m2: m2</span><br><div class="line">}<br><div class="line">})()<br><br></div></div></div></div></div></div></div></div></div></div></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>使用上面的写法，外部代码无法读取内部的_count变量。</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><br></div></td><br><td class="code"><br><div class="line">　　<span class="built_in">console.info(<span class="built_in">module._count); <span class="comment">//undefined</span></span></span><br><br></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>module就是Javascript模块的基本写法。</p>
<h2 id="主流模块规范"><a href="#主流模块规范" class="headerlink" title="主流模块规范"></a>主流模块规范</h2><p>在es6以前，还没有提出一套官方的规范,从社区和框架推广程度而言,目前通行的javascript模块规范有两种：CommonJS 和 AMD</p>
<h3 id="CommonJS规范"><a href="#CommonJS规范" class="headerlink" title="CommonJS规范"></a>CommonJS规范</h3><p><a href="http://pangguoming.com/blog/images/57843ad0-c872-48b3-98aa-c94c5568674a.jpg"><img src="http://pangguoming.com/blog/images/57843ad0-c872-48b3-98aa-c94c5568674a.jpg" alt=""></a></p>
<p>2009年，美国程序员Ryan Dahl创造了node.js项目，将javascript语言用于服务器端编程。</p>
<p>这标志”Javascript模块化编程”正式诞生。前端的复杂程度有限，没有模块也是可以的，但是在服务器端，一定要有模块，与操作系统和其他应用程序互动，否则根本没法编程。</p>
<p>node编程中最重要的思想之一就是模块，而正是这个思想，让JavaScript的大规模工程成为可能。模块化编程在js界流行，也是基于此，随后在浏览器端，requirejs和seajs之类的工具包也出现了，可以说在对应规范下，require统治了ES6之前的所有模块化编程，即使现在，在ES6 module被完全实现之前，还是这样。</p>
<p>在CommonJS中,暴露模块使用module.exports和exports，很多人不明白暴露对象为什么会有两个,后面会介绍区别</p>
<p>在CommonJS中，有一个全局性方法require()，用于加载模块。假定有一个数学模块math.js，就可以像下面这样加载。</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><br></div></td><br><td class="code"><br><div class="line"><span class="keyword">var math = <span class="built_in">require(<span class="string">‘math’);</span></span></span><br><br></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>然后，就可以调用模块提供的方法：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><br></div></div></td><br><td class="code"><br><div class="line">　<span class="keyword">var math = <span class="built_in">require(<span class="string">‘math’);</span></span></span><br><div class="line">　math.add(<span class="number">2,<span class="number">3); <span class="comment">// 5</span></span></span><br><br></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>正是由于CommonJS 使用的require方式的推动，才有了后面的AMD、CMD 也采用的require方式来引用模块的风格</p>
<h3 id="AMD规范"><a href="#AMD规范" class="headerlink" title="AMD规范"></a>AMD规范</h3><p><a href="http://pangguoming.com/blog/images/13ede77b-0ea2-45ed-a0eb-0624ace92def.jpg"><img src="http://pangguoming.com/blog/images/13ede77b-0ea2-45ed-a0eb-0624ace92def.jpg" alt=""></a></p>
<p>有了服务器端模块以后，很自然地，大家就想要客户端模块。而且最好两者能够兼容，一个模块不用修改，在服务器和浏览器都可以运行。</p>
<p>但是，由于一个重大的局限，使得CommonJS规范不适用于浏览器环境。还是上一节的代码，如果在浏览器中运行，会有一个很大的问题</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><br></div></div></td><br><td class="code"><br><div class="line">var <span class="built_in">math = <span class="built_in">require(<span class="string">‘math’);</span></span></span><br><div class="line"><span class="built_in">math.add(<span class="number">2, <span class="number">3);</span></span></span><br><br></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>第二行math.add(2, 3)，在第一行require(‘math’)之后运行，因此必须等math.js加载完成。也就是说，如果加载时间很长，整个应用就会停在那里等。</p>
<p>这对服务器端不是一个问题，因为所有的模块都存放在本地硬盘，可以同步加载完成，等待时间就是硬盘的读取时间。但是，对于浏览器，这却是一个大问题，因为模块都放在服务器端，等待时间取决于网速的快慢，可能要等很长时间，浏览器处于”假死”状态。<br>因此，浏览器端的模块，不能采用”同步加载”（synchronous），只能采用”异步加载”（asynchronous）。这就是AMD规范诞生的背景。</p>
<p>AMD是”Asynchronous Module Definition”的缩写，意思就是”异步模块定义”。它采用异步方式加载模块，模块的加载不影响它后面语句的运行。所有依赖这个模块的语句，都定义在一个回调函数中，等到加载完成之后，这个回调函数才会运行。</p>
<p>模块必须采用特定的define()函数来定义。</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><br></div></td><br><td class="code"><br><div class="line"><span class="keyword">define(<span class="section">id?, dependencies?, factory)</span></span><br><br></div></td><br><br></tr><br><br></tbody><br><br></table>

<ul>
<li>id:字符串，模块名称(可选)</li>
<li>dependencies: 是我们要载入的依赖模块(可选)，使用相对路径。,注意是数组格式</li>
<li>factory: 工厂方法，返回一个模块函数</li>
</ul>
<p>如果一个模块不依赖其他模块，那么可以直接定义在define()函数之中。</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><div class="line">5<br><div class="line">6<br><div class="line">7<br><div class="line">8<br><div class="line">9<br><br></div></div></div></div></div></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="comment">// math.js</span><br><div class="line">　　define(<span class="function"><span class="keyword">function (<span class="params">){</span></span></span><br><div class="line">　　　　<span class="keyword">var add = <span class="function"><span class="keyword">function (<span class="params">x,y){</span></span></span></span><br><div class="line">　　　　　　<span class="keyword">return x+y;</span><br><div class="line">　　　　};<br><div class="line">　　　　<span class="keyword">return {</span><br><div class="line">　　　　　　<span class="attr">add: add</span><br><div class="line">　　　　};<br><div class="line">　　});<br><br></div></div></div></div></div></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>如果这个模块还依赖其他模块，那么define()函数的第一个参数，必须是一个数组，指明该模块的依赖性。</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><div class="line">5<br><div class="line">6<br><div class="line">7<br><div class="line">8<br><br></div></div></div></div></div></div></div></div></td><br><td class="code"><br><div class="line">define([<span class="string">‘Lib’], <span class="function"><span class="keyword">function(<span class="params">Lib){</span></span></span></span><br><div class="line">　　　　<span class="function"><span class="keyword">function <span class="title">foo(<span class="params">){</span></span></span></span><br><div class="line">　　　　　　Lib.doSomething();<br><div class="line">　　　　}<br><div class="line">　　　　<span class="keyword">return {</span><br><div class="line">　　　　　　<span class="attr">foo : foo</span><br><div class="line">　　　　};<br><div class="line">　　});<br><br></div></div></div></div></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>当require()函数加载上面这个模块的时候，就会先加载Lib.js文件。</p>
<p>AMD也采用require()语句加载模块，但是不同于CommonJS，它要求两个参数：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><br></div></td><br><td class="code"><br><div class="line"><span class="keyword">require([<span class="class"><span class="keyword">module], <span class="title">callback);</span></span></span></span><br><br></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>第一个参数[module]，是一个数组，里面的成员就是要加载的模块；第二个参数callback，则是加载成功之后的回调函数。如果将前面的代码改写成AMD形式，就是下面这样：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><br></div></div></div></td><br><td class="code"><br><div class="line"><span class="built_in">require([<span class="string">‘math’], <span class="function"><span class="keyword">function <span class="params">(math) {</span></span></span></span></span><br><div class="line">　<span class="built_in">math.add(<span class="number">2, <span class="number">3);</span></span></span><br><div class="line">});<br><br></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>math.add()与math模块加载不是同步的，浏览器不会发生假死。所以很显然，AMD比较适合浏览器环境。</p>
<p>目前，主要有两个Javascript库实现了AMD规范：<a href="http://requirejs.org/" target="_blank" rel="noopener">require.js</a>和<a href="http://cujojs.com/" target="_blank" rel="noopener">curl.js</a>。</p>
<h3 id="CMD规范"><a href="#CMD规范" class="headerlink" title="CMD规范"></a>CMD规范</h3><p><a href="http://pangguoming.com/blog/images/e4bea41b-fe2e-42b1-8a24-53d74db57314.jpg"><img src="http://pangguoming.com/blog/images/e4bea41b-fe2e-42b1-8a24-53d74db57314.jpg" alt=""></a></p>
<p>CMD (Common Module Definition), 是seajs推崇的规范，CMD则是依赖就近，用的时候再require。它写起来是这样的：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><br></div></div></div></div></td><br><td class="code"><br><div class="line">define(<span class="name">function(<span class="name">require, exports, module) {</span></span><br><div class="line">var clock = require(‘clock’)<span class="comment">;</span><br><div class="line">clock.start()<span class="comment">;</span><br><div class="line">})<span class="comment">;</span><br><br></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>CMD与AMD一样，也是采用特定的define()函数来定义,用require方式来引用模块</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><br></div></td><br><td class="code"><br><div class="line"><span class="keyword">define(<span class="section">id?, dependencies?, factory)</span></span><br><br></div></td><br><br></tr><br><br></tbody><br><br></table>

<ul>
<li>id:字符串，模块名称(可选)</li>
<li>dependencies: 是我们要载入的依赖模块(可选)，使用相对路径。,注意是数组格式</li>
<li>factory: 工厂方法，返回一个模块函数<br><table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><div class="line">5</div></div></div></div></div></td></tr></tbody></table></li>
</ul>
<p></p>
<td class="code"><br><div class="line">define(<span class="string">‘hello’, [<span class="string">‘jquery’], <span class="function"><span class="keyword">function<span class="params">(<span class="keyword">require, exports, <span class="keyword">module) <span class="comment">{</span></span></span></span></span></span></span></span><br><div class="line"><br><div class="line">// 模块代码<br><div class="line"><br><div class="line">});<br><br></div></div></div></div></div></td>

<p></p>
<p></p>
<p></p>
<p>如果一个模块不依赖其他模块，那么可以直接定义在define()函数之中。</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><br></div></div></div></td><br><td class="code"><br><div class="line">define(<span class="function"><span class="keyword">function<span class="params">(<span class="keyword">require, exports, <span class="keyword">module) <span class="comment">{</span></span></span></span></span></span><br><div class="line">// 模块代码<br><div class="line">});<br><br></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<blockquote>
<p>注意：带 id 和 dependencies 参数的 define 用法不属于 CMD 规范，而属于 Modules/Transport 规范。</p>
</blockquote>
<h2 id="CMD与AMD区别"><a href="#CMD与AMD区别" class="headerlink" title="CMD与AMD区别"></a>CMD与AMD区别</h2><p>AMD和CMD最大的区别是对依赖模块的执行时机处理不同，而不是加载的时机或者方式不同，二者皆为异步加载模块。</p>
<p>AMD依赖前置，js可以方便知道依赖模块是谁，立即加载；</p>
<p>而CMD就近依赖，需要使用把模块变为字符串解析一遍才知道依赖了那些模块，这也是很多人诟病CMD的一点，牺牲性能来带来开发的便利性，实际上解析模块用的时间短到可以忽略。</p>
<h2 id="现阶段的标准"><a href="#现阶段的标准" class="headerlink" title="现阶段的标准"></a>现阶段的标准</h2><p><a href="http://pangguoming.com/blog/images/cf975d03-72be-4780-92ef-99de6675e2b7.jpg"><img src="http://pangguoming.com/blog/images/cf975d03-72be-4780-92ef-99de6675e2b7.jpg" alt=""></a></p>
<p>ES6标准发布后，module成为标准，标准使用是以export指令导出接口，以import引入模块，但是在我们一贯的node模块中，我们依然采用的是CommonJS规范，使用require引入模块，使用module.exports导出接口。</p>
<h2 id="export导出模块"><a href="#export导出模块" class="headerlink" title="export导出模块"></a>export导出模块</h2><p>export语法声明用于导出函数、对象、指定文件（或模块）的原始值。</p>
<blockquote>
<p>注意：在node中使用的是exports,不要混淆了</p>
</blockquote>
<p>export有两种模块导出方式：<strong>命名式导出（名称导出）</strong>和<strong>默认导出（定义式导出）</strong>，命名式导出每个模块可以多个，而默认导出每个模块仅一个。</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><div class="line">5<br><div class="line">6<br><div class="line">7<br><div class="line">8<br><div class="line">9<br><div class="line">10<br><div class="line">11<br><div class="line">12<br><div class="line">13<br><br></div></div></div></div></div></div></div></div></div></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="keyword">export { name1, name2, …, nameN };</span><br><div class="line"><span class="keyword">export { variable1 <span class="keyword">as name1, variable2 <span class="keyword">as name2, …, nameN };</span></span></span><br><div class="line"><span class="keyword">export <span class="keyword">let name1, name2, …, nameN; <span class="comment">// also var</span></span></span><br><div class="line"><span class="keyword">export <span class="keyword">let name1 = …, name2 = …, …, nameN; <span class="comment">// also var, const</span></span></span><br><div class="line"><br><div class="line"><span class="keyword">export <span class="keyword">default expression;</span></span><br><div class="line"><span class="keyword">export <span class="keyword">default <span class="function"><span class="keyword">function (<span class="params">…) { … } <span class="comment">// also class, function<em></em></span></span></span></span></span></span><br><div class="line"><span class="keyword">export <span class="keyword">default <span class="function"><span class="keyword">function <span class="title">name1(<span class="params">…) { … } <span class="comment">// also class, function</span></span></span></span></span></span></span><br><div class="line"><span class="keyword">export { name1 <span class="keyword">as <span class="keyword">default, … };</span></span></span><br><div class="line"><br><div class="line"><span class="keyword">export * <span class="keyword">from …;</span></span><br><div class="line"><span class="keyword">export { name1, name2, …, nameN } <span class="keyword">from …;</span></span><br><div class="line"><span class="keyword">export { import1 <span class="keyword">as name1, import2 <span class="keyword">as name2, …, nameN } <span class="keyword">from …;</span></span></span></span><br><br></div></div></div></div></div></div></div></div></div></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<ul>
<li>name1… nameN－导出的“标识符”。导出后，可以通过这个“标识符”在另一个模块中使用import引用</li>
<li>default－设置模块的默认导出。设置后import不通过“标识符”而直接引用默认导入</li>
<li>－继承模块并导出继承模块所有的方法和属性</li>
<li>as－重命名导出“标识符”</li>
<li>from－从已经存在的模块、脚本文件…导出</li>
</ul>
<h3 id="命名式导出"><a href="#命名式导出" class="headerlink" title="命名式导出"></a>命名式导出</h3><p>模块可以通过export前缀关键词声明导出对象，导出对象可以是多个。这些导出对象用名称进行区分，称之为命名式导出。</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><br></div></div></td><br><td class="code"><br><div class="line"><span class="keyword">export { myFunction }; <span class="comment">// 导出一个已定义的函数</span></span><br><div class="line"><span class="keyword">export <span class="keyword">const foo = <span class="built_in">Math.sqrt(<span class="number">2); <span class="comment">// 导出一个常量</span></span></span></span></span><br><br></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>我们可以使用*和from关键字来实现的模块的继承：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><br></div></td><br><td class="code"><br><div class="line"><span class="keyword">export * <span class="keyword">from <span class="string">‘article’;</span></span></span><br><br></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>模块导出时，可以指定模块的导出成员。导出成员可以认为是类中的公有对象，而非导出成员可以认为是类中的私有对象：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><div class="line">5<br><br></div></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="keyword">var <span class="keyword">name = <span class="string">‘IT笔录’;</span></span></span><br><div class="line"><span class="keyword">var domain = <span class="string">‘<a href="http://itbilu.com&#39;" target="_blank" rel="noopener">http://itbilu.com&#39;</a>;</span></span><br><div class="line"><br><div class="line"><span class="keyword">export <span class="comment">{name, domain}; <span class="comment">// 相当于导出</span></span></span><br><div class="line"><span class="comment">{name:name,domain:domain}</span><br><br></div></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>模块导出时，我们可以使用as关键字对导出成员进行重命名：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><br></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="keyword">var name = <span class="string">‘IT笔录’;</span></span><br><div class="line"><span class="keyword">var domain = <span class="string">‘<a href="http://itbilu.com&#39;" target="_blank" rel="noopener">http://itbilu.com&#39;</a>;</span></span><br><div class="line"><br><div class="line"><span class="keyword">export {name <span class="keyword">as siteName, domain};</span></span><br><br></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>注意，下面的语法有严重错误的情况：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><div class="line">5<br><br></div></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="comment">// 错误演示</span><br><div class="line"><span class="keyword">export <span class="number">1; <span class="comment">// 绝对不可以</span></span></span><br><div class="line"><br><div class="line"><span class="keyword">var a = <span class="number">100;</span></span><br><div class="line"><span class="keyword">export a;</span><br><br></div></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>export在导出接口的时候，必须与模块内部的变量具有一一对应的关系。直接导出1没有任何意义，也不可能在import的时候有一个变量与之对应</p>
<p><code>export a</code>虽然看上去成立，但是a的值是一个数字，根本无法完成解构，因此必须写成<code>export {a}</code>的形式。<strong>即使a被赋值为一个function，也是不允许的</strong>。而且，大部分风格都建议，模块中最好在末尾用一个export导出所有的接口，例如：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><br></div></td><br><td class="code"><br><div class="line">export {<span class="function"><span class="keyword">fun <span class="keyword">as <span class="keyword">default,a,b,c};</span></span></span></span><br><br></div></td><br><br></tr><br><br></tbody><br><br></table>

<h3 id="默认导出"><a href="#默认导出" class="headerlink" title="默认导出"></a>默认导出</h3><p>默认导出也被称做定义式导出。命名式导出可以导出多个值，但在在import引用时，也要使用相同的名称来引用相应的值。而默认导出每个导出只有一个单一值，这个输出可以是一个函数、类或其它类型的值，这样在模块import导入时也会很容易引用。</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><br></div></div></td><br><td class="code"><br><div class="line"><span class="keyword">export <span class="keyword">default <span class="function"><span class="keyword">function(<span class="params">) {}; <span class="comment">// 可以导出一个函数</span></span></span></span></span></span><br><div class="line"><span class="keyword">export <span class="keyword">default <span class="class"><span class="keyword">class(){}; <span class="comment">// 也可以出一个类</span></span></span></span></span><br><br></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<h3 id="命名式导出与默认导出"><a href="#命名式导出与默认导出" class="headerlink" title="命名式导出与默认导出"></a>命名式导出与默认导出</h3><p>默认导出可以理解为另一种形式的命名导出，默认导出可以认为是使用了default名称的命名导出。</p>
<p>下面两种导出方式是等价的：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><br></div></div></div></div></td><br><td class="code"><br><div class="line">const D = 123;<br><div class="line"><br><div class="line"><span class="builtin-name">export<span class="built_in"> default D;</span></span><br><div class="line"><span class="builtin-name">export { D as<span class="built_in"> default };</span></span><br><br></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<h3 id="export使用示例"><a href="#export使用示例" class="headerlink" title="export使用示例"></a>export使用示例</h3><p>使用名称导出一个模块时：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><div class="line">5<br><div class="line">6<br><br></div></div></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="comment">// “my-module.js” 模块</span><br><div class="line"><span class="keyword">export <span class="function"><span class="keyword">function <span class="title">cube(<span class="params">x) {</span></span></span></span></span><br><div class="line"><span class="keyword">return x <em> x </em> x;</span><br><div class="line">}<br><div class="line"><span class="keyword">const foo = <span class="built_in">Math.PI + <span class="built_in">Math.SQRT2;</span></span></span><br><div class="line"><span class="keyword">export { foo };</span><br><br></div></div></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>在另一个模块（脚本文件）中，我们可以像下面这样引用：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><br></div></div></div></td><br><td class="code"><br><div class="line"><span class="keyword">import { cube, foo } <span class="keyword">from <span class="string">‘my-module’;</span></span></span><br><div class="line"><span class="built_in">console.log(cube(<span class="number">3)); <span class="comment">// 27</span></span></span><br><div class="line"><span class="built_in">console.log(foo); <span class="comment">// 4.555806215962888</span></span><br><br></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>使用默认导出一个模块时：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><br></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="comment">// “my-module.js”模块</span><br><div class="line"><span class="keyword">export <span class="keyword">default <span class="function"><span class="keyword">function (<span class="params">x) {</span></span></span></span></span><br><div class="line"><span class="keyword">return x <em> x </em> x;</span><br><div class="line">}<br><br></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>在另一个模块（脚本文件）中，我们可以像下面这样引用，相对名称导出来说使用更为简单：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><br></div></div></div></td><br><td class="code"><br><div class="line"><span class="comment">// 引用 “my-module.js”模块</span><br><div class="line"><span class="keyword">import cube <span class="keyword">from <span class="string">‘my-module’;</span></span></span><br><div class="line"><span class="built_in">console.log(cube(<span class="number">3)); <span class="comment">// 27</span></span></span><br><br></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<h2 id="import引入模块"><a href="#import引入模块" class="headerlink" title="import引入模块"></a>import引入模块</h2><p>import语法声明用于从已导出的模块、脚本中导入函数、对象、指定文件（或模块）的原始值。</p>
<p>import模块导入与export模块导出功能相对应，也存在两种模块导入方式：命名式导入（名称导入）和默认导入（定义式导入）。</p>
<blockquote>
<p>import的语法跟require不同，而且import必须放在文件的最开始，且前面不允许有其他逻辑代码，这和其他所有编程语言风格一致。</p>
</blockquote>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><div class="line">5<br><div class="line">6<br><div class="line">7<br><div class="line">8<br><div class="line">9<br><br></div></div></div></div></div></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="keyword">import defaultMember from <span class="string">“module-name”;</span></span><br><div class="line"><span class="keyword">import <em> <span class="keyword">as <span class="keyword">name from <span class="string">“module-name”;</span></span></span></em></span><br><div class="line"><span class="keyword">import { member } from <span class="string">“module-name”;</span></span><br><div class="line"><span class="keyword">import { member <span class="keyword">as alias } from <span class="string">“module-name”;</span></span></span><br><div class="line"><span class="keyword">import { member1 , member2 } from <span class="string">“module-name”;</span></span><br><div class="line"><span class="keyword">import { member1 , member2 <span class="keyword">as alias2 , […] } from <span class="string">“module-name”;</span></span></span><br><div class="line"><span class="keyword">import defaultMember, { member [ , […] ] } from <span class="string">“module-name”;</span></span><br><div class="line"><span class="keyword">import defaultMember,  <span class="keyword">as <span class="keyword">name from <span class="string">“module-name”;</span></span></span></span><br><div class="line"><span class="keyword">import <span class="string">“module-name”;</span></span><br><br></div></div></div></div></div></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<ul>
<li>name－从将要导入模块中收到的导出值的名称</li>
<li>member, memberN－从导出模块，导入指定名称的多个成员</li>
<li>defaultMember－从导出模块，导入默认导出成员</li>
<li>alias, aliasN－别名，对指定导入成员进行的重命名</li>
<li>module-name－要导入的模块。是一个文件名</li>
<li>as－重命名导入成员名称（“标识符”）</li>
<li>from－从已经存在的模块、脚本文件等导入</li>
</ul>
<h3 id="命名式导入"><a href="#命名式导入" class="headerlink" title="命名式导入"></a>命名式导入</h3><p>我们可以通过指定名称，就是将这些成员插入到当作用域中。导出时，可以导入单个成员或多个成员：</p>
<p><strong>注意，花括号里面的变量与export后面的变量一一对应</strong></p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><br></div></div></td><br><td class="code"><br><div class="line"><span class="keyword">import {myMember} <span class="keyword">from <span class="string">“my-module”;</span></span></span><br><div class="line"><span class="keyword">import {foo, bar} <span class="keyword">from <span class="string">“my-module”;</span></span></span><br><br></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>通过*符号，我们可以导入模块中的全部属性和方法。当导入模块全部导出内容时，就是将导出模块（’my-module.js’）所有的导出绑定内容，插入到当前模块（’myModule’）的作用域中：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><br></div></td><br><td class="code"><br><div class="line"><span class="keyword">import * <span class="keyword">as myModule <span class="keyword">from <span class="string">“my-module”;</span></span></span></span><br><br></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>导入模块对象时，也可以使用as对导入成员重命名，以方便在当前模块内使用：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><br></div></td><br><td class="code"><br><div class="line"><span class="keyword">import {reallyReallyLongModuleMemberName <span class="keyword">as shortName} <span class="keyword">from <span class="string">“my-module”;</span></span></span></span><br><br></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>导入多个成员时，同样可以使用别名：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><br></div></td><br><td class="code"><br><div class="line"><span class="keyword">import {reallyReallyLongModuleMemberName <span class="keyword">as shortName, anotherLongModuleName <span class="keyword">as short} <span class="keyword">from <span class="string">“my-module”;</span></span></span></span></span><br><br></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>导入一个模块，但不进行任何绑定：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><br></div></td><br><td class="code"><br><div class="line"><span class="keyword">import <span class="string">“my-module”;</span></span><br><br></div></td><br><br></tr><br><br></tbody><br><br></table>

<h3 id="默认导入"><a href="#默认导入" class="headerlink" title="默认导入"></a>默认导入</h3><p>在模块导出时，可能会存在默认导出。同样的，在导入时可以使用import指令导出这些默认值。</p>
<p>直接导入默认值：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><br></div></td><br><td class="code"><br><div class="line"><span class="keyword">import myDefault <span class="keyword">from <span class="string">“my-module”;</span></span></span><br><br></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>也可以在命名空间导入和名称导入中，同时使用默认导入：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><br></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="keyword">import myDefault, * <span class="keyword">as myModule <span class="keyword">from <span class="string">“my-module”; <span class="comment">// myModule 做为命名空间使用</span></span></span></span></span><br><div class="line">或<br><div class="line"><br><div class="line"><span class="keyword">import myDefault, {foo, bar} <span class="keyword">from <span class="string">“my-module”; <span class="comment">// 指定成员导入</span></span></span></span><br><br></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<h3 id="import使用示例"><a href="#import使用示例" class="headerlink" title="import使用示例"></a>import使用示例</h3><table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><div class="line">5<br><div class="line">6<br><div class="line">7<br><div class="line">8<br><div class="line">9<br><div class="line">10<br><div class="line">11<br><div class="line">12<br><div class="line">13<br><div class="line">14<br><div class="line">15<br><div class="line">16<br><div class="line">17<br><div class="line">18<br><div class="line">19<br><br></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="comment">// –file.js–</span><br><div class="line"><span class="function"><span class="keyword">function <span class="title">getJSON(<span class="params">url, callback) {</span></span></span></span><br><div class="line"><span class="keyword">let xhr = <span class="keyword">new XMLHttpRequest();</span></span><br><div class="line">xhr.onload = <span class="function"><span class="keyword">function (<span class="params">) {</span></span></span><br><div class="line">callback(<span class="keyword">this.responseText)</span><br><div class="line">};<br><div class="line">xhr.open(<span class="string">“GET”, url, <span class="literal">true);</span></span><br><div class="line">xhr.send();<br><div class="line">}<br><div class="line"><br><div class="line"><span class="keyword">export <span class="function"><span class="keyword">function <span class="title">getUsefulContents(<span class="params">url, callback) {</span></span></span></span></span><br><div class="line">getJSON(url, <span class="function"><span class="params">data =&gt; callback(<span class="built_in">JSON.parse(data)));</span></span></span><br><div class="line">}<br><div class="line"><br><div class="line"><span class="comment">// –main.js–</span><br><div class="line"><span class="keyword">import { getUsefulContents } <span class="keyword">from <span class="string">“file”;</span></span></span><br><div class="line">getUsefulContents(<span class="string">“<a href="http://itbilu.com&quot;" target="_blank" rel="noopener">http://itbilu.com&quot;</a>, <span class="function"><span class="params">data =&gt; {</span></span></span><br><div class="line">doSomethingUseful(data);<br><div class="line">});<br><br></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<h2 id="default关键字"><a href="#default关键字" class="headerlink" title="default关键字"></a>default关键字</h2><table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><div class="line">5<br><div class="line">6<br><br></div></div></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="comment">// d.js</span><br><div class="line"><span class="keyword">export <span class="keyword">default <span class="function"><span class="keyword">function(<span class="params">) {}</span></span></span></span></span><br><div class="line"><br><div class="line"><span class="comment">// 等效于：</span><br><div class="line"><span class="function"><span class="keyword">function <span class="title">a(<span class="params">) {};</span></span></span></span><br><div class="line"><span class="keyword">export {a <span class="keyword">as <span class="keyword">default};</span></span></span><br><br></div></div></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>在import的时候，可以这样用：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><br></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="keyword">import a <span class="keyword">from <span class="string">‘./d’;</span></span></span><br><div class="line"><br><div class="line"><span class="comment">// 等效于，或者说就是下面这种写法的简写，是同一个意思</span><br><div class="line"><span class="keyword">import {<span class="keyword">default <span class="keyword">as a} <span class="keyword">from <span class="string">‘./d’;</span></span></span></span></span><br><br></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>这个语法糖的好处就是import的时候，可以省去花括号{}。</p>
<p>简单的说，如果import的时候，你发现某个变量没有花括号括起来（没有*号），那么你在脑海中应该把它还原成有花括号的as语法。</p>
<p>所以，下面这种写法你也应该理解了吧：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><br></div></td><br><td class="code"><br><div class="line"><span class="keyword">import $,{<span class="keyword">each,map} <span class="keyword">from <span class="string">‘jquery’;</span></span></span></span><br><br></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>import后面第一个$是{defalut as $}的替代写法。</p>
<h2 id="as关键字"><a href="#as关键字" class="headerlink" title="as关键字"></a>as关键字</h2><p>as简单的说就是取一个别名,export中可以用，import中其实可以用：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><div class="line">5<br><div class="line">6<br><div class="line">7<br><br></div></div></div></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="comment">// a.js</span><br><div class="line"><span class="keyword">var a = function() {};</span><br><div class="line">export {a <span class="keyword">as <span class="function"><span class="keyword">fun};</span></span></span><br><div class="line"><br><div class="line"><span class="comment">// b.js</span><br><div class="line"><span class="keyword">import {<span class="function"><span class="keyword">fun <span class="keyword">as a} from ‘./a’;</span></span></span></span><br><div class="line">a();<br><br></div></div></div></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>上面这段代码，export的时候，对外提供的接口是fun，它是a.js内部a这个函数的别名，但是在模块外面，认不到a，只能认到fun。</p>
<p>import中的as就很简单，就是你在使用模块里面的方法的时候，给这个方法取一个别名，好在当前的文件里面使用。之所以是这样，是因为有的时候不同的两个模块可能通过相同的接口，比如有一个c.js也通过了fun这个接口：</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><br></div></div></td><br><td class="code"><br><div class="line"><span class="comment">// c.js</span><br><div class="line">export function <span class="function"><span class="title">fun<span class="params">() {};</span></span></span><br><br></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p>如果在b.js中同时使用a和c这两个模块，就必须想办法解决接口重名的问题，as就解决了。</p>
<h2 id="CommonJS中module-exports-与-exports的区别"><a href="#CommonJS中module-exports-与-exports的区别" class="headerlink" title="CommonJS中module.exports 与 exports的区别"></a>CommonJS中module.exports 与 exports的区别</h2><p><strong>Module.exports</strong></p>
<blockquote>
<p>The module.exports object is created by the Module system. Sometimes this is not acceptable; many want their module to be an instance of some class. To do this, assign the desired export object to module.exports. Note that assigning the desired object to exports will simply rebind the local exports variable, which is probably not what you want to do.</p>
<p>译文：module.exports对象是由模块系统创建的。 有时这是难以接受的；许多人希望他们的模块成为某个类的实例。 为了实现这个，需要将期望导出的对象赋值给module.exports。 注意，将期望的对象赋值给exports会简单地重新绑定到本地exports变量上，这可能不是你想要的。</p>
</blockquote>
<p><strong>Module.exports</strong></p>
<blockquote>
<p>The exports variable is available within a module’s file-level scope, and is assigned the value of module.exports before the module is evaluated. It allows a shortcut, so that module.exports.f = … can be written more succinctly as exports.f = …. However, be aware that like any variable, if a new value is assigned to exports, it is no longer bound to module.exports:</p>
<p>译文：exports变量是在模块的文件级别作用域内有效的，它在模块被执行前被赋于 module.exports 的值。它有一个快捷方式，以便 module.exports.f = … 可以被更简洁地写成exports.f = …。 注意，就像任何变量，如果一个新的值被赋值给exports，它就不再绑定到module.exports(其实是exports.属性会自动挂载到没有命名冲突的module.exports.属性)</p>
</blockquote>
<p>从<a href="http://nodejs.cn/api/modules.html#modules_module_exports" target="_blank" rel="noopener">Api文档</a>上面的可以看出，从require导入方式去理解，关键有两个变量(全局变量module.exports，局部变量exports)、一个返回值(module.exports)</p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><div class="line">5<br><div class="line">6<br><div class="line">7<br><div class="line">8<br><div class="line">9<br><div class="line">10<br><div class="line">11<br><div class="line">12<br><div class="line">13<br><div class="line">14<br><div class="line">15<br><div class="line">16<br><br></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="function"><span class="keyword">function <span class="title">require(<span class="params">…) {</span></span></span></span><br><div class="line"><span class="keyword">var <span class="keyword">module = { exports: {} };</span></span><br><div class="line"><span class="function">(<span class="params">(<span class="params"><span class="built_in">module, exports) =&gt; {</span></span></span></span><br><div class="line"><span class="comment">// 你的被引入代码 Start</span><br><div class="line"><span class="comment">// var exports = module.exports = {}; (默认都有的)</span><br><div class="line"><span class="keyword">function some_func(<span class="params">) {};</span></span><br><div class="line">exports = some_func;<br><div class="line"><span class="comment">// 此时，exports不再挂载到module.exports，</span><br><div class="line"><span class="comment">// export将导出{}默认对象</span><br><div class="line"><span class="built_in">module.exports = some_func;</span><br><div class="line"><span class="comment">// 此时，这个模块将导出some_func对象，覆盖exports上的some_func</span><br><div class="line"><span class="comment">// 你的被引入代码 End</span><br><div class="line">})(<span class="params"><span class="built_in">module, <span class="built_in">module.exports);</span></span></span><br><div class="line">// 不管是<span class="params">exports还是<span class="params">module.<span class="params">exports，最后返回的还是<span class="params">module.<span class="params">exports</span></span></span></span></span><br><div class="line"><span class="params">return <span class="params">module.<span class="params">exports;</span></span></span><br><div class="line">}<br><br></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>demo.js:</strong></p>
<table><br><tbody><br><tr><br><td class="gutter"><br><div class="line">1<br><div class="line">2<br><div class="line">3<br><div class="line">4<br><div class="line">5<br><div class="line">6<br><div class="line">7<br><div class="line">8<br><div class="line">9<br><div class="line">10<br><div class="line">11<br><div class="line">12<br><div class="line">13<br><div class="line">14<br><div class="line">15<br><div class="line">16<br><div class="line">17<br><div class="line">18<br><div class="line">19<br><br></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></td><br><td class="code"><br><div class="line"><span class="built_in">console.log(exports); <span class="comment">// {}</span></span><br><div class="line"><span class="built_in">console.log(<span class="built_in">module.exports); <span class="comment">// {}</span></span></span><br><div class="line"><span class="built_in">console.log(exports === <span class="built_in">module.exports); <span class="comment">// true</span></span></span><br><div class="line"><span class="built_in">console.log(exports == <span class="built_in">module.exports); <span class="comment">// true</span></span></span><br><div class="line"><span class="built_in">console.log(<span class="keyword">module);</span></span><br><div class="line">/*<em><br><div class="line">Module {<br><div class="line">id: <span class="string">‘.’,</span><br><div class="line">exports: {},<br><div class="line">parent: <span class="literal">null,</span><br><div class="line">filename: <span class="string">‘/Users/larben/Desktop/demo.js’,</span><br><div class="line">loaded: <span class="literal">false,</span><br><div class="line">children: [],<br><div class="line">paths:<br><div class="line">[ <span class="string">‘/Users/larben/Desktop/node_modules’,</span><br><div class="line"><span class="string">‘/Users/larben/node_modules’,</span><br><div class="line"><span class="string">‘/Users/node_modules’,</span><br><div class="line"><span class="string">‘/node_modules’ ] }</span><br><div class="line"></div></div></div></div></div></div></div></div></div></div></div></div></div></em><span class="regexp">/</span><br><br></div></div></div></div></div></div></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>注意</strong></p>
<ol>
<li><ol>
<li><ol>
<li>每个js文件一创建，都有一个var exports = module.exports = {},使exports和module.exports都指向一个空对象。</li>
</ol>
</li>
<li>module.exports和exports所指向的内存地址相同</li>
</ol>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/136f7745.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/136f7745.html" itemprop="url">分布式系统唯一ID生成方案汇总</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-19T11:14:00+08:00">
                2017-12-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>系统唯一ID是我们在设计一个系统的时候常常会遇见的问题，也常常为这个问题而纠结。生成ID的方法有很多，适应不同的场景、需求以及性能要求。所以有些比较复杂的系统会有多个ID生成的策略。下面就介绍一些常见的ID生成策略。</p>
<p><strong>1. 数据库自增长序列或字段</strong></p>
<p>最常见的方式。利用数据库，全数据库唯一。</p>
<p>优点：</p>
<p>1）简单，代码方便，性能可以接受。</p>
<p>2）数字ID天然排序，对分页或者需要排序的结果很有帮助。</p>
<p>缺点：</p>
<p>1）不同数据库语法和实现不同，数据库迁移的时候或多数据库版本支持的时候需要处理。</p>
<p>2）在单个数据库或读写分离或一主多从的情况下，只有一个主库可以生成。有单点故障的风险。</p>
<p>3）在性能达不到要求的情况下，比较难于扩展。</p>
<p>4）如果遇见多个系统需要合并或者涉及到数据迁移会相当痛苦。</p>
<p>5）分表分库的时候会有麻烦。</p>
<p>优化方案：</p>
<p>1）针对主库单点，如果有多个Master库，则每个Master库设置的起始数字不一样，步长一样，可以是Master的个数。比如：Master1 生成的是 1，4，7，10，Master2生成的是2,5,8,11 Master3生成的是 3,6,9,12。这样就可以有效生成集群中的唯一ID，也可以大大降低ID生成数据库操作的负载。</p>
<p><strong>2. UUID</strong></p>
<p>常见的方式。可以利用数据库也可以利用程序生成，一般来说全球唯一。</p>
<p>优点：</p>
<p>1）简单，代码方便。</p>
<p>2）生成ID性能非常好，基本不会有性能问题。</p>
<p>3）全球唯一，在遇见数据迁移，系统数据合并，或者数据库变更等情况下，可以从容应对。</p>
<p>缺点：</p>
<p>1）没有排序，无法保证趋势递增。</p>
<p>2）UUID往往是使用字符串存储，查询的效率比较低。</p>
<p>3）存储空间比较大，如果是海量数据库，就需要考虑存储量的问题。</p>
<p>4）传输数据量大</p>
<p>5）不可读。</p>
<p><strong>3. UUID的变种</strong></p>
<p>1）为了解决UUID不可读，可以使用UUID to Int64的方法。及</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/// &lt;summary&gt;</span><br><span class="line">/// 根据GUID获取唯一数字序列</span><br><span class="line">/// &lt;/summary&gt;</span><br><span class="line">public static long GuidToInt64()</span><br><span class="line">&#123;</span><br><span class="line">    byte[] bytes = Guid.NewGuid().ToByteArray();</span><br><span class="line">    return BitConverter.ToInt64(bytes, 0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div><br><div id="highlighter_490677" class="syntaxhighlighter  csharp"><br><table border="0" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td class="gutter"><br><div class="line number1 index0 alt2">1<br></div></td><br><td class="code"><br><div class="container"><br><div class="line number1 index0 alt2"><code class="csharp spaces"> </code><br><br></div></div></td><br></tr><br></tbody><br></table><br><br>2）为了解决UUID无序的问题，NHibernate在其主键生成方式中提供了Comb算法（combined guid/timestamp）。保留GUID的10个字节，用另6个字节表示GUID生成的时间（DateTime）。<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">/// &lt;summary&gt; </span><br><span class="line">/// Generate a new &lt;see cref=&quot;Guid&quot;/&gt; using the comb algorithm. </span><br><span class="line">/// &lt;/summary&gt; </span><br><span class="line">private Guid GenerateComb()</span><br><span class="line">&#123;</span><br><span class="line">    byte[] guidArray = Guid.NewGuid().ToByteArray();</span><br><span class="line"></span><br><span class="line">    DateTime baseDate = new DateTime(1900, 1, 1);</span><br><span class="line">    DateTime now = DateTime.Now;</span><br><span class="line"></span><br><span class="line">    // Get the days and milliseconds which will be used to build    </span><br><span class="line">    //the byte string    </span><br><span class="line">    TimeSpan days = new TimeSpan(now.Ticks - baseDate.Ticks);</span><br><span class="line">    TimeSpan msecs = now.TimeOfDay;</span><br><span class="line"></span><br><span class="line">    // Convert to a byte array        </span><br><span class="line">    // Note that SQL Server is accurate to 1/300th of a    </span><br><span class="line">    // millisecond so we divide by 3.333333    </span><br><span class="line">    byte[] daysArray = BitConverter.GetBytes(days.Days);</span><br><span class="line">    byte[] msecsArray = BitConverter.GetBytes((long)</span><br><span class="line">      (msecs.TotalMilliseconds / 3.333333));</span><br><span class="line"></span><br><span class="line">    // Reverse the bytes to match SQL Servers ordering    </span><br><span class="line">    Array.Reverse(daysArray);</span><br><span class="line">    Array.Reverse(msecsArray);</span><br><span class="line"></span><br><span class="line">    // Copy the bytes into the guid    </span><br><span class="line">    Array.Copy(daysArray, daysArray.Length - 2, guidArray,</span><br><span class="line">      guidArray.Length - 6, 2);</span><br><span class="line">    Array.Copy(msecsArray, msecsArray.Length - 4, guidArray,</span><br><span class="line">      guidArray.Length - 4, 4);</span><br><span class="line"></span><br><span class="line">    return new Guid(guidArray);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">用上面的算法测试一下，得到如下的结果：作为比较，前面3个是使用COMB算法得出的结果，最后12个字符串是时间序（统一毫秒生成的3个UUID），过段时间如果再次生成，则12个字符串会比图示的要大。后面3个是直接生成的GUID。</span><br><span class="line"></span><br><span class="line">[![ODX&#125;_`4N5X$F93OAS~`8Z)C](https://images2015.cnblogs.com/blog/15700/201602/15700-20160227213048721-177386520.png &quot;ODX&#125;_`4N5X$F93OAS~`8Z)C&quot;)](http://images2015.cnblogs.com/blog/15700/201602/15700-20160227213048174-1443183768.png)</span><br><span class="line"></span><br><span class="line">如果想把时间序放在前面，可以生成后改变12个字符串的位置，也可以修改算法类的最后两个Array.Copy。</span><br><span class="line"></span><br><span class="line">**4. Redis生成ID**</span><br><span class="line"></span><br><span class="line">当使用数据库来生成ID性能不够要求的时候，我们可以尝试使用Redis来生成ID。这主要依赖于Redis是单线程的，所以也可以用生成全局唯一的ID。可以用Redis的原子操作 INCR和INCRBY来实现。</span><br><span class="line"></span><br><span class="line">可以使用Redis集群来获取更高的吞吐量。假如一个集群中有5台Redis。可以初始化每台Redis的值分别是1,2,3,4,5，然后步长都是5。各个Redis生成的ID为：</span><br><span class="line"></span><br><span class="line">A：1,6,11,16,21</span><br><span class="line"></span><br><span class="line">B：2,7,12,17,22</span><br><span class="line"></span><br><span class="line">C：3,8,13,18,23</span><br><span class="line"></span><br><span class="line">D：4,9,14,19,24</span><br><span class="line"></span><br><span class="line">E：5,10,15,20,25</span><br><span class="line"></span><br><span class="line">这个，随便负载到哪个机确定好，未来很难做修改。但是3-5台服务器基本能够满足器上，都可以获得不同的ID。但是步长和初始值一定需要事先需要了。使用Redis集群也可以方式单点故障的问题。</span><br><span class="line"></span><br><span class="line">另外，比较适合使用Redis来生成每天从0开始的流水号。比如订单号=日期+当日自增长号。可以每天在Redis中生成一个Key，使用INCR进行累加。</span><br><span class="line"></span><br><span class="line">优点：</span><br><span class="line"></span><br><span class="line">1）不依赖于数据库，灵活方便，且性能优于数据库。</span><br><span class="line"></span><br><span class="line">2）数字ID天然排序，对分页或者需要排序的结果很有帮助。</span><br><span class="line"></span><br><span class="line">缺点：</span><br><span class="line"></span><br><span class="line">1）如果系统中没有Redis，还需要引入新的组件，增加系统复杂度。</span><br><span class="line"></span><br><span class="line">2）需要编码和配置的工作量比较大。</span><br><span class="line"></span><br><span class="line">**5. Twitter的snowflake算法**</span><br><span class="line"></span><br><span class="line">snowflake是Twitter开源的分布式ID生成算法，结果是一个long型的ID。其核心思想是：使用41bit作为毫秒数，10bit作为机器的ID（5个bit是数据中心，5个bit的机器ID），12bit作为毫秒内的流水号（意味着每个节点在每毫秒可以产生 4096 个 ID），最后还有一个符号位，永远是0。具体实现的代码可以参看[https://github.com/twitter/snowflake](https://github.com/twitter/snowflake)。</span><br><span class="line"></span><br><span class="line">C#代码如下：</span><br></pre></td></tr></table></figure><br><br>    /// <summary><br>        /// From: <a href="https://github.com/twitter/snowflake" target="_blank" rel="noopener">https://github.com/twitter/snowflake</a><br>        /// An object that generates IDs.<br>        /// This is broken into a separate class in case<br>        /// we ever want to support multiple worker threads<br>        /// per process<br>        /// </summary><br>        public class IdWorker<br>        {<br>            private long workerId;<br>            private long datacenterId;<br>            private long sequence = 0L;<br><br>            private static long twepoch = 1288834974657L;<br><br>            private static long workerIdBits = 5L;<br>            private static long datacenterIdBits = 5L;<br>            private static long maxWorkerId = -1L ^ (-1L &lt;&lt; (int)workerIdBits);<br>            private static long maxDatacenterId = -1L ^ (-1L &lt;&lt; (int)datacenterIdBits);<br>            private static long sequenceBits = 12L;<br><br>            private long workerIdShift = sequenceBits;<br>            private long datacenterIdShift = sequenceBits + workerIdBits;<br>            private long timestampLeftShift = sequenceBits + workerIdBits + datacenterIdBits;<br>            private long sequenceMask = -1L ^ (-1L &lt;&lt; (int)sequenceBits);<br><br>            private long lastTimestamp = -1L;<br>            private static object syncRoot = new object();<br><br>            public IdWorker(long workerId, long datacenterId)<br>            {<br><br>                // sanity check for workerId<br>                if (workerId &gt; maxWorkerId || workerId &lt; 0)<br>                {<br>                    throw new ArgumentException(string.Format(“worker Id can’t be greater than %d or less than 0”, maxWorkerId));<br>                }<br>                if (datacenterId &gt; maxDatacenterId || datacenterId &lt; 0)<br>                {<br>                    throw new ArgumentException(string.Format(“datacenter Id can’t be greater than %d or less than 0”, maxDatacenterId));<br>                }<br>                this.workerId = workerId;<br>                this.datacenterId = datacenterId;<br>            }<br><br>            public long nextId()<br>            {<br>                lock (syncRoot)<br>                {<br>                    long timestamp = timeGen();<br><br>                    if (timestamp &lt; lastTimestamp)<br>                    {<br>                        throw new ApplicationException(string.Format(“Clock moved backwards.  Refusing to generate id for %d milliseconds”, lastTimestamp - timestamp));<br>                    }<br><br>                    if (lastTimestamp == timestamp)<br>                    {<br>                        sequence = (sequence + 1) &amp; sequenceMask;<br>                        if (sequence == 0)<br>                        {<br>                            timestamp = tilNextMillis(lastTimestamp);<br>                        }<br>                    }<br>                    else<br>                    {<br>                        sequence = 0L;<br>                    }<br><br>                    lastTimestamp = timestamp;<br><br>                    return ((timestamp - twepoch) &lt;&lt; (int)timestampLeftShift) | (datacenterId &lt;&lt; (int)datacenterIdShift) | (workerId &lt;&lt; (int)workerIdShift) | sequence;<br>                }<br>            }<br><br>            protected long tilNextMillis(long lastTimestamp)<br>            {<br>                long timestamp = timeGen();<br>                while (timestamp &lt;= lastTimestamp)<br>                {<br>                    timestamp = timeGen();<br>                }<br>                return timestamp;<br>            }<br><br>            protected long timeGen()<br>            {<br>                return (long)(DateTime.UtcNow - new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc)).TotalMilliseconds;<br>            }<br>        }<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">测试代码如下：</span><br></pre></td></tr></table></figure><br><br>    private static void TestIdWorker()<br>            {<br>                HashSet<long> set = new HashSet<long>();<br>                IdWorker idWorker1 = new IdWorker(0, 0);<br>                IdWorker idWorker2 = new IdWorker(1, 0);<br>                Thread t1 = new Thread(() =&gt; DoTestIdWoker(idWorker1, set));<br>                Thread t2 = new Thread(() =&gt; DoTestIdWoker(idWorker2, set));<br>                t1.IsBackground = true;<br>                t2.IsBackground = true;<br><br>                t1.Start();<br>                t2.Start();<br>                try<br>                {<br>                    Thread.Sleep(30000);<br>                    t1.Abort();<br>                    t2.Abort();<br>                }<br>                catch (Exception e)<br>                {<br>                }<br><br>                Console.WriteLine(“done”);<br>            }<br><br>            private static void DoTestIdWoker(IdWorker idWorker, HashSet<long> set)<br>            {<br>                while (true)<br>                {<br>                    long id = idWorker.nextId();<br>                    if (!set.Add(id))<br>                    {<br>                        Console.WriteLine(“duplicate:” + id);<br>                    }<br><br>                    Thread.Sleep(1);<br>                }<br>            }<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">snowflake算法可以根据自身项目的需要进行一定的修改。比如估算未来的数据中心个数，每个数据中心的机器数以及统一毫秒可以能的并发数来调整在算法中所需要的bit数。</span><br><span class="line"></span><br><span class="line">优点：</span><br><span class="line"></span><br><span class="line">1）不依赖于数据库，灵活方便，且性能优于数据库。</span><br><span class="line"></span><br><span class="line">2）ID按照时间在单机上是递增的。</span><br><span class="line"></span><br><span class="line">缺点：</span><br><span class="line"></span><br><span class="line">1）在单机上是递增的，但是由于涉及到分布式环境，每台机器上的时钟不可能完全同步，也许有时候也会出现不是全局递增的情况。</span><br><span class="line"></span><br><span class="line">**6. 利用zookeeper生成唯一ID**</span><br><span class="line"></span><br><span class="line">    &lt;pre class=&quot;brush: csharp; auto-links: true; collapse: true; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: false; tab-size: 4; toolbar: true;&quot;&gt;zookeeper主要通过其znode数据版本来生成序列号，可以生成32位和64位的数据版本号，客户端可以使用这个版本号来作为唯一的序列号。</span><br></pre></td></tr></table></figure><br><br>    <pre class="brush: csharp; auto-links: true; collapse: true; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: false; tab-size: 4; toolbar: true;">很少会使用zookeeper来生成唯一ID。主要是由于需要依赖zookeeper，并且是多步调用API，如果在竞争较大的情况下，需要考虑使用分布式锁。因此，性能在高并发的分布式环境下，也不甚理想。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush: csharp; auto-links: true; collapse: true; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: false; tab-size: 4; toolbar: true;&quot;&gt;</span><br></pre></td></tr></table></figure><br><br>    <pre class="brush: csharp; auto-links: true; collapse: true; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: false; tab-size: 4; toolbar: true;"><strong>7. MongoDB的ObjectId</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush: csharp; auto-links: true; collapse: true; first-line: 1; gutter: true; html-script: false; light: false; ruler: false; smart-tabs: false; tab-size: 4; toolbar: true;&quot;&gt;MongoDB的ObjectId和snowflake算法类似。它设计成轻量型的，不同的机器都能用全局唯一的同种方法方便地生成它。MongoDB 从一开始就设计用来作为分布式数据库，处理多个节点是一个核心要求。使其在分片环境中要容易生成得多。</span><br></pre></td></tr></table></figure><br><br>其格式如下：<br><br><img src="http://pangguoming.com/blog/images/246e6853-dae0-4fa2-a14d-f277cfc8c9f1.PNG" alt=""><br><br>前4 个字节是从标准纪元开始的时间戳，单位为秒。时间戳，与随后的5 个字节组合起来，提供了秒级别的唯一性。由于时间戳在前，这意味着ObjectId 大致会按照插入的顺序排列。这对于某些方面很有用，如将其作为索引提高效率。这4 个字节也隐含了文档创建的时间。绝大多数客户端类库都会公开一个方法从ObjectId 获取这个信息。<br>接下来的3 字节是所在主机的唯一标识符。通常是机器主机名的散列值。这样就可以确保不同主机生成不同的ObjectId，不产生冲突。<br>为了确保在同一台机器上并发的多个进程产生的ObjectId 是唯一的，接下来的两字节来自产生ObjectId 的进程标识符（PID）。<br>前9 字节保证了同一秒钟不同机器不同进程产生的ObjectId 是唯一的。后3 字节就是一个自动增加的计数器，确保相同进程同一秒产生的ObjectId 也是不一样的。同一秒钟最多允许每个进程拥有2563（16 777 216）个不同的ObjectId。<br><br>实现的源码可以到MongoDB官方网站下载。<br><br><strong>8. 来自Flicker的解决方案</strong><br>因为MySQL本身支持auto_increment操作，很自然地，我们会想到借助这个特性来实现这个功能。<br>Flicker在解决全局ID生成方案里就采用了MySQL自增长ID的机制（auto_increment + replace into + MyISAM）。一个生成64位ID方案具体就是这样的：<br>先创建单独的数据库(eg:ticket)，然后创建一个表：<br><br>    <div class="cnblogs_Highlighter sh-gutter"><br>    <div><br>    <div id="highlighter_974323" class="syntaxhighlighter  sql"><br>    <table border="0" cellspacing="0" cellpadding="0"><br>    <tbody><br>    <tr><br>    <td class="gutter"><br>    <div class="line number1 index0 alt2">1<br>    <div class="line number2 index1 alt1">2<br>    <div class="line number3 index2 alt2">3<br>    <div class="line number4 index3 alt1">4<br>    <div class="line number5 index4 alt2">5<br>    <div class="line number6 index5 alt1">6<br><br>    </div></div></div></div></div></div></td><br>    <td class="code"><br>    <div class="container"><br>    <div class="line number1 index0 alt2"><code class="sql keyword">CREATE</code> <code class="sql keyword">TABLE</code> <code class="sql plain">Tickets64 (</code><br>    <div class="line number2 index1 alt1"><code class="sql plain">id </code><code class="sql keyword">bigint</code><code class="sql plain">(20) unsigned </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code> <code class="sql plain">auto_increment,</code><br>    <div class="line number3 index2 alt2"><code class="sql plain">stub </code><code class="sql keyword">char</code><code class="sql plain">(1) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code> <code class="sql keyword">default</code> <code class="sql string">‘’</code><code class="sql plain">,</code><br>    <div class="line number4 index3 alt1"><code class="sql keyword">PRIMARY</code> <code class="sql keyword">KEY</code> <code class="sql plain">(id),</code><br>    <div class="line number5 index4 alt2"><code class="sql keyword">UNIQUE</code> <code class="sql keyword">KEY</code> <code class="sql plain">stub (stub)</code><br>    <div class="line number6 index5 alt1"><code class="sql plain">) ENGINE=MyISAM</code><br><br>    </div></div></div></div></div></div></div></td><br><br>    </tr><br><br>    </tbody><br><br>    </table><br><br>当我们插入记录后，执行SELECT * from Tickets64，查询结果就是这样的：<br><br>+——————-+——+<br>| id | stub |<br>+——————-+——+<br>| 72157623227190423 | a |<br>+——————-+——+<br>在我们的应用端需要做下面这两个操作，在一个事务会话里提交：<br><br>    <div class="cnblogs_Highlighter sh-gutter"><br>    <div><br>    <div id="highlighter_547028" class="syntaxhighlighter  sql"><br>    <table border="0" cellspacing="0" cellpadding="0"><br>    <tbody><br>    <tr><br>    <td class="gutter"><br>    <div class="line number1 index0 alt2">1<br>    <div class="line number2 index1 alt1">2<br><br>    </div></div></td><br>    <td class="code"><br>    <div class="container"><br>    <div class="line number1 index0 alt2"><code class="sql color2">REPLACE</code> <code class="sql keyword">INTO</code> <code class="sql plain">Tickets64 (stub) </code><code class="sql keyword">VALUES</code> <code class="sql plain">(</code><code class="sql string">‘a’</code><code class="sql plain">);</code><br>    <div class="line number2 index1 alt1"><code class="sql keyword">SELECT</code> <code class="sql plain">LAST_INSERT_ID();</code><br><br>    </div></div></div></td><br><br>    </tr><br><br>    </tbody><br><br>    </table><br><br>这样我们就能拿到不断增长且不重复的ID了。<br>到上面为止，我们只是在单台数据库上生成ID，从高可用角度考虑，接下来就要解决单点故障问题：Flicker启用了两台数据库服务器来生成ID，通过区分auto_increment的起始值和步长来生成奇偶数的ID。<br><br>    <div class="cnblogs_Highlighter sh-gutter"><br>    <div><br>    <div id="highlighter_349251" class="syntaxhighlighter  sql"><br>    <table border="0" cellspacing="0" cellpadding="0"><br>    <tbody><br>    <tr><br>    <td class="gutter"><br>    <div class="line number1 index0 alt2">1<br>    <div class="line number2 index1 alt1">2<br>    <div class="line number3 index2 alt2">3<br>    <div class="line number4 index3 alt1">4<br>    <div class="line number5 index4 alt2">5<br>    <div class="line number6 index5 alt1">6<br>    <div class="line number7 index6 alt2">7<br><br>    </div></div></div></div></div></div></div></td><br>    <td class="code"><br>    <div class="container"><br>    <div class="line number1 index0 alt2"><code class="sql plain">TicketServer1:</code><br>    <div class="line number2 index1 alt1"><code class="sql plain">auto-increment-increment = 2</code><br>    <div class="line number3 index2 alt2"><code class="sql plain">auto-increment-offset = 1</code><br>    <div class="line number4 index3 alt1"><br>    <div class="line number5 index4 alt2"><code class="sql plain">TicketServer2:</code><br>    <div class="line number6 index5 alt1"><code class="sql plain">auto-increment-increment = 2</code><br>    <div class="line number7 index6 alt2"><code class="sql plain">auto-increment-offset = 2</code><br><br>    </div></div></div></div></div></div></div></div></td><br><br>    </tr><br><br>    </tbody><br><br>    </table><br><br>最后，在客户端只需要通过轮询方式取ID就可以了。<br><br>优点：充分借助数据库的自增ID机制，提供高可靠性，生成的ID有序。<br>缺点：占用两个独立的MySQL实例，有些浪费资源，成本较高。<br></div></div></div></div></div></div></div></div></div></pre></pre><br></long></long></long></div></div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/af98dba5.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/af98dba5.html" itemprop="url">Spring Boot 集成Shiro和CAS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-18T11:09:00+08:00">
                2017-12-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div class="article_title"><br><br># <span class="link_title"><a href="http://blog.csdn.net/catoop/article/details/50534006" target="_blank" rel="noopener">Spring Boot 集成Shiro和CAS</a></span><br><br><div class="article_manage clearfix"><br><div class="article_l"><span class="link_categories">标签： <a href="http://www.csdn.net/tag/spring" target="_blank" rel="noopener">spring</a><a href="http://www.csdn.net/tag/shiro" target="_blank" rel="noopener">shiro</a><a href="http://www.csdn.net/tag/cas" target="_blank" rel="noopener">cas</a></span><br><div class="article_r"><span class="link_postdate">2016-01-17 23:03 <span class="link_view" title="阅读次数">35765人阅读 <span class="link_comments" title="评论次数"><a href="http://blog.csdn.net/catoop/article/details/50534006#comments" target="_blank" rel="noopener">评论</a>(22) <span class="link_collect tracking-ad" data-mod="popu_171"><a href="&quot;收藏&quot;">收藏</a> <span class="link_report"><a href="http://blog.csdn.net/catoop/article/details/50534006#report" title="举报" target="_blank" rel="noopener">举报</a></span></span></span></span></span><br><br><div class="category clearfix"><br><div class="category_l"><img src="http://pangguoming.com/blog/images/ff5db064-6f7a-4c21-b4dd-2fbb017d35e0.jpg" alt=""> 分类：<br><div class="category_r"><label>Spring（42） <img src="http://static.blog.csdn.net/images/arrow_triangle%20_down.jpg" alt=""></label><br><br><div class="bog_copyright"><br><br>版权声明：本文为博主原创文章，未经博主允许不得转载。<br><br><div id="article_content" class="article_content tracking-ad" data-mod="popu_307" data-dsm="post"><br><div class="markdown_views"><br><br>请大家在看本文之前，先了解如下知识点：<br>1、Shiro 是什么？怎么用？<br>2、Cas 是什么？怎么用？<br>3、最好有Spring基础<br><br>可以先看看这两篇文章，按照这2篇文章的内容做一遍：<br><a href="http://blog.csdn.net/catoop/article/details/50520958" target="_blank" rel="noopener">Spring Boot Shiro 权限管理</a><br><a href="http://blog.csdn.net/catoop/article/details/50530364" target="_blank" rel="noopener">CAS单点登录</a><br><br>首先看一下下面这张图：<br>第一个流程是单纯使用Shiro的流程。<br>第二个流程是单纯使用Cas的流程。<br>第三个图是Shiro集成Cas后的流程。<br><br>【流程图高清图连接：<a href="http://img.blog.csdn.net/20160117224937078" target="_blank" rel="noopener">http://img.blog.csdn.net/20160117224937078</a>】<br><br><img src="http://img.blog.csdn.net/20160117224937078" alt="流程图"><br><br>PS：流程图急急忙忙画的，整体上应该没有什么问题，具体细节问题还请大家留言指正。<br><br>如果你只是打算用到你的Spring Boot项目中，那么看着如下配置完成便可。<br>如果你想进一步了解其中的细节，还是建议大家单独配置Shiro、单独配置Cas，看看官方相关文档。<br>Shiro在1.2版本开始提供了对cas的集成，按下面添加依赖到pom.xml中：<br><br><code class="hljs xml has-numbering">        <span class="hljs-comment"><!--Apache Shiro所需的jar包 --><br>            <span class="hljs-tag">&lt;<span class="hljs-title">dependency&gt;<br>                <span class="hljs-tag">&lt;<span class="hljs-title">groupId&gt;org.apache.shiro<span class="hljs-tag">&lt;/<span class="hljs-title">groupId&gt;<br>                <span class="hljs-tag">&lt;<span class="hljs-title">artifactId&gt;shiro-spring<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId&gt;<br>                <span class="hljs-tag">&lt;<span class="hljs-title">version&gt;1.2.4<span class="hljs-tag">&lt;/<span class="hljs-title">version&gt;<br>            <span class="hljs-tag">&lt;/<span class="hljs-title">dependency&gt;<br>            <span class="hljs-tag">&lt;<span class="hljs-title">dependency&gt;<br>                <span class="hljs-tag">&lt;<span class="hljs-title">groupId&gt;org.apache.shiro<span class="hljs-tag">&lt;/<span class="hljs-title">groupId&gt;<br>                <span class="hljs-tag">&lt;<span class="hljs-title">artifactId&gt;shiro-ehcache<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId&gt;<br>                <span class="hljs-tag">&lt;<span class="hljs-title">version&gt;1.2.4<span class="hljs-tag">&lt;/<span class="hljs-title">version&gt;<br>            <span class="hljs-tag">&lt;/<span class="hljs-title">dependency&gt;<br>            <span class="hljs-tag">&lt;<span class="hljs-title">dependency&gt;<br>                <span class="hljs-tag">&lt;<span class="hljs-title">groupId&gt;org.apache.shiro<span class="hljs-tag">&lt;/<span class="hljs-title">groupId&gt;<br>                <span class="hljs-tag">&lt;<span class="hljs-title">artifactId&gt;shiro-cas<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId&gt;<br>                <span class="hljs-tag">&lt;<span class="hljs-title">version&gt;1.2.4<span class="hljs-tag">&lt;/<span class="hljs-title">version&gt;<br>            <span class="hljs-tag">&lt;/<span class="hljs-title">dependency&gt;</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">shiro-cas 依赖 shiro-web，shiro-web 依赖 shiro-core，所以添加shiro-cas后shiro-web.jar和shiro-core.jar会自动被引用。 </span><br><span class="line"></span><br><span class="line">cas被shiro集成后，其原理就是shiro将casFilter加入到shiroFilter的filterChain中。</span><br><span class="line"></span><br><span class="line">在SpringBoot工程中创建ShiroCasConfiguration.java</span><br><span class="line"></span><br><span class="line">    &lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs java has-numbering&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;package org.springboot.sample.config;</span><br><span class="line"></span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import java.util.HashMap;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import java.util.LinkedHashMap;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import java.util.Map;</span><br><span class="line"></span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import javax.servlet.Filter;</span><br><span class="line"></span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.apache.shiro.cache.ehcache.EhCacheManager;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.apache.shiro.cas.CasFilter;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.apache.shiro.cas.CasSubjectFactory;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.apache.shiro.spring.LifecycleBeanPostProcessor;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.apache.shiro.spring.security.interceptor.AuthorizationAttributeSourceAdvisor;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.apache.shiro.spring.web.ShiroFilterFactoryBean;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.apache.shiro.web.mgt.DefaultWebSecurityManager;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.slf4j.Logger;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.slf4j.LoggerFactory;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.springboot.sample.dao.IScoreDao;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.springboot.sample.security.MyShiroCasRealm;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.springboot.sample.service.StudentService;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.springframework.boot.context.embedded.FilterRegistrationBean;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.springframework.context.annotation.Bean;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.springframework.context.annotation.Configuration;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;import org.springframework.web.filter.DelegatingFilterProxy;</span><br><span class="line"></span><br><span class="line">    &lt;span class=&quot;hljs-javadoc&quot;&gt;/**</span><br><span class="line">     * Shiro集成Cas配置</span><br><span class="line">     *</span><br><span class="line">     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @author   单红宇(365384722)</span><br><span class="line">     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @myblog  http://blog.csdn.net/catoop/</span><br><span class="line">     *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @create    2016年1月17日</span><br><span class="line">     */</span><br><span class="line">    &lt;span class=&quot;hljs-annotation&quot;&gt;@Configuration</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class &lt;span class=&quot;hljs-title&quot;&gt;ShiroCasConfiguration &#123;</span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;private &lt;span class=&quot;hljs-keyword&quot;&gt;static &lt;span class=&quot;hljs-keyword&quot;&gt;final Logger logger = LoggerFactory.getLogger(ShiroCasConfiguration.class);</span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-comment&quot;&gt;// CasServerUrlPrefix</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-keyword&quot;&gt;static &lt;span class=&quot;hljs-keyword&quot;&gt;final String casServerUrlPrefix = &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://localhost:8443/cas&quot;;</span><br><span class="line">        &lt;span class=&quot;hljs-comment&quot;&gt;// Cas登录页面地址</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-keyword&quot;&gt;static &lt;span class=&quot;hljs-keyword&quot;&gt;final String casLoginUrl = casServerUrlPrefix + &lt;span class=&quot;hljs-string&quot;&gt;&quot;/login&quot;;</span><br><span class="line">        &lt;span class=&quot;hljs-comment&quot;&gt;// Cas登出页面地址</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-keyword&quot;&gt;static &lt;span class=&quot;hljs-keyword&quot;&gt;final String casLogoutUrl = casServerUrlPrefix + &lt;span class=&quot;hljs-string&quot;&gt;&quot;/logout&quot;;</span><br><span class="line">        &lt;span class=&quot;hljs-comment&quot;&gt;// 当前工程对外提供的服务地址</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-keyword&quot;&gt;static &lt;span class=&quot;hljs-keyword&quot;&gt;final String shiroServerUrlPrefix = &lt;span class=&quot;hljs-string&quot;&gt;&quot;http://localhost:9090/myspringboot&quot;;</span><br><span class="line">        &lt;span class=&quot;hljs-comment&quot;&gt;// casFilter UrlPattern</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-keyword&quot;&gt;static &lt;span class=&quot;hljs-keyword&quot;&gt;final String casFilterUrlPattern = &lt;span class=&quot;hljs-string&quot;&gt;&quot;/shiro-cas&quot;;</span><br><span class="line">        &lt;span class=&quot;hljs-comment&quot;&gt;// 登录地址</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-keyword&quot;&gt;static &lt;span class=&quot;hljs-keyword&quot;&gt;final String loginUrl = casLoginUrl + &lt;span class=&quot;hljs-string&quot;&gt;&quot;?service=&quot; + shiroServerUrlPrefix + casFilterUrlPattern;</span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-annotation&quot;&gt;@Bean</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public EhCacheManager &lt;span class=&quot;hljs-title&quot;&gt;getEhCacheManager() &#123;  </span><br><span class="line">            EhCacheManager em = &lt;span class=&quot;hljs-keyword&quot;&gt;new EhCacheManager();  </span><br><span class="line">            em.setCacheManagerConfigFile(&lt;span class=&quot;hljs-string&quot;&gt;&quot;classpath:ehcache-shiro.xml&quot;);  </span><br><span class="line">            &lt;span class=&quot;hljs-keyword&quot;&gt;return em;  </span><br><span class="line">        &#125;  </span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-annotation&quot;&gt;@Bean(name = &lt;span class=&quot;hljs-string&quot;&gt;&quot;myShiroCasRealm&quot;)</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public MyShiroCasRealm &lt;span class=&quot;hljs-title&quot;&gt;myShiroCasRealm(EhCacheManager cacheManager) &#123;  </span><br><span class="line">            MyShiroCasRealm realm = &lt;span class=&quot;hljs-keyword&quot;&gt;new MyShiroCasRealm(); </span><br><span class="line">            realm.setCacheManager(cacheManager);</span><br><span class="line">            &lt;span class=&quot;hljs-keyword&quot;&gt;return realm;</span><br><span class="line">        &#125; </span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-javadoc&quot;&gt;/**</span><br><span class="line">         * 注册DelegatingFilterProxy（Shiro）</span><br><span class="line">         *</span><br><span class="line">         *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @param dispatcherServlet</span><br><span class="line">         *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @return</span><br><span class="line">         *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @author SHANHY</span><br><span class="line">         *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @create  2016年1月13日</span><br><span class="line">         */</span><br><span class="line">        &lt;span class=&quot;hljs-annotation&quot;&gt;@Bean</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public FilterRegistrationBean &lt;span class=&quot;hljs-title&quot;&gt;filterRegistrationBean() &#123;</span><br><span class="line">            FilterRegistrationBean filterRegistration = &lt;span class=&quot;hljs-keyword&quot;&gt;new FilterRegistrationBean();</span><br><span class="line">            filterRegistration.setFilter(&lt;span class=&quot;hljs-keyword&quot;&gt;new DelegatingFilterProxy(&lt;span class=&quot;hljs-string&quot;&gt;&quot;shiroFilter&quot;));</span><br><span class="line">            &lt;span class=&quot;hljs-comment&quot;&gt;//  该值缺省为false,表示生命周期由SpringApplicationContext管理,设置为true则表示由ServletContainer管理  </span><br><span class="line">            filterRegistration.addInitParameter(&lt;span class=&quot;hljs-string&quot;&gt;&quot;targetFilterLifecycle&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;true&quot;);</span><br><span class="line">            filterRegistration.setEnabled(&lt;span class=&quot;hljs-keyword&quot;&gt;true);</span><br><span class="line">            filterRegistration.addUrlPatterns(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/*&quot;);</span><br><span class="line">            &lt;span class=&quot;hljs-keyword&quot;&gt;return filterRegistration;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-annotation&quot;&gt;@Bean(name = &lt;span class=&quot;hljs-string&quot;&gt;&quot;lifecycleBeanPostProcessor&quot;)</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public LifecycleBeanPostProcessor &lt;span class=&quot;hljs-title&quot;&gt;getLifecycleBeanPostProcessor() &#123;</span><br><span class="line">            &lt;span class=&quot;hljs-keyword&quot;&gt;return &lt;span class=&quot;hljs-keyword&quot;&gt;new LifecycleBeanPostProcessor();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-annotation&quot;&gt;@Bean</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public DefaultAdvisorAutoProxyCreator &lt;span class=&quot;hljs-title&quot;&gt;getDefaultAdvisorAutoProxyCreator() &#123;</span><br><span class="line">            DefaultAdvisorAutoProxyCreator daap = &lt;span class=&quot;hljs-keyword&quot;&gt;new DefaultAdvisorAutoProxyCreator();</span><br><span class="line">            daap.setProxyTargetClass(&lt;span class=&quot;hljs-keyword&quot;&gt;true);</span><br><span class="line">            &lt;span class=&quot;hljs-keyword&quot;&gt;return daap;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-annotation&quot;&gt;@Bean(name = &lt;span class=&quot;hljs-string&quot;&gt;&quot;securityManager&quot;)</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public DefaultWebSecurityManager &lt;span class=&quot;hljs-title&quot;&gt;getDefaultWebSecurityManager(MyShiroCasRealm myShiroCasRealm) &#123;</span><br><span class="line">            DefaultWebSecurityManager dwsm = &lt;span class=&quot;hljs-keyword&quot;&gt;new DefaultWebSecurityManager();</span><br><span class="line">            dwsm.setRealm(myShiroCasRealm);</span><br><span class="line">    &lt;span class=&quot;hljs-comment&quot;&gt;//      &lt;!-- 用户授权/认证信息Cache, 采用EhCache 缓存 --&gt; </span><br><span class="line">            dwsm.setCacheManager(getEhCacheManager());</span><br><span class="line">            &lt;span class=&quot;hljs-comment&quot;&gt;// 指定 SubjectFactory</span><br><span class="line">            dwsm.setSubjectFactory(&lt;span class=&quot;hljs-keyword&quot;&gt;new CasSubjectFactory());</span><br><span class="line">            &lt;span class=&quot;hljs-keyword&quot;&gt;return dwsm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-annotation&quot;&gt;@Bean</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public AuthorizationAttributeSourceAdvisor &lt;span class=&quot;hljs-title&quot;&gt;getAuthorizationAttributeSourceAdvisor(DefaultWebSecurityManager securityManager) &#123;</span><br><span class="line">            AuthorizationAttributeSourceAdvisor aasa = &lt;span class=&quot;hljs-keyword&quot;&gt;new AuthorizationAttributeSourceAdvisor();</span><br><span class="line">            aasa.setSecurityManager(securityManager);</span><br><span class="line">            &lt;span class=&quot;hljs-keyword&quot;&gt;return aasa;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-javadoc&quot;&gt;/**</span><br><span class="line">         * 加载shiroFilter权限控制规则（从数据库读取然后配置）</span><br><span class="line">         *</span><br><span class="line">         *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @author SHANHY</span><br><span class="line">         *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @create  2016年1月14日</span><br><span class="line">         */</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;private &lt;span class=&quot;hljs-keyword&quot;&gt;void &lt;span class=&quot;hljs-title&quot;&gt;loadShiroFilterChain(ShiroFilterFactoryBean shiroFilterFactoryBean, StudentService stuService, IScoreDao scoreDao)&#123;</span><br><span class="line">            &lt;span class=&quot;hljs-comment&quot;&gt;/////////////////////// 下面这些规则配置最好配置到配置文件中 ///////////////////////</span><br><span class="line">            Map&lt;String, String&gt; filterChainDefinitionMap = &lt;span class=&quot;hljs-keyword&quot;&gt;new LinkedHashMap&lt;String, String&gt;();</span><br><span class="line"></span><br><span class="line">            filterChainDefinitionMap.put(casFilterUrlPattern, &lt;span class=&quot;hljs-string&quot;&gt;&quot;casFilter&quot;);&lt;span class=&quot;hljs-comment&quot;&gt;// shiro集成cas后，首先添加该规则</span><br><span class="line"></span><br><span class="line">            &lt;span class=&quot;hljs-comment&quot;&gt;// authc：该过滤器下的页面必须验证后才能访问，它是Shiro内置的一个拦截器org.apache.shiro.web.filter.authc.FormAuthenticationFilter</span><br><span class="line">            filterChainDefinitionMap.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/user&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;authc&quot;);&lt;span class=&quot;hljs-comment&quot;&gt;// 这里为了测试，只限制/user，实际开发中请修改为具体拦截的请求规则</span><br><span class="line">            &lt;span class=&quot;hljs-comment&quot;&gt;// anon：它对应的过滤器里面是空的,什么都没做</span><br><span class="line">            logger.info(&lt;span class=&quot;hljs-string&quot;&gt;&quot;##################从数据库读取权限规则，加载到shiroFilter中##################&quot;);</span><br><span class="line">            filterChainDefinitionMap.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/user/edit/**&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;authc,perms[user:edit]&quot;);&lt;span class=&quot;hljs-comment&quot;&gt;// 这里为了测试，固定写死的值，也可以从数据库或其他配置中读取</span><br><span class="line"></span><br><span class="line">            filterChainDefinitionMap.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/login&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;anon&quot;);</span><br><span class="line">            filterChainDefinitionMap.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/**&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;anon&quot;);&lt;span class=&quot;hljs-comment&quot;&gt;//anon 可以理解为不拦截</span><br><span class="line"></span><br><span class="line">            shiroFilterFactoryBean.setFilterChainDefinitionMap(filterChainDefinitionMap);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-javadoc&quot;&gt;/**</span><br><span class="line">         * CAS过滤器</span><br><span class="line">         *</span><br><span class="line">         *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @return</span><br><span class="line">         *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @author SHANHY</span><br><span class="line">         *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @create  2016年1月17日</span><br><span class="line">         */</span><br><span class="line">        &lt;span class=&quot;hljs-annotation&quot;&gt;@Bean(name = &lt;span class=&quot;hljs-string&quot;&gt;&quot;casFilter&quot;)</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public CasFilter &lt;span class=&quot;hljs-title&quot;&gt;getCasFilter() &#123;</span><br><span class="line">            CasFilter casFilter = &lt;span class=&quot;hljs-keyword&quot;&gt;new CasFilter();</span><br><span class="line">            casFilter.setName(&lt;span class=&quot;hljs-string&quot;&gt;&quot;casFilter&quot;);</span><br><span class="line">            casFilter.setEnabled(&lt;span class=&quot;hljs-keyword&quot;&gt;true);</span><br><span class="line">            &lt;span class=&quot;hljs-comment&quot;&gt;// 登录失败后跳转的URL，也就是 Shiro 执行 CasRealm 的 doGetAuthenticationInfo 方法向CasServer验证tiket</span><br><span class="line">            casFilter.setFailureUrl(loginUrl);&lt;span class=&quot;hljs-comment&quot;&gt;// 我们选择认证失败后再打开登录页面</span><br><span class="line">            &lt;span class=&quot;hljs-keyword&quot;&gt;return casFilter;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &lt;span class=&quot;hljs-javadoc&quot;&gt;/**</span><br><span class="line">         * ShiroFilter&lt;br/&gt;</span><br><span class="line">         * 注意这里参数中的 StudentService 和 IScoreDao 只是一个例子，因为我们在这里可以用这样的方式获取到相关访问数据库的对象，</span><br><span class="line">         * 然后读取数据库相关配置，配置到 shiroFilterFactoryBean 的访问规则中。实际项目中，请使用自己的Service来处理业务逻辑。</span><br><span class="line">         *</span><br><span class="line">         *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @param myShiroCasRealm</span><br><span class="line">         *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @param stuService</span><br><span class="line">         *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @param scoreDao</span><br><span class="line">         *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @return</span><br><span class="line">         *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @author SHANHY</span><br><span class="line">         *&lt;span class=&quot;hljs-javadoctag&quot;&gt; @create  2016年1月14日</span><br><span class="line">         */</span><br><span class="line">        &lt;span class=&quot;hljs-annotation&quot;&gt;@Bean(name = &lt;span class=&quot;hljs-string&quot;&gt;&quot;shiroFilter&quot;)</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public ShiroFilterFactoryBean &lt;span class=&quot;hljs-title&quot;&gt;getShiroFilterFactoryBean(DefaultWebSecurityManager securityManager, CasFilter casFilter, StudentService stuService, IScoreDao scoreDao) &#123;</span><br><span class="line">            ShiroFilterFactoryBean shiroFilterFactoryBean = &lt;span class=&quot;hljs-keyword&quot;&gt;new ShiroFilterFactoryBean();</span><br><span class="line">            &lt;span class=&quot;hljs-comment&quot;&gt;// 必须设置 SecurityManager  </span><br><span class="line">            shiroFilterFactoryBean.setSecurityManager(securityManager);</span><br><span class="line">            &lt;span class=&quot;hljs-comment&quot;&gt;// 如果不设置默认会自动寻找Web工程根目录下的&quot;/login.jsp&quot;页面</span><br><span class="line">            shiroFilterFactoryBean.setLoginUrl(loginUrl);</span><br><span class="line">            &lt;span class=&quot;hljs-comment&quot;&gt;// 登录成功后要跳转的连接</span><br><span class="line">            shiroFilterFactoryBean.setSuccessUrl(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/user&quot;);</span><br><span class="line">            shiroFilterFactoryBean.setUnauthorizedUrl(&lt;span class=&quot;hljs-string&quot;&gt;&quot;/403&quot;);</span><br><span class="line">            &lt;span class=&quot;hljs-comment&quot;&gt;// 添加casFilter到shiroFilter中</span><br><span class="line">            Map&lt;String, Filter&gt; filters = &lt;span class=&quot;hljs-keyword&quot;&gt;new HashMap&lt;&gt;();</span><br><span class="line">            filters.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;casFilter&quot;, casFilter);</span><br><span class="line">            shiroFilterFactoryBean.setFilters(filters);</span><br><span class="line"></span><br><span class="line">            loadShiroFilterChain(shiroFilterFactoryBean, stuService, scoreDao);</span><br><span class="line">            &lt;span class=&quot;hljs-keyword&quot;&gt;return shiroFilterFactoryBean;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;</span><br></pre></td></tr></table></figure><br><br>创建权限认证的 MyShiroCasRealm.java<br><br>    <pre name="code" class="prettyprint"><code class="hljs java has-numbering"><span class="hljs-keyword">package org.springboot.sample.security;<br><br>    <span class="hljs-keyword">import java.util.List;<br><br>    <span class="hljs-keyword">import javax.annotation.PostConstruct;<br><br>    <span class="hljs-keyword">import org.apache.shiro.authz.AuthorizationInfo;<br>    <span class="hljs-keyword">import org.apache.shiro.authz.SimpleAuthorizationInfo;<br>    <span class="hljs-keyword">import org.apache.shiro.cas.CasRealm;<br>    <span class="hljs-keyword">import org.apache.shiro.subject.PrincipalCollection;<br>    <span class="hljs-keyword">import org.slf4j.Logger;<br>    <span class="hljs-keyword">import org.slf4j.LoggerFactory;<br>    <span class="hljs-keyword">import org.springboot.sample.config.ShiroCasConfiguration;<br>    <span class="hljs-keyword">import org.springboot.sample.dao.IUserDao;<br>    <span class="hljs-keyword">import org.springboot.sample.entity.Role;<br>    <span class="hljs-keyword">import org.springboot.sample.entity.User;<br>    <span class="hljs-keyword">import org.springframework.beans.factory.annotation.Autowired;<br>    <span class="hljs-keyword">import org.springframework.stereotype.Service;<br>    <span class="hljs-keyword">import org.springframework.transaction.annotation.Transactional;<br><br>    <span class="hljs-keyword">public <span class="hljs-class"><span class="hljs-keyword">class <span class="hljs-title">MyShiroCasRealm <span class="hljs-keyword">extends <span class="hljs-title">CasRealm{<br><br>        <span class="hljs-keyword">private <span class="hljs-keyword">static <span class="hljs-keyword">final Logger logger = LoggerFactory.getLogger(MyShiroCasRealm.class);<br><br>        <span class="hljs-annotation">@Autowired<br>        <span class="hljs-keyword">private IUserDao userDao;<br><br>        <span class="hljs-annotation">@PostConstruct<br>        <span class="hljs-keyword">public <span class="hljs-keyword">void <span class="hljs-title">initProperty(){<br>    <span class="hljs-comment">//      setDefaultRoles(“ROLE_USER”);<br>            setCasServerUrlPrefix(ShiroCasConfiguration.casServerUrlPrefix);<br>            <span class="hljs-comment">// 客户端回调地址<br>            setCasService(ShiroCasConfiguration.shiroServerUrlPrefix + ShiroCasConfiguration.casFilterUrlPattern);<br>        }<br><br>        <span class="hljs-javadoc">/*<em>
         </em> 权限认证，为当前登录的Subject授予角色和权限<br>         <em><span class="hljs-javadoctag"> @see 经测试：本例中该方法的调用时机为需授权资源被访问时 
         </span></em><span class="hljs-javadoctag"> @see 经测试：并且每次访问需授权资源时都会执行该方法中的逻辑，这表明本例中默认并未启用AuthorizationCache<br>         <em><span class="hljs-javadoctag"> @see 经测试：如果连续访问同一个URL（比如刷新），该方法不会被重复调用，Shiro有一个时间间隔（也就是cache时间，在ehcache-shiro.xml中配置），超过这个时间间隔再刷新页面，该方法会被执行
         </span></em>/<br>        <span class="hljs-annotation">@Override<br>        <span class="hljs-keyword">protected AuthorizationInfo <span class="hljs-title">doGetAuthorizationInfo(PrincipalCollection principalCollection) {<br>            logger.info(<span class="hljs-string">“##################执行Shiro权限认证##################”);<br>            <span class="hljs-comment">//获取当前登录输入的用户名，等价于(String) principalCollection.fromRealm(getName()).iterator().next();<br>            String loginName = (String)<span class="hljs-keyword">super.getAvailablePrincipal(principalCollection);<br>            <span class="hljs-comment">//到数据库查是否有此对象<br>            User user=userDao.findByName(loginName);<span class="hljs-comment">// 实际项目中，这里可以根据实际情况做缓存，如果不做，Shiro自己也是有时间间隔机制，2分钟内不会重复执行该方法<br>            <span class="hljs-keyword">if(user!=<span class="hljs-keyword">null){<br>                <span class="hljs-comment">//权限信息对象info,用来存放查出的用户的所有的角色（role）及权限（permission）<br>                SimpleAuthorizationInfo info=<span class="hljs-keyword">new SimpleAuthorizationInfo();<br>                <span class="hljs-comment">//用户的角色集合<br>                info.setRoles(user.getRolesName());<br>                <span class="hljs-comment">//用户的角色对应的所有权限，如果只使用角色定义访问权限，下面的四行可以不要<br>                List<role> roleList=user.getRoleList();<br>                <span class="hljs-keyword">for (Role role : roleList) {<br>                    info.addStringPermissions(role.getPermissionsName());<br>                }<br>                <span class="hljs-comment">// 或者按下面这样添加<br>                <span class="hljs-comment">//添加一个角色,不是配置意义上的添加,而是证明该用户拥有admin角色<br>    <span class="hljs-comment">//            simpleAuthorInfo.addRole(“admin”);<br>                <span class="hljs-comment">//添加权限<br>    <span class="hljs-comment">//            simpleAuthorInfo.addStringPermission(“admin:manage”);<br>    <span class="hljs-comment">//            logger.info(“已为用户[mike]赋予了[admin]角色和[admin:manage]权限”);<br>                <span class="hljs-keyword">return info;<br>            }<br>            <span class="hljs-comment">// 返回null的话，就会导致任何用户访问被拦截的请求时，都会自动跳转到unauthorizedUrl指定的地址<br>            <span class="hljs-keyword">return <span class="hljs-keyword">null;<br>        }<br><br>    }<br>    </span></span></span></span></span></span></span></span></span></span></span></role></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">在Controller中添加一个方法，用于将登录URL简单化，提供一个重定向功能</span><br><span class="line"></span><br><span class="line">    &lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs cs has-numbering&quot;&gt;</span><br><span class="line">        @RequestMapping(&lt;span class=&quot;hljs-keyword&quot;&gt;value=&lt;span class=&quot;hljs-string&quot;&gt;&quot;/login&quot;,method=RequestMethod.GET)</span><br><span class="line">        &lt;span class=&quot;hljs-keyword&quot;&gt;public String &lt;span class=&quot;hljs-title&quot;&gt;loginForm(Model model)&#123;</span><br><span class="line">            model.addAttribute(&lt;span class=&quot;hljs-string&quot;&gt;&quot;user&quot;, &lt;span class=&quot;hljs-keyword&quot;&gt;new User());</span><br><span class="line">    &lt;span class=&quot;hljs-comment&quot;&gt;//      return &quot;login&quot;;</span><br><span class="line">            &lt;span class=&quot;hljs-keyword&quot;&gt;return &lt;span class=&quot;hljs-string&quot;&gt;&quot;redirect:&quot; + ShiroCasConfiguration.loginUrl;</span><br><span class="line">        &#125;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;</span><br></pre></td></tr></table></figure><br><br>本文主要是介绍如何在Spring Boot中集成Shiro+Cas，并非一个从零创建工程到整体完成的介绍。<br>上面贴出了2个主要的Java类，整个工程的其他所有代码没有任何与Shiro和Cas耦合的地方。如果需要jsp页面、Controller、实体类、连接数据库测试数据等代码，可以先参考文章：<a href="http://blog.csdn.net/catoop/article/details/50520958" target="_blank" rel="noopener">http://blog.csdn.net/catoop/article/details/50520958</a>（建议先看这篇文章再看本文）<br><br>    </pre><br></div></div></div></div></div></div></div></div></div></div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/bed27e30.html">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/bed27e30.html" itemprop="url">activiti5.13 框架 数据库设计说明书</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-13T09:45:00+08:00">
                2017-12-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>1、结构设计</strong></p>
<p><strong>1.1、    **</strong>逻辑结构设计**</p>
<p>Activiti使用到的表都是ACT_开头的。</p>
<p>ACT_RE_*:</p>
<p>’RE’表示repository(<strong>存储</strong>)，RepositoryService接口所操作的表。带此前缀的表包含的是静态信息，如，流程定义，流程的资源（图片，规则等）。</p>
<p>ACT_RU_*:</p>
<p>‘RU’表示runtime，运行时表-RuntimeService。这是运行时的表存储着流程变量，用户任务，变量，职责（job）等运行时的数据。Activiti只存储实例执行期间的运行时数据，当流程实例结束时，将删除这些记录。这就保证了这些运行时的表小且快。</p>
<p>ACT_ID_*:</p>
<p>’ID’表示identity (<strong>组织机构</strong>)，IdentityService接口所操作的表。用户记录，流程中使用到的用户和组。这些表包含标识的信息，如用户，用户组，等等。</p>
<p>ACT_HI_*:</p>
<p>’HI’表示history，历史数据表，HistoryService。就是这些表包含着流程执行的历史相关数据，如结束的流程实例，变量，任务，等等</p>
<p>ACT_GE_*:</p>
<p>全局通用数据及设置(general)，各种情况都使用的数据。</p>
<p><strong>1.2、    **</strong>所有表的含义**</p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="47"><br><br><strong>序号</strong><br><br></td><br><td valign="top" width="208"><br><br><strong>表名</strong><br><br></td><br><td valign="top" width="406"><br><br><strong>说明</strong><br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>1<br><br></td><br><td valign="top" width="208"><br><br><strong>act_ge_bytearray</strong><br><br></td><br><td valign="top" width="406"><br><br>二进制数据表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>2<br><br></td><br><td valign="top" width="208"><br><br><strong>act_ge_property</strong><br><br></td><br><td valign="top" width="406"><br><br>属性数据表存储整个流程引擎级别的数据,初始化表结构时，会默认插入三条记录，<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>3<br><br></td><br><td valign="top" width="208"><br><br><strong>act_hi_actinst</strong><br><br></td><br><td valign="top" width="406"><br><br>历史节点表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>4<br><br></td><br><td valign="top" width="208"><br><br><strong>act_hi_attachment</strong><br><br></td><br><td valign="top" width="406"><br><br>历史附件表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>5<br><br></td><br><td valign="top" width="208"><br><br><strong>act_hi_comment</strong><br><br></td><br><td valign="top" width="406"><br><br>历史意见表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>6<br><br></td><br><td valign="top" width="208"><br><br><strong>act_hi_identitylink</strong><br><br></td><br><td valign="top" width="406"><br><br>历史流程人员表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>7<br><br></td><br><td valign="top" width="208"><br><br><strong>act_hi_detail</strong><br><br></td><br><td valign="top" width="406"><br><br>历史详情表，提供历史变量的查询<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>8<br><br></td><br><td valign="top"><br><br><strong>act_hi_procinst</strong><br><br></td><br><td valign="top" width="406"><br><br>历史流程实例表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>9<br><br></td><br><td valign="top" width="208"><br><br><strong>act_hi_taskinst</strong><br><br></td><br><td valign="top" width="406"><br><br>历史任务实例表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>10<br><br></td><br><td valign="top" width="208"><br><br><strong>act_hi_varinst</strong><br><br></td><br><td valign="top" width="406"><br><br>历史变量表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>11<br><br></td><br><td valign="top" width="208"><br><br><strong>act_id_group</strong><br><br></td><br><td valign="top" width="406"><br><br>用户组信息表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>12<br><br></td><br><td valign="top" width="208"><br><br><strong>act_id_info</strong><br><br></td><br><td valign="top" width="406"><br><br>用户扩展信息表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>13<br><br></td><br><td valign="top" width="208"><br><br><strong>act_id_membership</strong><br><br></td><br><td valign="top" width="406"><br><br>用户与用户组对应信息表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>14<br><br></td><br><td valign="top" width="208"><br><br><strong>act_id_user</strong><br><br></td><br><td valign="top" width="406"><br><br>用户信息表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br> 15<br><br></td><br><td valign="top" width="208"><br><br><strong>act_re_deployment</strong><br><br></td><br><td valign="top" width="406"><br><br>部署信息表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>16<br><br></td><br><td valign="top" width="208"><br><br><strong>act_re_model</strong><br><br></td><br><td valign="top" width="406"><br><br>流程设计模型部署表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>17<br><br></td><br><td valign="top" width="208"><br><br><strong>act_re_procdef</strong><br><br></td><br><td valign="top" width="406"><br><br>流程定义数据表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>18<br><br></td><br><td valign="top" width="208"><br><br><strong>act_ru_event_subscr</strong><br><br></td><br><td valign="top" width="406"><br><br>throwEvent、catchEvent时间监听信息表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>19<br><br></td><br><td valign="top" width="208"><br><br><strong>act_ru_execution</strong><br><br></td><br><td valign="top" width="406"><br><br>运行时流程执行实例表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>20<br><br></td><br><td valign="top" width="208"><br><br><strong>act_ru_identitylink</strong><br><br></td><br><td valign="top" width="406"><br><br>运行时流程人员表，主要存储任务节点与参与者的相关信息<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>21<br><br></td><br><td valign="top" width="208"><br><br><strong>act_ru_job</strong><br><br></td><br><td valign="top" width="406"><br><br>运行时定时任务数据表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>22<br><br></td><br><td valign="top" width="208"><br><br><strong>act_ru_task</strong><br><br></td><br><td valign="top" width="406"><br><br>运行时任务节点表<br><br></td><br></tr><br><tr><br><td valign="top" width="47"><br><br>23<br><br></td><br><td valign="top" width="208"><br><br><strong>act_ru_variable</strong><br><br></td><br><td valign="top" width="406"><br><br>运行时流程变量数据表<br><br></td><br></tr><br></tbody><br></table>

<p><strong>2、   表以及索引信息</strong></p>
<p><strong>2.1**</strong>  <strong><strong>二进制数据表（</strong></strong>act_ge_bytearray<strong>**）</strong></p>
<p><strong>2.1.1  **</strong>简要描述**</p>
<p>  保存流程定义图片和xml、Serializable<strong>(</strong>序列化<strong>)</strong>的变量,即保存所有二进制数据，特别注意<strong>类路径部署时候</strong>，不要把svn等隐藏文件或者其他与流程无关的文件也一起部署到该表中，会造成一些错误（可能导致流程定义无法删除）。 </p>
<p><strong>2.1.2  **</strong>表结构说明**</p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="138"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="115"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="126"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="46"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="227"><br><br><strong>取值说明</strong><br><br></td><br></tr><br><tr><br><td valign="top" width="138"><br><br>ID_<br><br></td><br><td valign="top" width="115"><br><br>ID_<br><br></td><br><td valign="top" width="126"><br><br><strong>nvarchar(64)</strong><br><br></td><br><td valign="top" width="46"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="227"><br><br>主键ID<br><br></td><br></tr><br><tr><br><td valign="top" width="138"><br><br>REV_<br><br></td><br><td valign="top" width="115"><br><br>乐观锁<br><br></td><br><td valign="top" width="126"><br><br><strong>int</strong><br><br></td><br><td valign="top" width="46"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="227"><br><br>Version(版本)<br><br></td><br></tr><br><tr><br><td valign="top" width="138"><br><br>NAME_<br><br></td><br><td valign="top" width="115"><br><br>名称<br><br></td><br><td valign="top" width="126"><br><br><strong>nvarchar(255)</strong><br><br></td><br><td valign="top" width="46"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="227"><br><br>部署的文件名称，如：mail.bpmn、mail.png 、mail.bpmn20.xml<br><br></td><br></tr><br><tr><br><td valign="top" width="138"><br><br>DEPLOYMENT_ID_<br><br></td><br><td valign="top"><br><br>部署ID<br><br></td><br><td valign="top" width="126"><br><br><strong>nvarchar(64)</strong><br><br></td><br><td valign="top" width="46"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="227"><br><br>部署表ID<br><br></td><br></tr><br><tr><br><td valign="top" width="138"><br><br>BYTES_<br><br></td><br><td valign="top" width="115"><br><br>字节<br><br></td><br><td valign="top" width="126"><br><br><strong>varbinary(max)</strong><br><br></td><br><td valign="top" width="46"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="227"><br><br>部署文件<br><br></td><br></tr><br><tr><br><td valign="top" width="138"><br><br>GENERATED_<br><br></td><br><td valign="top" width="115"><br><br><strong>是否是引擎生成</strong><br><br></td><br><td valign="top" width="126"><br><br><strong>tinyint</strong><br><br></td><br><td valign="top" width="46"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="227"><br><br>0为用户生成 1为Activiti生成<br><br></td><br></tr><br></tbody><br></table>

<p><strong><br>2.1.3  **</strong>索引说明**</p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top"><br><br>索引名称<br><br></td><br><td valign="top" width="140"><br><br>组成字段名称<br><br></td><br><td valign="top" width="84"><br><br>索引类型<br><br></td><br><td valign="top" width="123"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="182"><br><br>PRIMARY<br><br></td><br><td valign="top" width="140"><br><br>ID_<br><br></td><br><td valign="top" width="84"><br><br>Unique<br><br></td><br><td valign="top" width="123"><br><br>主键唯一索引<br><br></td><br><br></tr><br><tr><br><td valign="top"><br><br>ACT_FK_BYTEARR_DEPL<br><br></td><br><td valign="top" width="140"><br><br>DEPLOYMENT_ID_<br><br></td><br><td valign="top" width="84"><br><br></td><br><td valign="top" width="123"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.2**</strong>  <strong><strong>属性数据表</strong></strong>( act_ge_property )**</p>
<p><strong>2.2.1  **</strong>简要描述**</p>
<p>属性数据表。存储整个流程引擎级别的数据。</p>
<p><strong>2.2.2  **</strong>表结构说明**</p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="138"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="115"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="126"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="46"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="189"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top"><br><br>NAME_<br><br></td><br><td valign="top" width="115"><br><br>名称<br><br></td><br><td valign="top" width="126"><br><br><strong>nvarchar(64)</strong><br><br></td><br><td valign="top" width="46"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="189"><br><br>schema.version<br><br>schema.history<br><br>next.dbid<br><br></td><br><br></tr><br><tr><br><td valign="top" width="138"><br><br>VALUE_<br><br></td><br><td valign="top" width="115"><br><br>值<br><br></td><br><td valign="top" width="126"><br><br><strong>nvarchar(300)</strong><br><br></td><br><td valign="top" width="46"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="189"><br><br>5.<em><br><br>create(5.</em>)<br><br></td><br><br></tr><br><tr><br><td valign="top" width="138"><br><br>REV_<br><br></td><br><td valign="top" width="115"><br><br>乐观锁<br><br></td><br><td valign="top" width="126"><br><br><strong>int</strong><br><br></td><br><td valign="top" width="46"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="189"><br><br>version<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.2.3  **</strong>索引说明**</p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="182"><br><br>索引名称<br><br></td><br><td valign="top" width="140"><br><br>组成字段名称<br><br></td><br><td valign="top" width="84"><br><br>索引类型<br><br></td><br><td valign="top" width="123"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="182"><br><br>PRIMARY<br><br></td><br><td valign="top" width="140"><br><br>NAME_<br><br></td><br><td valign="top" width="84"><br><br>Unique<br><br></td><br><td valign="top" width="123"><br><br>主键唯一索引<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.3**</strong>  <strong><strong>历史节点表（</strong></strong>act_hi_actinst<strong>**）</strong></p>
<p><strong>2.3.1  **</strong> <strong>**简要描述</strong></p>
<p> 历史活动信息。这里记录流程流转过的所有节点，与HI_TASKINST不同的是，taskinst只记录usertask内容</p>
<p><strong>2.3.2  **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="162"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="104"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="125"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="44"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="45"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="181"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="162"><br><br>ID_<br><br></td><br><td valign="top" width="104"><br><br>ID_<br><br></td><br><td valign="top" width="125"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="44"><br><br>√<br><br></td><br><td valign="top" width="45"><br><br></td><br><td valign="top" width="181"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="162"><br><br>PROC_DEF_ID_<br><br></td><br><td valign="top" width="104"><br><br>流程定义ID<br><br></td><br><td valign="top" width="125"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br></td><br><td valign="top" width="181"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="162"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="104"><br><br>流程实例ID<br><br></td><br><td valign="top" width="125"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br></td><br><td valign="top" width="181"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="162"><br><br>EXECUTION_ID_<br><br></td><br><td valign="top" width="104"><br><br>执行实例ID<br><br></td><br><td valign="top" width="125"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br></td><br><td valign="top" width="181"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="162"><br><br>ACT_ID_<br><br></td><br><td valign="top" width="104"><br><br>节点ID<br><br></td><br><td valign="top" width="125"><br><br>nvarchar(225)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br></td><br><td valign="top" width="181"><br><br>节点定义ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="162"><br><br>TASK_ID_<br><br></td><br><td valign="top" width="104"><br><br>任务实例ID<br><br></td><br><td valign="top" width="125"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="181"><br><br>任务实例ID 其他节点类型实例ID在这里为空<br><br></td><br><br></tr><br><tr><br><td valign="top" width="162"><br><br>CALL_PROC_INST_ID_<br><br></td><br><td valign="top" width="104"><br><br>调用外部的流程实例ID<br><br></td><br><td valign="top" width="125"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="181"><br><br>调用外部流程的流程实例ID’<br><br></td><br><br></tr><br><tr><br><td valign="top" width="162"><br><br>ACT_NAME_<br><br></td><br><td valign="top" width="104"><br><br>节点名称<br><br></td><br><td valign="top" width="125"><br><br>nvarchar(225)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="181"><br><br>节点定义名称<br><br></td><br><br></tr><br><tr><br><td valign="top" width="162"><br><br>ACT_TYPE_<br><br></td><br><td valign="top" width="104"><br><br>节点类型<br><br></td><br><td valign="top" width="125"><br><br>nvarchar(225)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br></td><br><td valign="top" width="181"><br><br>如startEvent、userTask<br><br></td><br><br></tr><br><tr><br><td valign="top" width="162"><br><br>ASSIGNEE_<br><br></td><br><td valign="top" width="104"><br><br>签收人<br><br></td><br><td valign="top" width="125"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="181"><br><br>节点签收人<br><br></td><br><br></tr><br><tr><br><td valign="top" width="162"><br><br>START_TIME_<br><br></td><br><td valign="top" width="104"><br><br>开始时间<br><br></td><br><td valign="top" width="125"><br><br>datetime<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br></td><br><td valign="top" width="181"><br><br>2013-09-15 11:30:00<br><br></td><br><br></tr><br><tr><br><td valign="top" width="162"><br><br>END_TIME_<br><br></td><br><td valign="top" width="104"><br><br>结束时间<br><br></td><br><td valign="top" width="125"><br><br>datetime<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="181"><br><br>2013-09-15 11:30:00<br><br></td><br><br></tr><br><tr><br><td valign="top" width="162"><br><br>DURATION_<br><br></td><br><td valign="top" width="104"><br><br>耗时<br><br></td><br><td valign="top" width="125"><br><br>numeric(19,0)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="181"><br><br>毫秒值<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p> <strong>2.3.3  **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="253"><br><br>索引名称<br><br></td><br><td valign="top" width="220"><br><br>组成字段名称<br><br></td><br><td valign="top" width="85"><br><br>索引类型<br><br></td><br><td valign="top" width="104"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="253"><br><br>PRIMARY<br><br></td><br><td valign="top" width="220"><br><br>ID_<br><br></td><br><td valign="top" width="85"><br><br>Unique<br><br></td><br><td valign="top" width="104"><br><br>主键唯一索引<br><br></td><br><br></tr><br><tr><br><td valign="top" width="253"><br><br>ACT_IDX_HI_ACT_INST_START<br><br></td><br><td valign="top" width="220"><br><br>START_TIME_<br><br></td><br><td valign="top" width="85"><br><br></td><br><td valign="top" width="104"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="253"><br><br>ACT_IDX_HI_ACT_INST_END<br><br></td><br><td valign="top" width="220"><br><br>END_TIME_<br><br></td><br><td valign="top" width="85"><br><br></td><br><td valign="top" width="104"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="253"><br><br>ACT_IDX_HI_ACT_INST_PROCINST<br><br></td><br><td valign="top" width="220"><br><br>PROC_INST_ID_ 、 ACT_ID_<br><br></td><br><td valign="top" width="85"><br><br></td><br><td valign="top" width="104"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="253"><br><br>ACT_IDX_HI_ACT_INST_EXEC<br><br></td><br><td valign="top" width="220"><br><br>EXECUTION_ID_ 、 ACT_ID_<br><br></td><br><td valign="top" width="85"><br><br></td><br><td valign="top" width="104"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.4**</strong>  <strong><strong>历史附件表</strong></strong>( act_hi_attachment )**</p>
<p><strong>2.4.1  **</strong>简要描述**</p>
<p> 历史附件表。</p>
<p><strong>2.4.2  **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="161"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="104"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="126"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="44"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="45"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="191"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>ID_<br><br></td><br><td valign="top" width="104"><br><br>ID_<br><br></td><br><td valign="top" width="126"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="44"><br><br>√<br><br></td><br><td valign="top" width="45"><br><br></td><br><td valign="top" width="191"><br><br>主键ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>REV_<br><br></td><br><td valign="top" width="104"><br><br>乐观锁<br><br></td><br><td valign="top" width="126"><br><br><strong>integer</strong><br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="191"><br><br>Version<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>USER_ID_<br><br></td><br><td valign="top" width="104"><br><br>用户ID<br><br></td><br><td valign="top" width="126"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="191"><br><br>用户ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>NAME_<br><br></td><br><td valign="top" width="104"><br><br>名称<br><br></td><br><td valign="top" width="126"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="191"><br><br>附件名称<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>DESCRIPTION_<br><br></td><br><td valign="top" width="104"><br><br>描述<br><br></td><br><td valign="top" width="126"><br><br>nvarchar(4000)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="191"><br><br>描述<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>TYPE_<br><br></td><br><td valign="top" width="104"><br><br>类型<br><br></td><br><td valign="top" width="126"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="191"><br><br>附件类型<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>TASK_ID_<br><br></td><br><td valign="top" width="104"><br><br>任务实例ID<br><br></td><br><td valign="top" width="126"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="191"><br><br>节点实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="104"><br><br>流程实例ID<br><br></td><br><td valign="top" width="126"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="191"><br><br>流程实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>URL_<br><br></td><br><td valign="top" width="104"><br><br>URL_<br><br></td><br><td valign="top" width="126"><br><br>nvarchar(4000)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="191"><br><br>附件地址<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>CONTENT_ID_<br><br></td><br><td valign="top" width="104"><br><br>字节表的ID<br><br></td><br><td valign="top" width="126"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="191"><br><br>ACT_GE_BYTEARRAY的ID<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p> <strong>2.4.3  **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="253"><br><br>索引名称<br><br></td><br><td valign="top" width="220"><br><br>组成字段名称<br><br></td><br><td valign="top" width="85"><br><br>索引类型<br><br></td><br><td valign="top" width="104"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="253"><br><br>PRIMARY<br><br></td><br><td valign="top" width="220"><br><br>ID_<br><br></td><br><td valign="top" width="85"><br><br>Unique<br><br></td><br><td valign="top" width="104"><br><br>主键唯一索引<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.5**</strong>  <strong><strong>历史意见表</strong></strong>( act_hi_comment )**</p>
<p><strong>2.5.1  **</strong> <strong>**简要描述</strong></p>
<p> 历史意见表。</p>
<p><strong>2.5.2  **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="161"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="104"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="126"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="44"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="45"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="191"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>ID_<br><br></td><br><td valign="top" width="104"><br><br>ID_<br><br></td><br><td valign="top" width="126"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="44"><br><br>√<br><br></td><br><td valign="top" width="45"><br><br></td><br><td valign="top" width="191"><br><br>主键ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>TYPE_<br><br></td><br><td valign="top" width="104"><br><br>类型<br><br></td><br><td valign="top" width="126"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="191"><br><br>类型：event（事件）<br><br>comment（意见）<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>TIME_<br><br></td><br><td valign="top" width="104"><br><br>时间<br><br></td><br><td valign="top" width="126"><br><br>datetime<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br></td><br><td valign="top" width="191"><br><br>填写时间’<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>USER_ID_<br><br></td><br><td valign="top" width="104"><br><br>用户ID<br><br></td><br><td valign="top" width="126"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="191"><br><br>填写人<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>TASK_ID_<br><br></td><br><td valign="top" width="104"><br><br>节点任务ID<br><br></td><br><td valign="top" width="126"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="191"><br><br>节点实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="104"><br><br>流程实例ID<br><br></td><br><td valign="top" width="126"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="191"><br><br>流程实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>ACTION_<br><br></td><br><td valign="top" width="104"><br><br>行为类型<br><br></td><br><td valign="top" width="126"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="191"><br><br><strong>见备注1</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>MESSAGE_<br><br></td><br><td valign="top" width="104"><br><br>基本内容<br><br></td><br><td valign="top" width="126"><br><br>nvarchar(4000)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="191"><br><br>用于存放流程产生的信息，比如审批意见<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>FULL_MSG_<br><br></td><br><td valign="top" width="104"><br><br>全部内容<br><br></td><br><td valign="top" width="126"><br><br>varbinary(max)<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="45"><br><br>√<br><br></td><br><td valign="top" width="191"><br><br>附件地址<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p> <strong>2.5.3  **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="253"><br><br>索引名称<br><br></td><br><td valign="top" width="220"><br><br>组成字段名称<br><br></td><br><td valign="top" width="85"><br><br>索引类型<br><br></td><br><td valign="top" width="104"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="253"><br><br>PRIMARY<br><br></td><br><td valign="top" width="220"><br><br>ID_<br><br></td><br><td valign="top" width="85"><br><br>Unique<br><br></td><br><td valign="top" width="104"><br><br>主键唯一索引<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.6**</strong>  <strong><strong>历史详情表</strong></strong>( act_hi_detail )**</p>
<p><strong>2.6.1  **</strong> <strong>**简要描述</strong></p>
<p> 历史详情表：流程中产生的变量详细，包括控制流程流转的变量，业务表单中填写的流程需要用到的变量等。</p>
<p><strong>2.6.2  **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="160"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="103"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="134"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="43"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="44"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="205"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="160"><br><br>ID_<br><br></td><br><td valign="top" width="103"><br><br>ID_<br><br></td><br><td valign="top" width="134"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="43"><br><br>√<br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="205"><br><br>主键<br><br></td><br><br></tr><br><tr><br><td valign="top" width="160"><br><br>TYPE_<br><br></td><br><td valign="top" width="103"><br><br>类型<br><br></td><br><td valign="top" width="134"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="43"><br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="205"><br><br><strong>见备注2**</strong><br><strong><br><br></strong></td><br><br></tr><br><tr><br><td valign="top" width="160"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="103"><br><br>流程实例ID<br><br></td><br><td valign="top" width="134"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="43"><br><br></td><br><td valign="top" width="44"><br><br>√<br><br></td><br><td valign="top" width="205"><br><br>流程实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="160"><br><br>EXECUTION_ID_<br><br></td><br><td valign="top" width="103"><br><br>执行实例ID<br><br></td><br><td valign="top" width="134"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="43"><br><br></td><br><td valign="top" width="44"><br><br>√<br><br></td><br><td valign="top" width="205"><br><br>执行实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="160"><br><br>TASK_ID_<br><br></td><br><td valign="top" width="103"><br><br>任务实例ID<br><br></td><br><td valign="top" width="134"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="43"><br><br></td><br><td valign="top" width="44"><br><br>√<br><br></td><br><td valign="top" width="205"><br><br>任务实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="160"><br><br>ACT_INST_ID_<br><br></td><br><td valign="top" width="103"><br><br>节点实例ID<br><br></td><br><td valign="top" width="134"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="43"><br><br></td><br><td valign="top" width="44"><br><br>√<br><br></td><br><td valign="top" width="205"><br><br>ACT_HI_ACTINST表的ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="160"><br><br>NAME_<br><br></td><br><td valign="top" width="103"><br><br>名称<br><br></td><br><td valign="top" width="134"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="43"><br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="205"><br><br>名称<br><br></td><br><br></tr><br><tr><br><td valign="top" width="160"><br><br>VAR_TYPE_<br><br></td><br><td valign="top" width="103"><br><br>参数类型<br><br></td><br><td valign="top" width="134"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="43"><br><br></td><br><td valign="top" width="44"><br><br>√<br><br></td><br><td valign="top" width="205">

见备注3<strong>**  
</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="160"><br><br>REV_<br><br></td><br><td valign="top" width="103"><br><br>乐观锁<br><br></td><br><td valign="top" width="134"><br><br>int<br><br></td><br><td valign="top" width="43"><br><br></td><br><td valign="top" width="44"><br><br>√<br><br></td><br><td valign="top" width="205"><br><br>Version<br><br></td><br><br></tr><br><tr><br><td valign="top" width="160"><br><br>TIME_<br><br></td><br><td valign="top" width="103"><br><br>时间戳<br><br></td><br><td valign="top" width="134"><br><br>datetime<br><br></td><br><td valign="top" width="43"><br><br></td><br><td valign="top" width="44"><br><br></td><br><td valign="top" width="205"><br><br>创建时间<br><br></td><br><br></tr><br><tr><br><td valign="top" width="160"><br><br>BYTEARRAY_ID_<br><br></td><br><td valign="top" width="103"><br><br>字节表ID<br><br></td><br><td valign="top" width="134"><br><br>nvarchar<br><br></td><br><td valign="top" width="43"><br><br></td><br><td valign="top" width="44"><br><br>√<br><br></td><br><td valign="top" width="205"><br><br>ACT_GE_BYTEARRAY表的ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="160"><br><br>DOUBLE_<br><br></td><br><td valign="top" width="103"><br><br>DOUBLE_<br><br></td><br><td valign="top" width="134"><br><br>double precision<br><br></td><br><td valign="top" width="43"><br><br></td><br><td valign="top" width="44"><br><br>√<br><br></td><br><td valign="top" width="205"><br><br>存储变量类型为Double<br><br></td><br><br></tr><br><tr><br><td valign="top" width="160"><br><br>LONG_<br><br></td><br><td valign="top" width="103"><br><br>LONG_<br><br></td><br><td valign="top" width="134"><br><br>numeric<br><br></td><br><td valign="top" width="43"><br><br></td><br><td valign="top" width="44"><br><br>√<br><br></td><br><td valign="top" width="205"><br><br>存储变量类型为long<br><br></td><br><br></tr><br><tr><br><td valign="top" width="160"><br><br>TEXT_<br><br></td><br><td valign="top" width="103"><br><br>TEXT_<br><br></td><br><td valign="top" width="134"><br><br>nvarchar<br><br></td><br><td valign="top" width="43"><br><br></td><br><td valign="top" width="44"><br><br>√<br><br></td><br><td valign="top" width="205"><br><br>存储变量值类型为String<br><br></td><br><br></tr><br><tr><br><td valign="top" width="160"><br><br>TEXT2_<br><br></td><br><td valign="top" width="103"><br><br>TEXT2_<br><br></td><br><td valign="top" width="134"><br><br>nvarchar<br><br></td><br><td valign="top" width="43"><br><br></td><br><td valign="top" width="44"><br><br>√<br><br></td><br><td valign="top" width="205"><br><br>此处存储的是JPA持久化对象时，才会有值。此值为对象ID<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p> <strong>2.6.3  **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="253"><br><br>索引名称<br><br></td><br><td valign="top" width="220"><br><br>组成字段名称<br><br></td><br><td valign="top" width="85"><br><br>索引类型<br><br></td><br><td valign="top" width="104"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="253"><br><br>PRIMARY<br><br></td><br><td valign="top" width="220"><br><br>ID_<br><br></td><br><td valign="top" width="85"><br><br>Unique<br><br></td><br><td valign="top" width="104"><br><br>主键唯一索引<br><br></td><br><br></tr><br><tr><br><td valign="top" width="253"><br><br>ACT_IDX_HI_ACT_INST_START<br><br></td><br><td valign="top" width="220"><br><br>START_TIME_<br><br></td><br><td valign="top" width="85"><br><br></td><br><td valign="top" width="104"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="253"><br><br>ACT_IDX_HI_ACT_INST_END<br><br></td><br><td valign="top" width="220"><br><br>END_TIME_<br><br></td><br><td valign="top" width="85"><br><br></td><br><td valign="top" width="104"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="253"><br><br>ACT_IDX_HI_ACT_INST_PROCINST<br><br></td><br><td valign="top" width="220"><br><br>PROC_INST_ID_ 、 ACT_ID_<br><br></td><br><td valign="top" width="85"><br><br></td><br><td valign="top" width="104"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="253"><br><br>ACT_IDX_HI_ACT_INST_EXEC<br><br></td><br><td valign="top" width="220"><br><br>EXECUTION_ID_ 、 ACT_ID_<br><br></td><br><td valign="top" width="85"><br><br></td><br><td valign="top" width="104"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p>2.7<strong>  **</strong>历史流程人员表<strong><strong>( act_ru_identitylink )</strong></strong>  ** </p>
<p><strong>2.7.1  **</strong> <strong>**简要描述</strong></p>
<p> 任务参与者数据表。主要存储历史节点参与者的信息。</p>
<p><strong>2.7.2  **</strong>表结构说明**</p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="123"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="142"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="123"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="208"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="123"><br><br>ID_<br><br></td><br><td valign="top" width="142"><br><br>ID_<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="208"><br><br>ID_<br><br></td><br><br></tr><br><tr><br><td valign="top" width="123"><br><br>GROUP_ID_<br><br></td><br><td valign="top" width="142"><br><br>组ID<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>组ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="123"><br><br>TYPE_<br><br></td><br><td valign="top" width="142"><br><br>类型<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>备注4<br><br></td><br><br></tr><br><tr><br><td valign="top" width="123"><br><br>USER_ID_<br><br></td><br><td valign="top" width="142"><br><br>用户ID<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>用户ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="123"><br><br>TASK_ID_<br><br></td><br><td valign="top" width="142"><br><br>节点实例ID<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>节点实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="123"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="142"><br><br>流程实例ID<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>流程实例ID<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p> <strong>2.7.3  **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="246"><br><br>索引名称<br><br></td><br><td valign="top" width="221"><br><br>组成字段名称<br><br></td><br><td valign="top" width="72"><br><br>索引类型<br><br></td><br><td valign="top" width="103"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="246"><br><br>PRIMARY<br><br></td><br><td valign="top" width="221"><br><br>ID_<br><br></td><br><td valign="top" width="72"><br><br>Unique<br><br></td><br><td valign="top" width="103"><br><br>主键唯一索引<br><br></td><br><br></tr><br><tr><br><td width="246"><br><br>ACT_IDX_HI_IDENT_LNK_USER<br><br></td><br><td width="221"><br><br>USER_ID_<br><br></td><br><td valign="top" width="72"><br><br>Unique<br><br></td><br><td valign="top" width="103"><br><br></td><br><br></tr><br><tr><br><td width="246"><br><br>ACT_IDX_HI_IDENT_LNK_TASK<br><br></td><br><td width="221"><br><br>TASK_ID_<br><br></td><br><td valign="top" width="72"><br><br></td><br><td valign="top" width="103"><br><br></td><br><br></tr><br><tr><br><td width="246"><br><br>ACT_IDX_HI_IDENT_LNK_PROCINST<br><br></td><br><td width="221"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="72"><br><br></td><br><td valign="top" width="103"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.8**</strong>  <strong><strong>历史流程实例表（</strong></strong>act_hi_procinst<strong>**）</strong></p>
<p><strong>2.8.1  **</strong> <strong>**简要描述</strong></p>
<p> 历史流程实例表。</p>
<p><strong>2.8.2  **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="151"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="104"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="132"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="189"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="151"><br><br>ID_<br><br></td><br><td valign="top" width="104"><br><br>ID_<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="189"><br><br>主键ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="151"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="104"><br><br>流程实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="189"><br><br>流程实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="151"><br><br>BUSINESS_KEY_<br><br></td><br><td valign="top" width="104"><br><br>业务主键<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="189"><br><br>业务主键，业务表单的ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="151"><br><br>PROC_DEF_ID_<br><br></td><br><td valign="top" width="104"><br><br>流程定义ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="189"><br><br>流程定义ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="151"><br><br>START_TIME_<br><br></td><br><td valign="top" width="104"><br><br>开始时间<br><br></td><br><td valign="top" width="132"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="189"><br><br>开始时间<br><br></td><br><br></tr><br><tr><br><td valign="top" width="151"><br><br>END_TIME_<br><br></td><br><td valign="top" width="104"><br><br>结束时间<br><br></td><br><td valign="top" width="132"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="189"><br><br>结束时间<br><br></td><br><br></tr><br><tr><br><td valign="top" width="151"><br><br>DURATION_<br><br></td><br><td valign="top" width="104"><br><br>耗时<br><br></td><br><td valign="top" width="132"><br><br>Numeric(19)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="189"><br><br>耗时<br><br></td><br><br></tr><br><tr><br><td valign="top" width="151"><br><br>START_USER_ID_<br><br></td><br><td valign="top" width="104"><br><br>起草人<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="189"><br><br>起草人<br><br></td><br><br></tr><br><tr><br><td valign="top" width="151"><br><br>START_ACT_ID_<br><br></td><br><td valign="top" width="104"><br><br>开始节点ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="189"><br><br>起草环节ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="151"><br><br>END_ACT_ID_<br><br></td><br><td valign="top" width="104"><br><br>结束节点ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="189"><br><br>结束环节ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="151"><br><br>SUPER_PROCESS<br><br>_INSTANCE_ID_<br><br></td><br><td valign="top" width="104"><br><br>父流程实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="189"><br><br>父流程实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top"><br><br>DELETE_REASON_<br><br></td><br><td valign="top" width="104"><br><br>删除原因<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(4000)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="189"><br><br>删除原因<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.8.3  **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="251"><br><br>索引名称<br><br></td><br><td valign="top" width="226"><br><br>组成字段名称<br><br></td><br><td valign="top" width="84"><br><br>索引类型<br><br></td><br><td valign="top" width="101"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="251"><br><br>PRIMARY<br><br></td><br><td valign="top" width="226"><br><br>ID_<br><br></td><br><td valign="top" width="84"><br><br>Unique<br><br></td><br><td valign="top" width="101"><br><br>主键唯一索引<br><br></td><br><br></tr><br><tr><br><td valign="top" width="251"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="226"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="84"><br><br>Unique<br><br></td><br><td valign="top" width="101"><br><br>外键<br><br></td><br><br></tr><br><tr><br><td valign="top" width="251"><br><br>ACT_UNIQ_HI_BUS_KEY<br><br></td><br><td valign="top" width="226"><br><br>PROC_DEF_ID_,BUSINESS_KEY_<br><br></td><br><td valign="top" width="84"><br><br>Unique<br><br></td><br><td valign="top" width="101"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="251"><br><br>ACT_IDX_HI_PRO_INST_END<br><br></td><br><td valign="top" width="226"><br><br>END_TIME_<br><br></td><br><td valign="top" width="84"><br><br></td><br><td valign="top" width="101"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="251"><br><br>ACT_IDX_HI_PRO_I_BUSKEY<br><br></td><br><td valign="top" width="226"><br><br>BUSINESS_KEY_<br><br></td><br><td valign="top" width="84"><br><br></td><br><td valign="top" width="101"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.9**</strong>  <strong><strong>历史任务实例表</strong></strong>( act_hi_taskinst )**</p>
<p><strong>2.9.1  **</strong> <strong>**简要描述</strong></p>
<p> 历史任务实例表。</p>
<p><strong>2.9.2  **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="142"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="113"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="132"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="198"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>ID_<br><br></td><br><td valign="top" width="113"><br><br>ID_<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="198"><br><br>主键ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>PROC_DEF_ID_<br><br></td><br><td valign="top" width="113"><br><br>流程定义ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>流程定义ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>TASK_DEF_KEY_<br><br></td><br><td valign="top" width="113"><br><br>节点定义ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>节点定义ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="113"><br><br>流程实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>流程实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>EXECUTION_ID_<br><br></td><br><td valign="top" width="113"><br><br>执行实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>执行实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>NAME_<br><br></td><br><td valign="top" width="113"><br><br>名称<br><br></td><br><td valign="top" width="132"><br><br>varchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>名称<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>PARENT_TASK_ID_<br><br></td><br><td valign="top" width="113"><br><br>父节点实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>父节点实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>DESCRIPTION_<br><br></td><br><td valign="top" width="113"><br><br>描述<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(400)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>描述<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>OWNER_<br><br></td><br><td valign="top" width="113"><br><br>实际签收人 任务的拥有者<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>签收人（默认为空，只有在委托时才有值）<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>ASSIGNEE_<br><br></td><br><td valign="top" width="113"><br><br>签收人或被委托<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>签收人或被委托<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>START_TIME_<br><br></td><br><td valign="top" width="113"><br><br>开始时间<br><br></td><br><td valign="top" width="132"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="198"><br><br>开始时间<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>CLAIM_TIME_<br><br></td><br><td valign="top" width="113"><br><br>提醒时间<br><br></td><br><td valign="top" width="132"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>提醒时间<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>END_TIME_<br><br></td><br><td valign="top" width="113"><br><br>结束时间<br><br></td><br><td valign="top" width="132"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>结束时间<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>DURATION_<br><br></td><br><td valign="top" width="113"><br><br>耗时<br><br></td><br><td valign="top" width="132"><br><br>numeric(19)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>耗时<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>DELETE_REASON_<br><br></td><br><td valign="top" width="113"><br><br>删除原因<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(4000)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>删除原因(completed,deleted)<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>PRIORITY_<br><br></td><br><td valign="top" width="113"><br><br>优先级别<br><br></td><br><td valign="top" width="132"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>优先级别<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>DUE_DATE_<br><br></td><br><td valign="top" width="113"><br><br>过期时间<br><br></td><br><td valign="top" width="132"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>过期时间，表明任务应在多长时间内完成<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>FORM_KEY_<br><br></td><br><td valign="top" width="113"><br><br>节点定义的<br><br>formkey<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>desinger节点定义的<br><br>form_key属性<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p> <strong>2.9.3  **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="251"><br><br>索引名称<br><br></td><br><td valign="top" width="226"><br><br>组成字段名称<br><br></td><br><td valign="top" width="84"><br><br>索引类型<br><br></td><br><td valign="top" width="101"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="251"><br><br>PRIMARY<br><br></td><br><td valign="top" width="226"><br><br>ID_<br><br></td><br><td valign="top" width="84"><br><br>Unique<br><br></td><br><td valign="top" width="101"><br><br>主键唯一索引<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.10      **</strong> <strong><strong>历史变量表</strong></strong>( act_hi_varinst )**</p>
<p><strong>2.10.1 **</strong> <strong>**简要描述</strong></p>
<p> 历史变量表。</p>
<p><strong>2.10.2 **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="132"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="123"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="132"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="217"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="132"><br><br>ID_<br><br></td><br><td valign="top" width="123"><br><br>ID_<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="217"><br><br>ID_<br><br></td><br><br></tr><br><tr><br><td valign="top" width="132"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="123"><br><br>流程实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="217"><br><br>流程实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="132"><br><br>EXECUTION_ID_<br><br></td><br><td valign="top" width="123"><br><br>执行实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="217"><br><br>执行实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="132"><br><br>TASK_ID_<br><br></td><br><td valign="top" width="123"><br><br>任务实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="217"><br><br>任务实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="132"><br><br>NAME_<br><br></td><br><td valign="top" width="123"><br><br>名称<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="217"><br><br>参数名称(英文)<br><br></td><br><br></tr><br><tr><br><td valign="top" width="132"><br><br>VAR_TYPE_<br><br></td><br><td valign="top" width="123"><br><br>参数类型<br><br></td><br><td valign="top" width="132"><br><br>varchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="217"><br><br>备注5<br><br></td><br><br></tr><br><tr><br><td valign="top" width="132"><br><br>REV_<br><br></td><br><td valign="top" width="123"><br><br>乐观锁<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="217"><br><br>乐观锁 Version<br><br></td><br><br></tr><br><tr><br><td valign="top" width="132"><br><br>BYTEARRAY_ID_<br><br></td><br><td valign="top" width="123"><br><br>字节表ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(400)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="217"><br><br>ACT_GE_BYTEARRAY表的主键<br><br></td><br><br></tr><br><tr><br><td valign="top" width="132"><br><br>DOUBLE_<br><br></td><br><td valign="top" width="123"><br><br>DOUBLE_<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="217"><br><br>存储DoubleType类型的数据<br><br></td><br><br></tr><br><tr><br><td valign="top" width="132"><br><br>LONG_<br><br></td><br><td valign="top" width="123"><br><br>LONG_<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="217"><br><br>存储LongType类型的数据<br><br></td><br><br></tr><br><tr><br><td valign="top" width="132"><br><br>TEXT_<br><br></td><br><td valign="top" width="123"><br><br>TEXT_<br><br></td><br><td valign="top" width="132"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="217"><br><br>备注6<br><br></td><br><br></tr><br><tr><br><td valign="top" width="132"><br><br>TEXT2_<br><br></td><br><td valign="top" width="123"><br><br>TEXT2_<br><br></td><br><td valign="top" width="132"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="217"><br><br>此处存储的是JPA持久化对象时，才会有值。此值为对象ID<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.10.3 **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="264"><br><br>索引名称<br><br></td><br><td valign="top" width="171"><br><br>组成字段名称<br><br></td><br><td valign="top" width="94"><br><br>索引类型<br><br></td><br><td valign="top" width="132"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="264"><br><br>PRIMARY<br><br></td><br><td valign="top" width="171"><br><br>ID_<br><br></td><br><td valign="top" width="94"><br><br>Unique<br><br></td><br><td valign="top" width="132"><br><br>主键唯一索引<br><br></td><br><br></tr><br><tr><br><td valign="top" width="264"><br><br>ACT_IDX_HI_PROCVAR_PROC_INST<br><br></td><br><td valign="top" width="171"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="94"><br><br></td><br><td valign="top" width="132"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="264"><br><br>ACT_IDX_HI_PROCVAR_NAME_TYPE<br><br></td><br><td valign="top" width="171"><br><br>NAME_, VAR_TYPE_<br><br></td><br><td valign="top" width="94"><br><br></td><br><td valign="top" width="132"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.11      **</strong> <strong><strong>用户组信息表</strong></strong>( act_id_group )**</p>
<p><strong>2.11.1 **</strong> <strong>**简要描述</strong></p>
<p> 用来存储用户组信息。</p>
<p><strong>2.11.2 **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="142"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="113"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="132"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="198"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>ID_<br><br></td><br><td valign="top" width="113"><br><br>ID_<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="198"><br><br>主键ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>REV_<br><br></td><br><td valign="top" width="113"><br><br>乐观锁<br><br></td><br><td valign="top" width="132"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>乐观锁Version<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>NAME_<br><br></td><br><td valign="top" width="113"><br><br>名称<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>组名称<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>TYPE_<br><br></td><br><td valign="top" width="113"><br><br>类型<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>类型<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.11.3 **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="251"><br><br>索引名称<br><br></td><br><td valign="top" width="226"><br><br>组成字段名称<br><br></td><br><td valign="top" width="84"><br><br>索引类型<br><br></td><br><td valign="top" width="101"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="251"><br><br>PRIMARY<br><br></td><br><td valign="top" width="226"><br><br>ID_<br><br></td><br><td valign="top" width="84"><br><br>Unique<br><br></td><br><td valign="top" width="101"><br><br>主键唯一索引<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.12      **</strong> <strong><strong>用户扩展信息表</strong></strong>( act_id_info )**</p>
<p><strong>2.12.1 **</strong> <strong>**简要描述</strong></p>
<p> 用户扩展信息表。目前该表未用到<del>~</del>·</p>
<p><strong>2.12.2 **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="113"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="132"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="198"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td width="142"><br><br>ID_<br><br></td><br><td valign="top" width="113"><br><br>ID_<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="198"><br><br>主键ID<br><br></td><br><br></tr><br><tr><br><td width="142"><br><br>REV_<br><br></td><br><td valign="top" width="113"><br><br>乐观锁<br><br></td><br><td valign="top" width="132"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>乐观锁Version<br><br></td><br><br></tr><br><tr><br><td width="142"><br><br>USER_ID_<br><br></td><br><td valign="top" width="113"><br><br>用户ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br></td><br><br></tr><br><tr><br><td width="142"><br><br>TYPE_<br><br></td><br><td valign="top" width="113"><br><br>类型<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br></td><br><br></tr><br><tr><br><td width="142"><br><br>KEY_<br><br></td><br><td valign="top" width="113"><br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br></td><br><br></tr><br><tr><br><td width="142"><br><br>VALUE_<br><br></td><br><td valign="top" width="113"><br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br></td><br><br></tr><br><tr><br><td width="142"><br><br>PASSWORD_<br><br></td><br><td valign="top" width="113"><br><br></td><br><td valign="top" width="132"><br><br>Image<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br></td><br><br></tr><br><tr><br><td width="142"><br><br>PARENT_ID_<br><br></td><br><td valign="top" width="113"><br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.12.3 **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="251"><br><br>索引名称<br><br></td><br><td valign="top" width="226"><br><br>组成字段名称<br><br></td><br><td valign="top" width="84"><br><br>索引类型<br><br></td><br><td valign="top" width="101"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="251"><br><br>PRIMARY<br><br></td><br><td valign="top" width="226"><br><br>ID_<br><br></td><br><td valign="top" width="84"><br><br>Unique<br><br></td><br><td valign="top" width="101"><br><br>主键唯一索引<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.13      **</strong> <strong><strong>用户与分组对应信息表</strong></strong>( act_id_membership )**</p>
<p><strong>2.13.1 **</strong> <strong>**简要描述</strong></p>
<p> 用来保存用户的分组信息。</p>
<p><strong>2.13.2 **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="142"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="113"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="132"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="198"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>USER_ID<br><br></td><br><td valign="top" width="113"><br><br>用户ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="198"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>GROUP_ID<br><br></td><br><td valign="top" width="113"><br><br>用户组ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="198"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.13.3 **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="251"><br><br>索引名称<br><br></td><br><td valign="top" width="226"><br><br>组成字段名称<br><br></td><br><td valign="top" width="84"><br><br>索引类型<br><br></td><br><td valign="top" width="101"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="251"><br><br>PRIMARY<br><br></td><br><td valign="top" width="226"><br><br>USER_ID_, GROUP_ID_<br><br></td><br><td valign="top" width="84"><br><br>Unique<br><br></td><br><td valign="top" width="101"><br><br>主键唯一索引<br><br></td><br><br></tr><br><tr><br><td width="251"><br><br>ACT_FK_MEMB_GROUP<br><br></td><br><td width="226"><br><br>GROUP_ID_<br><br></td><br><td width="84"><br><br></td><br><td valign="top" width="101"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.14      **</strong> <strong><strong>用户信息表</strong></strong>( act_id_user )**</p>
<p><strong>2.14.1 **</strong> <strong>**简要描述</strong></p>
<p> 工作流用户信息</p>
<p><strong>2.14.2 **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="142"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="113"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="132"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="198"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>ID_<br><br></td><br><td valign="top" width="113"><br><br>ID_<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="198"><br><br>主键ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>REV_<br><br></td><br><td valign="top" width="113"><br><br>乐观锁<br><br></td><br><td valign="top" width="132"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>乐观锁Version<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>FIRST_<br><br></td><br><td valign="top" width="113"><br><br>姓<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>LAST_<br><br></td><br><td valign="top" width="113"><br><br>名<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>EMAIL_<br><br></td><br><td valign="top" width="113"><br><br>EMAIL_<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>PWD_<br><br></td><br><td valign="top" width="113"><br><br>密码<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>PICTURE_ID_<br><br></td><br><td valign="top" width="113"><br><br>图片ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.14.3 **</strong>索引说明**</p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="251"><br><br>索引名称<br><br></td><br><td valign="top" width="226"><br><br>组成字段名称<br><br></td><br><td valign="top" width="84"><br><br>索引类型<br><br></td><br><td valign="top" width="101"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="251"><br><br>PRIMARY<br><br></td><br><td valign="top" width="226"><br><br>ID_<br><br></td><br><td valign="top" width="84"><br><br>Unique<br><br></td><br><td valign="top" width="101"><br><br>主键唯一索引<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.15      **</strong> <strong><strong>部署信息表</strong></strong>( act_re_deployment )**</p>
<p><strong>2.15.1 **</strong> <strong>**简要描述</strong></p>
<p> 部署流程定义时需要被持久化保存下来的信息。</p>
<p><strong>2.15.2 **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="142"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="113"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="132"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="198"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>ID_<br><br></td><br><td valign="top" width="113"><br><br>ID_<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="198"><br><br>主键ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>NAME_<br><br></td><br><td valign="top" width="113"><br><br>部署名称<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>部署文件名<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>CATEGORY_<br><br></td><br><td valign="top" width="113"><br><br>分类<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>类别<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>DEPLOY_TIME_<br><br></td><br><td valign="top" width="113"><br><br>部署时间<br><br></td><br><td valign="top" width="132"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="198"><br><br>部署时间<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.15.3 **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="251"><br><br>索引名称<br><br></td><br><td valign="top" width="226"><br><br>组成字段名称<br><br></td><br><td valign="top" width="84"><br><br>索引类型<br><br></td><br><td valign="top" width="101"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="251"><br><br>PRIMARY<br><br></td><br><td valign="top" width="226"><br><br>ID_<br><br></td><br><td valign="top" width="84"><br><br>Unique<br><br></td><br><td valign="top" width="101"><br><br>主键唯一索引<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.16      **</strong> <strong><strong>流程设计模型部署表</strong></strong>( act_re_model )**</p>
<p><strong>2.16.1 **</strong> <strong>**简要描述</strong></p>
<p> 流程设计器设计流程后，保存数据到该表。</p>
<p><strong>2.16.2 **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="161"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="104"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="123"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="227"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>ID_<br><br></td><br><td valign="top" width="104"><br><br>ID_<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="227"><br><br>ID_<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>REV_<br><br></td><br><td valign="top" width="104"><br><br>乐观锁<br><br></td><br><td valign="top" width="123"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="227"><br><br>乐观锁<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>NAME_<br><br></td><br><td valign="top" width="104"><br><br>名称<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="227"><br><br>名称<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>KEY_<br><br></td><br><td valign="top" width="104"><br><br>KEY_<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="227"><br><br>分类，例如：<br><br><a href="http://www.mossle.com/docs/activiti/" target="_blank" rel="noopener">http://www.mossle.com/docs/activiti/</a><br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>CATEGORY_<br><br></td><br><td valign="top" width="104"><br><br>分类<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="227"><br><br>分类<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>CREATE_TIME_<br><br></td><br><td valign="top" width="104"><br><br>创建时间<br><br></td><br><td valign="top" width="123"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="227"><br><br>创建时间<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>LAST_UPDATE_TIME_<br><br></td><br><td valign="top" width="104"><br><br>最新修改时间<br><br></td><br><td valign="top" width="123"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="227"><br><br>最新修改时间<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>VERSION_<br><br></td><br><td valign="top" width="104"><br><br>版本<br><br></td><br><td valign="top" width="123"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="227"><br><br>版本<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>META_INFO_<br><br></td><br><td valign="top" width="104"><br><br>META_INFO_<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="227"><br><br>以json格式保存流程定义的信息<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>DEPLOYMENT_ID_<br><br></td><br><td valign="top" width="104"><br><br>部署ID<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="227"><br><br>部署ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>EDITOR_SOURCE_VALUE_ID_<br><br></td><br><td valign="top" width="104"><br><br></td><br><td valign="top" width="123"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="227"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="161"><br><br>EDITOR_SOURCE_EXTRA_VALUE_ID_<br><br></td><br><td valign="top" width="104"><br><br></td><br><td valign="top" width="123"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="227"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.16.3 **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="244"><br><br>索引名称<br><br></td><br><td valign="top" width="246"><br><br>组成字段名称<br><br></td><br><td valign="top" width="80"><br><br>索引类型<br><br></td><br><td valign="top" width="100"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="244"><br><br>PRIMARY<br><br></td><br><td valign="top" width="246"><br><br>ID_<br><br></td><br><td valign="top" width="80"><br><br>Unique<br><br></td><br><td valign="top" width="100"><br><br>主键唯一索引<br><br></td><br><br></tr><br><tr><br><td width="244"><br><br>ACT_FK_MODEL_SOURCE<br><br></td><br><td width="246"><br><br>EDITOR_SOURCE_VALUE_ID_<br><br></td><br><td valign="top" width="80"><br><br></td><br><td valign="top" width="100"><br><br></td><br><br></tr><br><tr><br><td width="244"><br><br>ACT_FK_MODEL_SOURCE_EXTRA<br><br></td><br><td width="246"><br><br>EDITOR_SOURCE_EXTRA_VALUE_ID_<br><br></td><br><td valign="top" width="80"><br><br></td><br><td valign="top" width="100"><br><br></td><br><br></tr><br><tr><br><td width="244"><br><br>ACT_FK_MODEL_DEPLOYMENT<br><br></td><br><td width="246"><br><br>DEPLOYMENT_ID_<br><br></td><br><td valign="top" width="80"><br><br></td><br><td valign="top" width="100"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.17      **</strong> <strong><strong>流程定义数据表</strong></strong>( act_re_procdef )**</p>
<p><strong>2.17.1 **</strong> <strong>**简要描述</strong></p>
<p> 业务流程定义数据表。此表和ACT_RE_DEPLOYMENT是多对一的关系，即，一个部署的bar包里可能包含多个流程定义文件，每个流程定义文件都会有一条记录在ACT_REPROCDEF表内，每个流程定义的数据，都会对于ACT_GE_BYTEARRAY表内的一个资源文件和PNG图片文件。和ACT_GE_BYTEARRAY的关联是通过程序用ACT_GE_BYTEARRAY.NAME与ACT_RE_PROCDEF.NAME_完成的，在数据库表结构中没有体现<strong>。</strong></p>
<p><strong>2.17.2 **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="199"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="113"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="132"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="208"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="199"><br><br>ID_<br><br></td><br><td valign="top" width="113"><br><br>ID_<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="208"><br><br>ID_<br><br></td><br><br></tr><br><tr><br><td valign="top" width="199"><br><br>REV_<br><br></td><br><td valign="top" width="113"><br><br>乐观锁<br><br></td><br><td valign="top" width="132"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>乐观锁<br><br></td><br><br></tr><br><tr><br><td valign="top" width="199"><br><br>CATEGORY_<br><br></td><br><td valign="top" width="113"><br><br>分类<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>流程定义的Namespace就是类别<br><br></td><br><br></tr><br><tr><br><td valign="top" width="199"><br><br>NAME_<br><br></td><br><td valign="top" width="113"><br><br>名称<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>名称<br><br></td><br><br></tr><br><tr><br><td valign="top" width="199"><br><br>KEY_<br><br></td><br><td valign="top" width="113"><br><br>定义的KEY<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="208"><br><br>流程定义ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="199"><br><br>VERSION_<br><br></td><br><td valign="top" width="113"><br><br>版本<br><br></td><br><td valign="top" width="132"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="208"><br><br>版本<br><br></td><br><br></tr><br><tr><br><td valign="top" width="199"><br><br>DEPLOYMENT_ID_<br><br></td><br><td valign="top" width="113"><br><br>部署表ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>部署表ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="199"><br><br>RESOURCE_NAME_<br><br></td><br><td valign="top" width="113"><br><br>bpmn文件名称<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(4000)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>流程bpmn文件名称<br><br></td><br><br></tr><br><tr><br><td valign="top" width="199"><br><br>DGRM_RESOURCE_NAME_<br><br></td><br><td valign="top" width="113"><br><br>png图片名称<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(4000)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>流程图片名称<br><br></td><br><br></tr><br><tr><br><td valign="top" width="199"><br><br>DESCRIPTION_<br><br></td><br><td valign="top" width="113"><br><br>描述<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(4000)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>描述<br><br></td><br><br></tr><br><tr><br><td valign="top" width="199"><br><br>HAS_START_FORM_KEY_<br><br></td><br><td valign="top" width="113"><br><br>是否存在开始节点formKey<br><br></td><br><td valign="top" width="132"><br><br>tinyint<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>start节点是否存在formKey<br><br> 0否  1是<br><br></td><br><br></tr><br><tr><br><td valign="top" width="199"><br><br>SUSPENSION_STATE_<br><br></td><br><td valign="top" width="113"><br><br>是否挂起<br><br></td><br><td valign="top" width="132"><br><br>tinyint<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>1 激活 2挂起<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.17.3 **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="229"><br><br>索引名称<br><br></td><br><td valign="top" width="222"><br><br>组成字段名称<br><br></td><br><td valign="top" width="78"><br><br>索引类型<br><br></td><br><td valign="top" width="142"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="229"><br><br>PRIMARY<br><br></td><br><td valign="top" width="222"><br><br>ID_<br><br></td><br><td valign="top" width="78"><br><br>Unique<br><br></td><br><td valign="top" width="142"><br><br>主键唯一索引<br><br></td><br><br></tr><br><tr><br><td width="229"><br><br>ACT_UNIQ_PROCDEF<br><br></td><br><td width="222"><br><br>KEY_, VERSION_<br><br></td><br><td width="78"><br><br>Unique<br><br></td><br><td width="142"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.18      **</strong>( act_ru_event_subscr )**</p>
<p><strong>2.18.1 **</strong> <strong>**简要描述</strong></p>
<p> 没有用到该表<del>~ 网上找到的资料</del>~不足之处请说明补充 谢谢~~</p>
<p><strong>2.18.2 **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="142"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="95"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="132"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="208"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>ID_<br><br></td><br><td valign="top" width="95"><br><br>事件ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="208"><br><br>事件ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>REV_<br><br></td><br><td valign="top" width="95"><br><br>版本<br><br></td><br><td valign="top" width="132"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>乐观锁Version<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>EVENT_TYPE_<br><br></td><br><td valign="top" width="95"><br><br>事件类型<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="208"><br><br>事件类型<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>EVENT_NAME_<br><br></td><br><td valign="top" width="95"><br><br>事件名称<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>事件名称<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>EXECUTION_ID_<br><br></td><br><td valign="top" width="95"><br><br>执行实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>执行实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="95"><br><br>流程实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>流程实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>ACTIVITY_ID_<br><br></td><br><td valign="top" width="95"><br><br>活动实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>活动实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>CONFIGURATION_<br><br></td><br><td width="95"><br><br>配置<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td width="208"><br><br>配置<br><br></td><br><br></tr><br><tr><br><td valign="top" width="142"><br><br>CREATED_<br><br></td><br><td width="95"><br><br>是否创建<br><br></td><br><td valign="top" width="132"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="208"><br><br>默认值 当前系统时间戳<br><br>CURRENT_TIMESTAMP<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.18.3 **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="229"><br><br>索引名称<br><br></td><br><td valign="top" width="222"><br><br>组成字段名称<br><br></td><br><td valign="top" width="78"><br><br>索引类型<br><br></td><br><td valign="top" width="142"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="229"><br><br>PRIMARY<br><br></td><br><td valign="top" width="222"><br><br>ID_<br><br></td><br><td valign="top" width="78"><br><br>Unique<br><br></td><br><td valign="top" width="142"><br><br>主键唯一索引<br><br></td><br><br></tr><br><tr><br><td valign="top" width="229"><br><br>ACT_IDX_EVENT_SUBSCR_CONFIG_<br><br></td><br><td valign="top" width="222"><br><br>CONFIGURATION_<br><br></td><br><td valign="top" width="78"><br><br></td><br><td valign="top" width="142"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="229"><br><br>ACT_FK_EVENT_EXEC<br><br></td><br><td valign="top" width="222"><br><br>EXECUTION_ID_<br><br></td><br><td valign="top" width="78"><br><br></td><br><td valign="top" width="142"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.19      **</strong> <strong><strong>运行时流程执行实例表</strong></strong>( act_ru_execution )**</p>
<p><strong>2.19.1 **</strong> <strong>**简要描述</strong></p>
<p>流程执行记录表。</p>
<p><strong>2.19.2 **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="170"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="142"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="123"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="208"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>ID_<br><br></td><br><td valign="top" width="142"><br><br>ID_<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="208"><br><br>ID_<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>REV_<br><br></td><br><td valign="top" width="142"><br><br>乐观锁<br><br></td><br><td valign="top" width="123"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>乐观锁<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="142"><br><br>流程实例ID<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="208"><br><br>流程实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>BUSINESS_KEY_<br><br></td><br><td valign="top" width="142"><br><br>业务主键ID<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>业务主键ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>PARENT_ID_<br><br></td><br><td valign="top" width="142"><br><br>父节点实例ID<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>父节点实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>PROC_DEF_ID_<br><br></td><br><td valign="top" width="142"><br><br>流程定义ID<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>流程定义ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>SUPER_EXEC_<br><br></td><br><td valign="top" width="142"><br><br>SUPER_EXEC_<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>SUPER_EXEC_<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>ACT_ID_<br><br></td><br><td valign="top" width="142"><br><br>节点实例ID<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>节点实例ID即<br><br>ACT_HI_ACTINST中ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>IS_ACTIVE_<br><br></td><br><td valign="top" width="142"><br><br>是否存活<br><br></td><br><td valign="top" width="123"><br><br>tinyint<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>是否存活<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>IS_CONCURRENT_<br><br></td><br><td valign="top" width="142"><br><br>是否并行<br><br></td><br><td valign="top" width="123"><br><br>tinyint<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>是否为并行(true/false）<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>IS_SCOPE_<br><br></td><br><td valign="top" width="142"><br><br>IS_SCOPE_<br><br></td><br><td valign="top" width="123"><br><br>tinyint<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>IS_SCOPE_<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>IS_EVENT_SCOPE_<br><br></td><br><td valign="top" width="142"><br><br>IS_EVENT_SCOPE_<br><br></td><br><td valign="top" width="123"><br><br>tinyint<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>IS_EVENT_SCOPE_<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>SUSPENSION_STATE_<br><br></td><br><td valign="top" width="142"><br><br>是否挂起<br><br></td><br><td valign="top" width="123"><br><br>tinyint<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>挂起状态   1激活 2挂起<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>CACHED_ENT_STATE_<br><br></td><br><td valign="top" width="142"><br><br></td><br><td valign="top" width="123"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong><br>2.19.3 **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="217"><br><br>索引名称<br><br></td><br><td valign="top" width="237"><br><br>组成字段名称<br><br></td><br><td valign="top" width="73"><br><br>索引类型<br><br></td><br><td valign="top" width="115"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="217"><br><br>PRIMARY<br><br></td><br><td valign="top" width="237"><br><br>ID_<br><br></td><br><td valign="top" width="73"><br><br>Unique<br><br></td><br><td valign="top" width="115"><br><br>主键唯一索引<br><br></td><br><br></tr><br><tr><br><td width="217"><br><br>ACT_UNIQ_RU_BUS_KEY<br><br></td><br><td width="237"><br><br>PROC_DEF_ID_, BUSINESS_KEY_<br><br></td><br><td valign="top" width="73"><br><br>Unique<br><br></td><br><td valign="top" width="115"><br><br></td><br><br></tr><br><tr><br><td width="217"><br><br>ACT_IDX_EXEC_BUSKEY<br><br></td><br><td width="237"><br><br>BUSINESS_KEY_<br><br></td><br><td valign="top" width="73"><br><br></td><br><td valign="top" width="115"><br><br></td><br><br></tr><br><tr><br><td width="217"><br><br>ACT_FK_EXE_PROCINST<br><br></td><br><td width="237"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="73"><br><br></td><br><td valign="top" width="115"><br><br></td><br><br></tr><br><tr><br><td width="217"><br><br>ACT_FK_EXE_PARENT<br><br></td><br><td width="237"><br><br>PARENT_ID_<br><br></td><br><td valign="top" width="73"><br><br></td><br><td valign="top" width="115"><br><br></td><br><br></tr><br><tr><br><td width="217"><br><br>ACT_FK_EXE_SUPER<br><br></td><br><td width="237"><br><br>SUPER_EXEC_<br><br></td><br><td valign="top" width="73"><br><br></td><br><td valign="top" width="115"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.20      **</strong> <strong><strong>运行时流程人员表</strong></strong>( act_ru_identitylink )**</p>
<p><strong>2.20.1 **</strong> <strong>**简要描述</strong></p>
<p>任务参与者数据表。主要存储当前节点参与者的信息。</p>
<p><strong>2.20.2 **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="113"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="142"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="123"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="208"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="113"><br><br>ID_<br><br></td><br><td valign="top" width="142"><br><br>ID_<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="208"><br><br>ID_<br><br></td><br><br></tr><br><tr><br><td valign="top" width="113"><br><br>REV_<br><br></td><br><td valign="top" width="142"><br><br>乐观锁<br><br></td><br><td valign="top" width="123"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>乐观锁<br><br></td><br><br></tr><br><tr><br><td valign="top" width="113"><br><br>GROUP_ID_<br><br></td><br><td valign="top" width="142"><br><br>组ID<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>组ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="113"><br><br>TYPE_<br><br></td><br><td valign="top" width="142"><br><br>类型<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>备注7<br><br></td><br><br></tr><br><tr><br><td valign="top" width="113"><br><br>USER_ID_<br><br></td><br><td valign="top" width="142"><br><br>用户ID<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>用户ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="113"><br><br>TASK_ID_<br><br></td><br><td valign="top" width="142"><br><br>节点实例ID<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>节点实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="113"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="142"><br><br>流程实例ID<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>流程实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="113"><br><br>PROC_DEF_ID_<br><br></td><br><td valign="top" width="142"><br><br>流程定义ID<br><br></td><br><td valign="top" width="123"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>流程定义ID<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong><br>2.20.3 **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="217"><br><br>索引名称<br><br></td><br><td valign="top" width="237"><br><br>组成字段名称<br><br></td><br><td valign="top" width="73"><br><br>索引类型<br><br></td><br><td valign="top" width="115"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="217"><br><br>PRIMARY<br><br></td><br><td valign="top" width="237"><br><br>ID_<br><br></td><br><td valign="top" width="73"><br><br>Unique<br><br></td><br><td valign="top" width="115"><br><br>主键唯一索引<br><br></td><br><br></tr><br><tr><br><td width="217"><br><br>ACT_IDX_IDENT_LNK_USER<br><br></td><br><td width="237"><br><br>USER_ID_<br><br></td><br><td valign="top" width="73"><br><br>Unique<br><br></td><br><td valign="top" width="115"><br><br></td><br><br></tr><br><tr><br><td width="217"><br><br>ACT_IDX_IDENT_LNK_GROUP<br><br></td><br><td width="237"><br><br>GROUP_ID_<br><br></td><br><td valign="top" width="73"><br><br></td><br><td valign="top" width="115"><br><br></td><br><br></tr><br><tr><br><td width="217"><br><br>ACT_IDX_ATHRZ_PROCEDEF<br><br></td><br><td width="237"><br><br>PROC_DEF_ID_<br><br></td><br><td valign="top" width="73"><br><br></td><br><td valign="top" width="115"><br><br></td><br><br></tr><br><tr><br><td width="217"><br><br>ACT_FK_TSKASS_TASK<br><br></td><br><td width="237"><br><br>TASK_ID_<br><br></td><br><td valign="top" width="73"><br><br></td><br><td valign="top" width="115"><br><br></td><br><br></tr><br><tr><br><td width="217"><br><br>ACT_FK_IDL_PROCINST<br><br></td><br><td width="237"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="73"><br><br></td><br><td valign="top" width="115"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.21      **</strong> <strong><strong>运行时定时任务数据表</strong></strong>( act_ru_job )**</p>
<p><strong>2.21.1 **</strong> <strong>**简要描述</strong></p>
<p>运行时定时任务数据表。用到网上找的资料 字段描述..</p>
<p><strong>2.21.2 **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="189"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="104"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="132"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="208"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="189"><br><br>ID_<br><br></td><br><td valign="top" width="104"><br><br>标识<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="208"><br><br>标识<br><br></td><br><br></tr><br><tr><br><td valign="top" width="189"><br><br>REV_<br><br></td><br><td valign="top" width="104"><br><br>版本<br><br></td><br><td valign="top" width="132"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>版本<br><br></td><br><br></tr><br><tr><br><td valign="top" width="189"><br><br>TYPE_<br><br></td><br><td valign="top" width="104"><br><br>类型<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="208"><br><br>类型<br><br></td><br><br></tr><br><tr><br><td valign="top" width="189"><br><br>LOCK_EXP_TIME_<br><br></td><br><td valign="top" width="104"><br><br>锁定释放时间<br><br></td><br><td valign="top" width="132"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>锁定释放时间<br><br></td><br><br></tr><br><tr><br><td valign="top" width="189"><br><br>LOCK_OWNER_<br><br></td><br><td valign="top" width="104"><br><br>挂起者<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>挂起者<br><br></td><br><br></tr><br><tr><br><td valign="top" width="189"><br><br>EXCLUSIVE_<br><br></td><br><td valign="top" width="104"><br><br></td><br><td valign="top" width="132"><br><br>bit<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="189"><br><br>EXECUTION_ID_<br><br></td><br><td valign="top" width="104"><br><br>执行实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>执行实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="189"><br><br>PROCESS_INSTANCE_ID_<br><br></td><br><td width="104"><br><br>流程实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td width="208"><br><br>流程实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="189"><br><br>PROC_DEF_ID_<br><br></td><br><td width="104"><br><br>流程定义ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td width="208"><br><br>流程定义ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="189"><br><br>RETRIES_<br><br></td><br><td width="104"><br><br></td><br><td valign="top" width="132"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td width="208"><br><br></td><br><br></tr><br><tr><br><td valign="top" width="189"><br><br>EXCEPTION_STACK_ID_<br><br></td><br><td width="104"><br><br>异常信息ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td width="208"><br><br>异常信息ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="189"><br><br>EXCEPTION_MSG_<br><br></td><br><td width="104"><br><br>异常信息<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(4000)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td width="208"><br><br>异常信息<br><br></td><br><br></tr><br><tr><br><td valign="top" width="189"><br><br>DUEDATE_<br><br></td><br><td width="104"><br><br>到期时间<br><br></td><br><td valign="top" width="132"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td width="208"><br><br>到期时间<br><br></td><br><br></tr><br><tr><br><td valign="top" width="189"><br><br>REPEAT_<br><br></td><br><td width="104"><br><br>重复<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td width="208"><br><br>重复<br><br></td><br><br></tr><br><tr><br><td valign="top" width="189"><br><br>HANDLER_TYPE_<br><br></td><br><td width="104"><br><br>处理类型<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td width="208"><br><br>处理类型<br><br></td><br><br></tr><br><tr><br><td valign="top" width="189"><br><br>HANDLER_CFG_<br><br></td><br><td width="104"><br><br></td><br><td valign="top" width="132"><br><br>nvarchar(4000)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>标识<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong><br>2.21.3 **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="197"><br><br>索引名称<br><br></td><br><td valign="top" width="171"><br><br>组成字段名称<br><br></td><br><td valign="top" width="100"><br><br>索引类型<br><br></td><br><td valign="top" width="118"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="197"><br><br>PRIMARY<br><br></td><br><td valign="top" width="171"><br><br>ID_<br><br></td><br><td valign="top" width="100"><br><br>Unique<br><br></td><br><td valign="top" width="118"><br><br>主键唯一索引<br><br></td><br><br></tr><br><tr><br><td width="197"><br><br>ACT_FK_JOB_EXCEPTION<br><br></td><br><td width="171"><br><br>EXCEPTION_STACK_ID_<br><br></td><br><td width="100"><br><br></td><br><td width="118"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.22      **</strong> <strong><strong>运行时任务节点表</strong></strong>( act_ru_task )**</p>
<p><strong>2.22.1 **</strong> <strong>**简要描述</strong></p>
<p>行时任务数据表。</p>
<p><strong>2.22.2 **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="170"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="123"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="132"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="208"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>ID_<br><br></td><br><td valign="top" width="123"><br><br>ID_<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="208"><br><br>ID_<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>REV_<br><br></td><br><td valign="top" width="123"><br><br>乐观锁<br><br></td><br><td valign="top" width="132"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>乐观锁<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>EXECUTION_ID_<br><br></td><br><td valign="top" width="123"><br><br>执行实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>执行实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="123"><br><br>流程实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>流程实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>PROC_DEF_ID_<br><br></td><br><td valign="top" width="123"><br><br>流程定义ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>流程定义ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>NAME_<br><br></td><br><td valign="top" width="123"><br><br>节点定义名称<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>节点定义名称<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>PARENT_TASK_ID_<br><br></td><br><td valign="top" width="123"><br><br>父节点实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>父节点实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>DESCRIPTION_<br><br></td><br><td valign="top" width="123"><br><br>节点定义描述<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(4000)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>节点定义描述<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>TASK_DEF_KEY_<br><br></td><br><td valign="top" width="123"><br><br>节点定义的KEY<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>任务定义的ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>OWNER_<br><br></td><br><td valign="top" width="123"><br><br>实际签收人<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>拥有者（一般情况下为空，只有在委托时才有值）<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>ASSIGNEE_<br><br></td><br><td valign="top" width="123"><br><br>签收人或委托人<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>签收人或委托人<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>DELEGATION_<br><br></td><br><td valign="top" width="123"><br><br>委托类型<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>备注8<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>PRIORITY_<br><br></td><br><td valign="top" width="123"><br><br>优先级别<br><br></td><br><td valign="top" width="132"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>优先级别，默认为：50<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>CREATE_TIME_<br><br></td><br><td valign="top" width="123"><br><br>创建时间<br><br></td><br><td valign="top" width="132"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>创建时间<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>DUE_DATE_<br><br></td><br><td valign="top" width="123"><br><br>过期时间<br><br></td><br><td valign="top" width="132"><br><br>datetime<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>耗时<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>SUSPENSION_STATE_<br><br></td><br><td valign="top" width="123"><br><br>是否挂起<br><br></td><br><td valign="top" width="132"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>1代表激活 2代表挂起<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong><br>2.22.3 **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="197"><br><br>索引名称<br><br></td><br><td valign="top" width="171"><br><br>组成字段名称<br><br></td><br><td valign="top" width="100"><br><br>索引类型<br><br></td><br><td valign="top" width="118"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="197"><br><br>PRIMARY<br><br></td><br><td valign="top" width="171"><br><br>ID_<br><br></td><br><td valign="top" width="100"><br><br>Unique<br><br></td><br><td valign="top" width="118"><br><br>主键唯一索引<br><br></td><br><br></tr><br><tr><br><td width="197"><br><br>ACT_IDX_TASK_CREATE<br><br></td><br><td width="171"><br><br>CREATE_TIME_<br><br></td><br><td width="100"><br><br></td><br><td width="118"><br><br></td><br><br></tr><br><tr><br><td width="197"><br><br>ACT_FK_TASK_EXE<br><br></td><br><td width="171"><br><br>EXECUTION_ID_<br><br></td><br><td width="100"><br><br></td><br><td width="118"><br><br></td><br><br></tr><br><tr><br><td width="197"><br><br>ACT_FK_TASK_PROCINST<br><br></td><br><td width="171"><br><br>PROC_INST_ID_<br><br></td><br><td width="100"><br><br></td><br><td width="118"><br><br></td><br><br></tr><br><tr><br><td width="197"><br><br>ACT_FK_TASK_PROCDEF<br><br></td><br><td width="171"><br><br>PROC_DEF_ID_<br><br></td><br><td width="100"><br><br></td><br><td width="118"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong>2.23      **</strong> <strong><strong>运行时流程变量数据表</strong></strong>( act_ru_variable )**</p>
<p><strong>2.23.1 **</strong> <strong>**简要描述</strong></p>
<p>运行时流程变量数据表。</p>
<p><strong>2.23.2 **</strong> <strong>**表结构说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="170"><br><br><strong>字段名称</strong><br><br></td><br><td valign="top" width="123"><br><br><strong>字段描述</strong><br><br></td><br><td valign="top" width="132"><br><br><strong>数据类型</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>主键</strong><br><br></td><br><td valign="top" width="47"><br><br><strong>为空</strong><br><br></td><br><td valign="top" width="208"><br><br><strong>取值说明</strong><br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>ID_<br><br></td><br><td valign="top" width="123"><br><br>ID_<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="208"><br><br>主键标识<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>REV_<br><br></td><br><td valign="top" width="123"><br><br>乐观锁<br><br></td><br><td valign="top" width="132"><br><br>int<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>乐观锁<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>TYPE_<br><br></td><br><td valign="top" width="123"><br><br>类型<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="208"><br><br>备注9<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>NAME_<br><br></td><br><td valign="top" width="123"><br><br>名称<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(255)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="208"><br><br>变量名称<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>EXECUTION_ID_<br><br></td><br><td valign="top" width="123"><br><br>执行实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>执行的ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>PROC_INST_ID_<br><br></td><br><td valign="top" width="123"><br><br>流程实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>流程实例ID<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>TASK_ID_<br><br></td><br><td valign="top" width="123"><br><br>节点实例ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>节点实例ID(Local）<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>BYTEARRAY_ID_<br><br></td><br><td valign="top" width="123"><br><br>字节表ID<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(64)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>字节表的ID<br><br>（ACT_GE_BYTEARRAY）<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>DOUBLE_<br><br></td><br><td valign="top" width="123"><br><br>DOUBLE_<br><br></td><br><td valign="top" width="132"><br><br>float<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>存储变量类型为Double<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>LONG_<br><br></td><br><td valign="top" width="123"><br><br>LONG_<br><br></td><br><td valign="top" width="132"><br><br>numeric(19)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>存储变量类型为long<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>TEXT_<br><br></td><br><td valign="top" width="123"><br><br>TEXT_<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(4000)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>‘存储变量值类型为String<br><br>   如此处存储持久化对象时，值jpa对象的class<br><br></td><br><br></tr><br><tr><br><td valign="top" width="170"><br><br>TEXT2_<br><br></td><br><td valign="top" width="123"><br><br>TEXT2_<br><br></td><br><td valign="top" width="132"><br><br>nvarchar(4000)<br><br></td><br><td valign="top" width="47"><br><br></td><br><td valign="top" width="47"><br><br>√<br><br></td><br><td valign="top" width="208"><br><br>此处存储的是JPA持久化对象时，才会有值。此值为对象ID<br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p><strong><br>2.23.3 **</strong> <strong>**索引说明</strong></p>
<table border="1" cellspacing="0" cellpadding="0"><br><tbody><br><tr><br><td valign="top" width="197"><br><br>索引名称<br><br></td><br><td valign="top" width="171"><br><br>组成字段名称<br><br></td><br><td valign="top" width="100"><br><br>索引类型<br><br></td><br><td valign="top" width="118"><br><br>索引说明<br><br></td><br><br></tr><br><tr><br><td valign="top" width="197"><br><br>PRIMARY<br><br></td><br><td valign="top" width="171"><br><br>ID_<br><br></td><br><td valign="top" width="100"><br><br>Unique<br><br></td><br><td valign="top" width="118"><br><br>主键唯一索引<br><br></td><br><br></tr><br><tr><br><td width="197"><br><br>ACT_IDX_VARIABLE_TASK_ID<br><br></td><br><td width="171"><br><br>TASK_ID_<br><br></td><br><td width="100"><br><br></td><br><td width="118"><br><br></td><br><br></tr><br><tr><br><td width="197"><br><br>ACT_FK_VAR_EXE<br><br></td><br><td width="171"><br><br>EXECUTION_ID_<br><br></td><br><td width="100"><br><br></td><br><td width="118"><br><br></td><br><br></tr><br><tr><br><td width="197"><br><br>ACT_FK_VAR_PROCINST<br><br></td><br><td width="171"><br><br>PROC_INST_ID_<br><br></td><br><td width="100"><br><br></td><br><td width="118"><br><br></td><br><br></tr><br><tr><br><td width="197"><br><br>ACT_FK_VAR_BYTEARRAY<br><br></td><br><td width="171"><br><br>BYTEARRAY_ID_<br><br></td><br><td width="100"><br><br></td><br><td width="118"><br><br></td><br><br></tr><br><br></tbody><br><br></table>

<p>备注：</p>
<p>备注1：行为类型。值为下列内容中的一种：</p>
<p> AddUserLink、DeleteUserLink、AddGroupLink、DeleteGroupLink、AddComment、AddAttachment、DeleteAttachment</p>
<p><strong>备注2**</strong>：<strong><strong>类型</strong></strong>:**</p>
<p>   FormProperty,   //表单</p>
<p>   VariableUpdate  //参数</p>
<p><strong>备注3、5、9**</strong>：参数<strong><strong>类型</strong></strong>:**</p>
<p> jpa-entity、boolean、bytes、serializable(可序列化)、自定义type(根据你自身配置)、</p>
<p> CustomVariableType、date、double、integer、long、null、short、string</p>
<p>备注4、7：类型，主要分为以下几种：</p>
<p>   assignee 、  candidate 、 owner 、starter 、participant</p>
<p>备注6：</p>
<p> 存储变量值类型为String，如此处存储持久化对象时，值jpa对象的class</p>
<p>备注8：委托类型，DelegationState分为两种：PENDING，RESOLVED。如无委托则为空</p>
<p>引自 <a href="http://www.cnblogs.com/llzgzljl/archive/2013/10/07/3356108.html" target="_blank" rel="noopener">http://www.cnblogs.com/llzgzljl/archive/2013/10/07/3356108.html</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/20/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><span class="page-number current">21</span><a class="page-number" href="/page/22/">22</a><span class="space">&hellip;</span><a class="page-number" href="/page/42/">42</a><a class="extend next" rel="next" href="/page/22/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4" alt="庞国明">
            
              <p class="site-author-name" itemprop="name">庞国明</p>
              <p class="site-description motion-element" itemprop="description">Software make the information world run, and programer make the softeware run.</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">420</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">267</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/pangguoming" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:pangguoming@yeah.net" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/pangguoming" target="_blank" title="Twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://stackoverflow.com/users/1570700/pangguoming" target="_blank" title="StackOverflow">
                      
                        <i class="fa fa-fw fa-stack-overflow"></i>StackOverflow</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://instagram.com/pangguoming" target="_blank" title="Instagram">
                      
                        <i class="fa fa-fw fa-instagram"></i>Instagram</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">庞国明</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  







<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    
<!-- END LOCAL -->

    

    







  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.4"></script>



  

  

  

  
  

  

  

  

</body>
</html>
