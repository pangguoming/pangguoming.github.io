<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="Software make the information world run, and programer make the softeware run.">
<meta property="og:type" content="website">
<meta property="og:title" content="庞国明-博客">
<meta property="og:url" content="http://pangguoming.com/page/32/index.html">
<meta property="og:site_name" content="庞国明-博客">
<meta property="og:description" content="Software make the information world run, and programer make the softeware run.">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="庞国明-博客">
<meta name="twitter:description" content="Software make the information world run, and programer make the softeware run.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://pangguoming.com/page/32/"/>





  <title>庞国明-博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">庞国明-博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">此心用度八千遍，不曾厌倦</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/e417e1d3.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/e417e1d3.html" itemprop="url">CSS判断不同分辨率显示不同宽度布局CSS3技术支持IE6到IE8</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-16T14:48:00+08:00">
                2017-01-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://www.divcss5.com/" target="_blank" rel="noopener">CSS</a>判断不同分辨率浏览器（显示屏幕）显示不同宽度布局CSS3技术支持IE6到IE8。将用到css3 @media样式进行判断，但IE9以下版本不支持CSS3技术，这里DIVCSS5给大家介绍通过JS实现低版本的浏览器也支持CSS3实现实用布局。</p>
<h3 id="一、实用范围描述-TOP"><a href="#一、实用范围描述-TOP" class="headerlink" title="一、实用范围描述   -   TOP"></a>一、实用范围描述   -   <a href="http://www.divcss5.com/jiqiao/j662.shtml#top" target="_blank" rel="noopener">TOP</a></h3><p><a href="http://www.divcss5.com/" target="_blank" rel="noopener">CSS DIV</a>网页布局中当分辨率小于等于1024px（像素）时，<a href="http://www.divcss5.com/" target="_blank" rel="noopener">DIV布局</a>对象显示1000px宽度，当分辨率大于1024px时候显示1200px宽度等需求。使用CSS实现改变浏览器显示宽度从而实现布局的网页宽度动态改变变化（网页宽度自动随浏览器显示宽度而变宽变窄）。</p>
<p>随着发展，越来越多的电脑用户显示屏分辨率越来越高，但有的用户还是使用1024px的分辨率的显示屏（根据几个浏览器分辨率统计平台得到数据现在使用1200分辨率以下用户极少，但我们CSS布局时仍然需要至少考虑1024px分辨率用户），如果网页布局宽度固定到1200px，1024分辨率用户浏览网页时浏览器下方会出现滚动条，为了解决这个问题，大家可以通过使用CSS3样式判断用户浏览器宽度从而调用不同布局宽度。</p>
<h3 id="二、使用CSS单词与语法-TOP"><a href="#二、使用CSS单词与语法-TOP" class="headerlink" title="二、使用CSS单词与语法   -   TOP"></a>二、使用CSS单词与语法   -   <a href="http://www.divcss5.com/jiqiao/j662.shtml#top" target="_blank" rel="noopener">TOP</a></h3><p>@media screen and (判断属性){ CSS样式选择器 }</p>
<p>这里注意花括号里装要变化<a href="http://www.divcss5.com/rumen/r61.shtml" target="_blank" rel="noopener">CSS样式选择器</a>。</p>
<h3 id="三、不同分辨率显示不同宽度样式案例-TOP"><a href="#三、不同分辨率显示不同宽度样式案例-TOP" class="headerlink" title="三、不同分辨率显示不同宽度样式案例   -   TOP"></a>三、不同分辨率显示不同宽度样式案例   -   <a href="http://www.divcss5.com/jiqiao/j662.shtml#top" target="_blank" rel="noopener">TOP</a></h3><p>1、<a href="http://www.divcss5.com/" target="_blank" rel="noopener">DIVCSS</a>小案例描述<br>我们首先设置一个<a href="http://www.divcss5.com/rumen/r319.shtml" target="_blank" rel="noopener">DIV盒子</a><a href="http://www.divcss5.com/jiqiao/j4.shtml" target="_blank" rel="noopener">CSS命名</a>为“.abc”，设置其<a href="http://www.divcss5.com/rumen/r123.shtml" target="_blank" rel="noopener">高度</a>为300px，<a href="http://www.divcss5.com/rumen/r120.shtml" target="_blank" rel="noopener">css边框</a>为黑色；以及设置margin:0 auto布局居中。预先设置这两个样式是为了便于观察。</p>
<p>我们通过手动拖拽浏览器显示<a href="http://www.divcss5.com/rumen/r119.shtml" target="_blank" rel="noopener">宽度</a>，然后观察此盒子宽度变化情况，当浏览器宽度调节到宽度不大于500px时，对应此盒子宽度显示100px；调节浏览器宽度不大于901px时，显示“.abc”对应盒子宽度显示200px;当调节浏览器宽度大于1201px时，盒子对象宽度显示1200px；当小于1200px时候显示宽度为900px。</p>
<p>2、CSS代码</p>
<ol>
<li>.abc{ height:300px; border:1px solid #000; margin:0 auto} </li>
<li>@media screen and (min-width: 1201px) { </li>
<li>.abc {width: 1200px}  </li>
<li>} </li>
<li>/<em> <a href="http://www.divcss5.com/rumen/r32.shtml" target="_blank" rel="noopener">css注释</a>：设置了浏览器宽度不小于1201px时 abc 显示1200px宽度 </em>/ </li>
<li></li>
<li>@media screen and (max-width: 1200px) { </li>
<li>.abc {width: 900px}  </li>
<li>} </li>
<li>/<em> 设置了浏览器宽度不大于1200px时 abc 显示900px宽度 </em>/ </li>
<li></li>
<li>@media screen and (max-width: 901px) { </li>
<li>.abc {width: 200px;}  </li>
<li>} </li>
<li>/<em> 设置了浏览器宽度不大于901px时 abc 显示200px宽度 </em>/ </li>
<li></li>
<li>@media screen and (max-width: 500px) { </li>
<li>.abc {width: 100px;}  </li>
<li>} </li>
<li>/<em> 设置了浏览器宽度不大于500px时 abc 显示100px宽度 </em>/ </li>
</ol>
<p>需要注意是<a href="http://www.divcss5.com/rumen/r95.shtml" target="_blank" rel="noopener">CSS代码</a>顺序，由大到小排版CSS（判断浏览器宽度越大越放前），这样是因为逻辑关系，@media 判断CSS排错将导致判断失效。</p>
<p>3、<a href="http://www.divcss5.com/html/h393.shtml" target="_blank" rel="noopener">HTML代码</a></p>
<ol>
<li>&lt;!DOCTYPE html<span class="tag">&gt; </span></li>
<li><span class="tag">&lt;<span class="tag-name">html<span class="tag">&gt; </span></span></span></li>
<li><span class="tag">&lt;<span class="tag-name">head<span class="tag">&gt; </span></span></span></li>
<li><span class="tag">&lt;<span class="tag-name">meta <span class="attribute">charset=<span class="attribute-value">“utf-8” <span class="tag">/&gt; </span></span></span></span></span></li>
<li><span class="tag">&lt;<span class="tag-name">title<span class="tag">&gt;无标题文档<span class="tag">&lt;/<span class="tag-name">title<span class="tag">&gt; </span></span></span></span></span></span></li>
<li><span class="tag">&lt;<span class="tag-name">style<span class="tag">&gt; </span></span></span></li>
<li>.abc{ height:300px; border:1px solid #000; margin:0 auto} </li>
<li>@media screen and (<a href="http://www.divcss5.com/rumen/r423.shtml" target="_blank" rel="noopener">min-width</a>: 1201px) { </li>
<li>.abc {width: 1200px}  </li>
<li>} </li>
<li>/<em> 设置了浏览器宽度不小于1201px时 abc 显示1200px宽度 </em>/ </li>
<li></li>
<li>@media screen and (<a href="http://www.divcss5.com/rumen/r423.shtml" target="_blank" rel="noopener">max-width</a>: 1200px) { </li>
<li>.abc {width: 900px}  </li>
<li>} </li>
<li>/<em> 设置了浏览器宽度不大于1200px时 abc 显示900px宽度 </em>/ </li>
<li></li>
<li>@media screen and (max-width: 900px) { </li>
<li>.abc {width: 200px;}  </li>
<li>} </li>
<li>/<em> 设置了浏览器宽度不大于900px时 abc 显示200px宽度 </em>/ </li>
<li></li>
<li>@media screen and (max-width: 500px) { </li>
<li>.abc {width: 100px;}  </li>
<li>} </li>
<li>/<em> 设置了浏览器宽度不大于500px时 abc 显示100px宽度 </em>/ </li>
<li></li>
<li><span class="tag">&lt;/<span class="tag-name">style<span class="tag">&gt; </span></span></span></li>
<li><span class="tag">&lt;/<span class="tag-name">head<span class="tag">&gt; </span></span></span></li>
<li><span class="tag">&lt;<span class="tag-name">body<span class="tag">&gt; </span></span></span></li>
<li><span class="tag">&lt;<span class="tag-name">div <span class="attribute">class=<span class="attribute-value">“abc”<span class="tag">&gt;DIVCSS5实例：我这个DIV宽度会随浏览器宽度变化哦，试试改变浏览器宽度<span class="tag">&lt;/<span class="tag-name">div<span class="tag">&gt; </span></span></span></span></span></span></span></span></li>
<li><span class="tag">&lt;/<span class="tag-name">body<span class="tag">&gt; </span></span></span></li>
<li><span class="tag">&lt;/<span class="tag-name">html<span class="tag">&gt; </span></span></span></li>
</ol>
<p>4、为了兼容IE9以下版本浏览器需要加入一个google的JS，当然可以下载引人html</p>
<ol>
<li>&lt;!–[if lt IE 9]<span class="tag">&gt; </span></li>
<li><span class="tag">&lt;<span class="tag-name">script <span class="attribute">src=<span class="attribute-value">“<a href="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js&quot;" target="_blank" rel="noopener">http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js&quot;</a><span class="tag">&gt;<span class="tag">&lt;/<span class="tag-name">script<span class="tag">&gt; </span></span></span></span></span></span></span></span></li>
<li>&lt;![endif]–<span class="tag">&gt; </span></li>
</ol>
<p>将JS代码放入&lt;/<a href="http://www.divcss5.com/html/h62.shtml" target="_blank" rel="noopener">head</a>&gt;标签前即可，这里直接引人google在线JS，你可以下载此JS文件重新HTML引人即可。</p>
<p>5、完美兼容各大浏览器<a href="http://www.divcss5.com/html/" target="_blank" rel="noopener">HTML</a>+CSS+JS源代码</p>
<ol>
<li>&lt;!DOCTYPE html<span class="tag">&gt; </span></li>
<li><span class="tag">&lt;<span class="tag-name">html<span class="tag">&gt; </span></span></span></li>
<li><span class="tag">&lt;<span class="tag-name">head<span class="tag">&gt; </span></span></span></li>
<li><span class="tag">&lt;<span class="tag-name">meta <span class="attribute">charset=<span class="attribute-value">“utf-8” <span class="tag">/&gt; </span></span></span></span></span></li>
<li><span class="tag">&lt;<span class="tag-name">title<span class="tag">&gt;无标题文档<span class="tag">&lt;/<span class="tag-name">title<span class="tag">&gt; </span></span></span></span></span></span></li>
<li><span class="tag">&lt;<span class="tag-name">style<span class="tag">&gt; </span></span></span></li>
<li>.abc{ height:300px; border:1px solid #000; margin:0 auto} </li>
<li>@media screen and (min-width: 1201px) { </li>
<li>.abc {width: 1200px}  </li>
<li>} </li>
<li>/<em> <a href="http://www.divcss5.com/rumen/r32.shtml" target="_blank" rel="noopener">css 注释</a>说明：设置了浏览器宽度不小于1201px时 abc 显示1200px宽度 </em>/ </li>
<li></li>
<li>@media screen and (max-width: 1200px) { </li>
<li>.abc {width: 900px}  </li>
<li>} </li>
<li>/<em> 设置了浏览器宽度不大于1200px时 abc 显示900px宽度 </em>/ </li>
<li></li>
<li>@media screen and (max-width: 900px) { </li>
<li>.abc {width: 200px;}  </li>
<li>} </li>
<li>/<em> 设置了浏览器宽度不大于900px时 abc 显示200px宽度 </em>/ </li>
<li></li>
<li>@media screen and (max-width: 500px) { </li>
<li>.abc {width: 100px;}  </li>
<li>} </li>
<li>/<em> 设置了浏览器宽度不大于500px时 abc 显示100px宽度 </em>/ </li>
<li></li>
<li><span class="tag">&lt;/<span class="tag-name">style<span class="tag">&gt; </span></span></span></li>
<li>&lt;!–[if lt IE 9]<span class="tag">&gt; </span></li>
<li><span class="tag">&lt;<span class="tag-name">script <span class="attribute">src=<span class="attribute-value">“<a href="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js&quot;" target="_blank" rel="noopener">http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js&quot;</a><span class="tag">&gt;<span class="tag">&lt;/<span class="tag-name">script<span class="tag">&gt; </span></span></span></span></span></span></span></span></li>
<li>&lt;![endif]–<span class="tag">&gt; </span></li>
<li><span class="tag">&lt;/<span class="tag-name">head<span class="tag">&gt; </span></span></span></li>
<li><span class="tag">&lt;<span class="tag-name">body<span class="tag">&gt; </span></span></span></li>
<li><span class="tag">&lt;<span class="tag-name">div <span class="attribute">class=<span class="attribute-value">“abc”<span class="tag">&gt;DIVCSS5实例：我这个<a href="http://www.divcss5.com/wenji/w447.shtml" target="_blank" rel="noopener">DIV宽度</a>会随浏览器宽度变化哦，试试改变浏览器宽度<span class="tag">&lt;/<span class="tag-name">div<span class="tag">&gt; </span></span></span></span></span></span></span></span></li>
<li><span class="tag">&lt;/<span class="tag-name">body<span class="tag">&gt; </span></span></span></li>
<li><span class="tag">&lt;/<span class="tag-name">html<span class="tag">&gt; </span></span></span></li>
</ol>
<p>6、效果截图<br>因为设置宽度原因，不便截图，大家可直接查看在线案例，通过拖拽改变浏览器宽度观察效果。</p>
<p>7、在线演示：<a href="http://www.divcss5.com/yanshi/2014/2014031601/" target="_blank" rel="noopener">查看案例</a></p>
<p>8、完整案例代码文件打包下载</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/f6caabb7.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/f6caabb7.html" itemprop="url">Hibernate详细教程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-15T23:07:00+08:00">
                2017-01-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一、搭建Hibernate环境"><a href="#一、搭建Hibernate环境" class="headerlink" title="一、搭建Hibernate环境"></a><strong>一、搭建Hibernate环境</strong></h2><p>1.在src目录下创建hibernate.cfg.xml配置文件</p>
<p>PS:文件的名字不能改！</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE hibernate-configuration PUBLIC </span><br><span class="line">          &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; </span><br><span class="line">          &quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;&gt;</span><br><span class="line">&lt;hibernate-configuration&gt;</span><br><span class="line">    &lt;session-factory&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- configure the database setting --&gt;</span><br><span class="line">        &lt;property name=&quot;connection.username&quot;&gt;root&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;connection.password&quot;&gt;1234&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;</span><br><span class="line">        &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/test&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- configure the hibernate setting --&gt;</span><br><span class="line">        &lt;!-- transaction is supported by org.hibernate.dialect.MySQL5InnoDBDialect --&gt;</span><br><span class="line">        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/property&gt;  </span><br><span class="line">&lt;!-- show sql in the console --&gt;</span><br><span class="line">        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;  </span><br><span class="line">　　　　 &lt;!-- create and update the database automaticlly --&gt;</span><br><span class="line">        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- javax.persistence.validation.mode默认情况下是auto的，就是说如果不设置的话它是会自动去你的classpath下面找一个</span><br><span class="line">        bean-validation**包，但是找不到，所以beanvalitionFactory错误 --&gt;</span><br><span class="line">        &lt;property name=&quot;javax.persistence.validation.mode&quot;&gt;none&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/session-factory&gt;</span><br><span class="line">&lt;/hibernate-configuration&gt;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>编写实体类，以Person类为例</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">package test.Hibernate.model;</span><br><span class="line"></span><br><span class="line">import java.util.HashSet;</span><br><span class="line">import java.util.Set;</span><br><span class="line"></span><br><span class="line">public class Person &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Person [id=&quot; + id + &quot;, name=&quot; + name + &quot;]&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    public int getId() &#123;</span><br><span class="line">        return id;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setId(int id) &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    public Set&lt;String&gt; getAddress() &#123;</span><br><span class="line">        return address;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setAddress(Set&lt;String&gt; address) &#123;</span><br><span class="line">        this.address = address;</span><br><span class="line">    &#125;</span><br><span class="line">    private int id;</span><br><span class="line">    private String name;</span><br><span class="line">    private Set&lt;String&gt; address = new HashSet&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3.编写Person.hbm.xml实体类配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span><br><span class="line">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;</span><br><span class="line">&lt;!-- </span><br><span class="line">    Mapping file autogenerated by MyEclipse Persistence Tools</span><br><span class="line">--&gt;</span><br><span class="line">&lt;hibernate-mapping package=&quot;test.Hibernate.model&quot;&gt;</span><br><span class="line">    &lt;class name=&quot;Person&quot; table=&quot;person&quot;&gt;</span><br><span class="line">         &lt;id column=&quot;id&quot; name=&quot;id&quot; type=&quot;int&quot;&gt;</span><br><span class="line">             &lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt;</span><br><span class="line">         &lt;/id&gt;</span><br><span class="line"></span><br><span class="line">         &lt;property name=&quot;name&quot; column=&quot;name&quot; length=&quot;50&quot; type=&quot;string&quot;&gt;&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">         &lt;set name=&quot;address&quot; table=&quot;address&quot;&gt;</span><br><span class="line">             &lt;key column=&quot;personId&quot;&gt;&lt;/key&gt;</span><br><span class="line">             &lt;element column=&quot;address&quot; type=&quot;string&quot; length=&quot;50&quot;&gt;&lt;/element&gt;</span><br><span class="line">         &lt;/set&gt;</span><br><span class="line">    &lt;/class&gt;</span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure>
<p>4.在hibernate.cfg.xml中加入映射信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;mapping resource=&quot;test/Hibernate/model/Person.hbm.xml&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>5.使用MyEclipse生成SessionFactory</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">package test.Hibernate.SessionFactory;</span><br><span class="line"></span><br><span class="line">import org.hibernate.HibernateException;</span><br><span class="line">import org.hibernate.Session;</span><br><span class="line">import org.hibernate.cfg.Configuration;</span><br><span class="line">import org.hibernate.service.ServiceRegistry;</span><br><span class="line">import org.hibernate.service.ServiceRegistryBuilder;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Configures and provides access to Hibernate sessions, tied to the</span><br><span class="line"> * current thread of execution.  Follows the Thread Local Session</span><br><span class="line"> * pattern, see &#123;@link http://hibernate.org/42.html &#125;.</span><br><span class="line"> */</span><br><span class="line">public class SessionFactory &#123;</span><br><span class="line"></span><br><span class="line">    /** </span><br><span class="line">     * Location of hibernate.cfg.xml file.</span><br><span class="line">     * Location should be on the classpath as Hibernate uses  </span><br><span class="line">     * #resourceAsStream style lookup for its configuration file. </span><br><span class="line">     * The default classpath location of the hibernate config file is </span><br><span class="line">     * in the default package. Use #setConfigFile() to update </span><br><span class="line">     * the location of the configuration file for the current session.   </span><br><span class="line">     */</span><br><span class="line">    private static final ThreadLocal&lt;Session&gt; threadLocal = new ThreadLocal&lt;Session&gt;();</span><br><span class="line">    private static org.hibernate.SessionFactory sessionFactory;</span><br><span class="line"></span><br><span class="line">    private static Configuration configuration = new Configuration();</span><br><span class="line">    private static ServiceRegistry serviceRegistry; </span><br><span class="line"></span><br><span class="line">    static &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            configuration.configure();</span><br><span class="line">            serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();</span><br><span class="line">            sessionFactory = configuration.buildSessionFactory(serviceRegistry);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            System.err.println(&quot;%%%% Error Creating SessionFactory %%%%&quot;);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    private SessionFactory() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns the ThreadLocal Session instance.  Lazy initialize</span><br><span class="line">     * the &lt;code&gt;SessionFactory&lt;/code&gt; if needed.</span><br><span class="line">     *</span><br><span class="line">     *  @return Session</span><br><span class="line">     *  @throws HibernateException</span><br><span class="line">     */</span><br><span class="line">    public static Session getSession() throws HibernateException &#123;</span><br><span class="line">        Session session = (Session) threadLocal.get();</span><br><span class="line"></span><br><span class="line">        if (session == null || !session.isOpen()) &#123;</span><br><span class="line">            if (sessionFactory == null) &#123;</span><br><span class="line">                rebuildSessionFactory();</span><br><span class="line">            &#125;</span><br><span class="line">            session = (sessionFactory != null) ? sessionFactory.openSession()</span><br><span class="line">                    : null;</span><br><span class="line">            threadLocal.set(session);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return session;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     *  Rebuild hibernate session factory</span><br><span class="line">     *</span><br><span class="line">     */</span><br><span class="line">    public static void rebuildSessionFactory() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            configuration.configure();</span><br><span class="line">            serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();</span><br><span class="line">            sessionFactory = configuration.buildSessionFactory(serviceRegistry);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            System.err.println(&quot;%%%% Error Creating SessionFactory %%%%&quot;);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     *  Close the single hibernate session instance.</span><br><span class="line">     *</span><br><span class="line">     *  @throws HibernateException</span><br><span class="line">     */</span><br><span class="line">    public static void closeSession() throws HibernateException &#123;</span><br><span class="line">        Session session = (Session) threadLocal.get();</span><br><span class="line">        threadLocal.set(null);</span><br><span class="line"></span><br><span class="line">        if (session != null) &#123;</span><br><span class="line">            session.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     *  return session factory</span><br><span class="line">     *</span><br><span class="line">     */</span><br><span class="line">    public static org.hibernate.SessionFactory getSessionFactory() &#123;</span><br><span class="line">        return sessionFactory;</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     *  return hibernate configuration</span><br><span class="line">     *</span><br><span class="line">     */</span><br><span class="line">    public static Configuration getConfiguration() &#123;</span><br><span class="line">        return configuration;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>6.编写测试类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">package test.Hibernate.dao;</span><br><span class="line"></span><br><span class="line">import org.hibernate.Session;</span><br><span class="line">import org.hibernate.Transaction;</span><br><span class="line">import org.junit.Test;</span><br><span class="line"></span><br><span class="line">import test.Hibernate.SessionFactory.SessionFactory;</span><br><span class="line">import test.Hibernate.model.Person;</span><br><span class="line"></span><br><span class="line">public class PersonDao &#123;</span><br><span class="line">    @Test</span><br><span class="line">    public void add()&#123;</span><br><span class="line">        Session session = SessionFactory.getSession();</span><br><span class="line">        Transaction tr = session.beginTransaction();</span><br><span class="line">        //----------------------------------------------</span><br><span class="line"></span><br><span class="line">        Person p = new Person();</span><br><span class="line">        p.setName(&quot;test&quot;);</span><br><span class="line">        p.getAddress().add(&quot;firstAddr&quot;);</span><br><span class="line">        p.getAddress().add(&quot;secondAddr&quot;);</span><br><span class="line">        p.getAddress().add(&quot;thirdAddr&quot;);</span><br><span class="line">        p.getAddress().add(&quot;fourthAddr&quot;);        </span><br><span class="line">        session.save(p);</span><br><span class="line"></span><br><span class="line">        //----------------------------------------------</span><br><span class="line">        tr.commit();</span><br><span class="line">        SessionFactory.closeSession();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void get()&#123;</span><br><span class="line">        Session session = SessionFactory.getSession();</span><br><span class="line">        Transaction tr = session.beginTransaction();</span><br><span class="line">        //----------------------------------------------</span><br><span class="line"></span><br><span class="line">        Person p = (Person)session.get(Person.class, 2);</span><br><span class="line">        System.out.println(p);</span><br><span class="line"></span><br><span class="line">        //----------------------------------------------</span><br><span class="line">        tr.commit();</span><br><span class="line">        SessionFactory.closeSession();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="二、主键生成策略"><a href="#二、主键生成策略" class="headerlink" title="二、主键生成策略"></a><strong>二、主键生成策略</strong></h2><p><strong>identity</strong>：使用数据库的自动增长策略，不是所有数据库都支持，比如oracle就不支持。</p>
<p><strong>sequence</strong>：在 DB2，PostgreSQL，Oracle，SAP DB，McKoi 中使用序列（sequence）在使用Oracle数据库时可以使用这一个。</p>
<p><strong>hilo</strong>:使用高低位算法生成主键值。只需要一张额外表，所有的数据都支持。</p>
<p><strong>native</strong>:根据底层数据库的能力选择 identity、sequence 或者 hilo中的一个。</p>
<p><strong>assigned</strong>：手工指定主键值。</p>
<p><strong>uuid</strong>：由Hibernate自动生成UUID并指定为主键值。</p>
<h2 id="三、Hibernate映射关系配置"><a href="#三、Hibernate映射关系配置" class="headerlink" title="三、Hibernate映射关系配置"></a><strong>三、Hibernate映射关系配置</strong></h2><p>1.一对一映射（以主键关联作为示例）User与IdCard（有外键方）的XML配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span><br><span class="line">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;</span><br><span class="line">&lt;!-- </span><br><span class="line">    Mapping file autogenerated by MyEclipse Persistence Tools</span><br><span class="line">--&gt;</span><br><span class="line">&lt;hibernate-mapping package=&quot;test.Hibernate.model&quot;&gt;</span><br><span class="line">    &lt;class name=&quot;User&quot; table=&quot;user&quot;&gt;</span><br><span class="line">        &lt;id name=&quot;id&quot; type=&quot;int&quot; column=&quot;id&quot;&gt;</span><br><span class="line">            &lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt;</span><br><span class="line">        &lt;/id&gt;</span><br><span class="line"></span><br><span class="line">        &lt;property name=&quot;name&quot; type=&quot;string&quot; column=&quot;name&quot;/&gt;        </span><br><span class="line"></span><br><span class="line">         &lt;set name=&quot;address&quot; table=&quot;address&quot;&gt;    </span><br><span class="line">            &lt;key column=&quot;userId&quot;&gt;&lt;/key&gt;</span><br><span class="line">            &lt;element column=&quot;address&quot; type=&quot;string&quot;&gt;&lt;/element&gt;</span><br><span class="line">        &lt;/set&gt;</span><br><span class="line"></span><br><span class="line">        &lt;one-to-one name=&quot;idCard&quot; class=&quot;IdCard&quot; cascade=&quot;all&quot;&gt;&lt;/one-to-one&gt;     </span><br><span class="line">    &lt;/class&gt;</span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span><br><span class="line">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;</span><br><span class="line">&lt;!-- </span><br><span class="line">    Mapping file autogenerated by MyEclipse Persistence Tools</span><br><span class="line">--&gt;</span><br><span class="line">&lt;hibernate-mapping package=&quot;test.Hibernate.model&quot;&gt;</span><br><span class="line">    &lt;class name=&quot;IdCard&quot; table=&quot;idCard&quot;&gt;</span><br><span class="line">        &lt;id name=&quot;id&quot; type=&quot;int&quot; column=&quot;id&quot;&gt;</span><br><span class="line">            &lt;generator class=&quot;foreign&quot;&gt;</span><br><span class="line">                &lt;param name=&quot;property&quot;&gt;user&lt;/param&gt;</span><br><span class="line">            &lt;/generator&gt;</span><br><span class="line">        &lt;/id&gt;</span><br><span class="line">        &lt;property name=&quot;number&quot; type=&quot;string&quot; column=&quot;number&quot;/&gt;        </span><br><span class="line">        &lt;one-to-one name=&quot;user&quot; class=&quot;User&quot; constrained=&quot;true&quot;&gt;&lt;/one-to-one&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/class&gt;</span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure>
<p>2.一对多，多对一（以Father和Children为例）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span><br><span class="line">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;</span><br><span class="line">&lt;hibernate-mapping package=&quot;test.Hibernate.model&quot;&gt;</span><br><span class="line">    &lt;class name=&quot;Father&quot; table=&quot;father&quot;&gt;</span><br><span class="line">        &lt;id name=&quot;id&quot; type=&quot;int&quot; column=&quot;id&quot; &gt;</span><br><span class="line">            &lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt;</span><br><span class="line">        &lt;/id&gt;</span><br><span class="line">        &lt;property name=&quot;name&quot; type=&quot;string&quot; column=&quot;name&quot;/&gt;</span><br><span class="line">        &lt;set name=&quot;children&quot; cascade=&quot;all&quot;&gt;</span><br><span class="line">              &lt;key column=&quot;fatherId&quot;&gt;&lt;/key&gt;</span><br><span class="line">            &lt;one-to-many class=&quot;Children&quot;/&gt;</span><br><span class="line">        &lt;/set&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/class&gt;</span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span><br><span class="line">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;</span><br><span class="line">&lt;hibernate-mapping package=&quot;test.Hibernate.model&quot;&gt;</span><br><span class="line">    &lt;class name=&quot;Children&quot; table=&quot;children&quot;&gt;</span><br><span class="line">        &lt;id name=&quot;id&quot; type=&quot;int&quot; column=&quot;id&quot; &gt;</span><br><span class="line">            &lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt;</span><br><span class="line">        &lt;/id&gt;</span><br><span class="line">        &lt;property name=&quot;name&quot; type=&quot;string&quot; column=&quot;name&quot;/&gt;</span><br><span class="line">        &lt;many-to-one name=&quot;father&quot; class=&quot;Father&quot; column=&quot;fatherId&quot;&gt;&lt;/many-to-one&gt;      </span><br><span class="line">    &lt;/class&gt;</span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure>
<p>3.多对多（以Student和Teacher为例）</p>
<p>PS:有一方的set集合要标明inverse=true（后面会讲）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span><br><span class="line">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;</span><br><span class="line">&lt;!-- </span><br><span class="line">    Mapping file autogenerated by MyEclipse Persistence Tools</span><br><span class="line">--&gt;</span><br><span class="line">&lt;hibernate-mapping package=&quot;test.Hibernate.model&quot;&gt;</span><br><span class="line">    &lt;class name=&quot;Student&quot; table=&quot;student&quot;&gt;</span><br><span class="line">        &lt;id name=&quot;id&quot; type=&quot;int&quot; column=&quot;id&quot;&gt;</span><br><span class="line">            &lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt;</span><br><span class="line">        &lt;/id&gt;</span><br><span class="line">        &lt;property name=&quot;name&quot; type=&quot;string&quot; column=&quot;name&quot; length=&quot;20&quot;/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;set name=&quot;teachers&quot; table=&quot;student_teacher&quot; inverse=&quot;false&quot; &gt;</span><br><span class="line">               &lt;key column=&quot;studentId&quot;&gt;&lt;/key&gt;</span><br><span class="line">               &lt;many-to-many class=&quot;Teacher&quot; column=&quot;teacherId&quot;&gt;&lt;/many-to-many&gt;              </span><br><span class="line">           &lt;/set&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/class&gt;</span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span><br><span class="line">&quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;&gt;</span><br><span class="line">&lt;!-- </span><br><span class="line">    Mapping file autogenerated by MyEclipse Persistence Tools</span><br><span class="line">--&gt;</span><br><span class="line">&lt;hibernate-mapping package=&quot;test.Hibernate.model&quot;&gt;</span><br><span class="line">    &lt;class name=&quot;Teacher&quot; table=&quot;teacher&quot;&gt;</span><br><span class="line">        &lt;id name=&quot;id&quot; type=&quot;int&quot; column=&quot;id&quot;&gt;</span><br><span class="line">            &lt;generator class=&quot;native&quot;&gt;&lt;/generator&gt;</span><br><span class="line">        &lt;/id&gt;</span><br><span class="line">        &lt;property name=&quot;name&quot; column=&quot;name&quot; type=&quot;string&quot; length=&quot;20&quot;&gt;&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">       &lt;set name=&quot;students&quot; table=&quot;student_teacher&quot; inverse=&quot;true&quot; cascade=&quot;all&quot;&gt;</span><br><span class="line">               &lt;key column=&quot;teacherId&quot;&gt;&lt;/key&gt;</span><br><span class="line">               &lt;many-to-many class=&quot;Student&quot; column=&quot;studentId&quot;&gt;&lt;/many-to-many&gt;</span><br><span class="line">       &lt;/set&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/class&gt;</span><br><span class="line">&lt;/hibernate-mapping&gt;</span><br></pre></td></tr></table></figure>
<h2 id="四、inverse和cascade的区别（个人总结，有不对还望指正）"><a href="#四、inverse和cascade的区别（个人总结，有不对还望指正）" class="headerlink" title="四、inverse和cascade的区别（个人总结，有不对还望指正）"></a><strong>四、inverse和cascade的区别（个人总结，有不对还望指正）</strong></h2><p>1.inverse=false在一对多删除时是把孩子的外键设置为null，然后删除父亲，孩子不删除，而casecade=all在一对多删除时是把孩子的外键设置为null，然后删除父亲，然后再删除孩子</p>
<p>2.many to many的时候由一方维护，所以一方要设置inverse=false，但是inverse=true的另一方直接删除会出错，这个时候可以用casecade完成级联删除</p>
<p>3.inverse=false只用于set等集合属性，在one to one关系中可以用casecade完成级联删除</p>
<h2 id="五、使用C3P0连接池"><a href="#五、使用C3P0连接池" class="headerlink" title="五、使用C3P0连接池"></a><strong>五、使用C3P0连接池</strong></h2><p>1.需要额外导入3个jar包</p>
<p><img src="http://pangguoming.com/blog/images/7ab57ae4-e934-445c-bf35-20d29cd5de46.png" alt=""></p>
<p>2.在hibernate.cfg.xml中加入C3P0配置信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- C3P0连接池设定--&gt;</span><br><span class="line">&lt;!-- 使用c3p0连接池  配置连接池提供的供应商--&gt;</span><br><span class="line">&lt;property name=&quot;connection.provider_class&quot;&gt;org.hibernate.connection.C3P0ConnectionProvider&lt;/property&gt;</span><br><span class="line">&lt;!--在连接池中可用的数据库连接的最少数目 --&gt;</span><br><span class="line">&lt;property name=&quot;c3p0.min_size&quot;&gt;5&lt;/property&gt;</span><br><span class="line">&lt;!--在连接池中所有数据库连接的最大数目  --&gt;</span><br><span class="line">&lt;property name=&quot;c3p0.max_size&quot;&gt;20&lt;/property&gt;</span><br><span class="line">&lt;!--设定数据库连接的过期时间,以秒为单位,</span><br><span class="line">如果连接池中的某个数据库连接处于空闲状态的时间超过了timeout时间,就会从连接池中清除 --&gt;</span><br><span class="line">&lt;property name=&quot;c3p0.timeout&quot;&gt;120&lt;/property&gt;</span><br><span class="line"> &lt;!--每3000秒检查所有连接池中的空闲连接 以秒为单位--&gt;</span><br><span class="line">&lt;property name=&quot;c3p0.idle_test_period&quot;&gt;3000&lt;/property&gt;</span><br></pre></td></tr></table></figure>
<h2 id="六、HQL语句"><a href="#六、HQL语句" class="headerlink" title="六、HQL语句"></a>六、HQL语句</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    public void HQLSearch()&#123;</span><br><span class="line">        Session session = SessionFactory.getSession();</span><br><span class="line">        Transaction tr = session.beginTransaction();</span><br><span class="line">        //-----------------------------------------</span><br><span class="line"></span><br><span class="line">        //common search with where</span><br><span class="line">//        String hql= &quot;select e.id,e.name from User e where e.id&gt;=5 and e.id&lt;=9&quot;;</span><br><span class="line">//        Query query = session.createQuery(hql);</span><br><span class="line">//        List list = query.list();        </span><br><span class="line">//        for(Object o : list)&#123;            </span><br><span class="line">//            System.out.println(Arrays.toString((Object[])o));</span><br><span class="line">//        &#125;</span><br><span class="line"></span><br><span class="line">        //paging search</span><br><span class="line">//        String hql= &quot;select e.id,e.name from User e&quot;;</span><br><span class="line">//        Query query = session.createQuery(hql);</span><br><span class="line">//        query.setFirstResult(0);</span><br><span class="line">//        query.setMaxResults(10);</span><br><span class="line">//        List list = query.list();        </span><br><span class="line">//        for(Object o : list)&#123;            </span><br><span class="line">//            System.out.println(Arrays.toString((Object[])o));</span><br><span class="line">//        &#125;</span><br><span class="line"></span><br><span class="line">        //search with parameters</span><br><span class="line">//        String hql= &quot;select e.id,e.name from User e where id&gt;=? and id&lt;=?&quot;;</span><br><span class="line">//        Query query = session.createQuery(hql)</span><br><span class="line">//                .setParameter(0, 1)</span><br><span class="line">//                .setParameter(1, 3);</span><br><span class="line">//        List list = query.list();        </span><br><span class="line">//        for(Object o : list)&#123;            </span><br><span class="line">//            System.out.println(Arrays.toString((Object[])o));</span><br><span class="line">//        &#125;</span><br><span class="line"></span><br><span class="line">        //search with parameters whose type is collection</span><br><span class="line">//        String hql= &quot;select e.id,e.name from User e where id in (:ids)&quot;;</span><br><span class="line">//        Query query = session.createQuery(hql)</span><br><span class="line">//                .setParameterList(&quot;ids&quot;,new Object[]&#123;1,2,3,8&#125; );</span><br><span class="line">//        List list = query.list();    </span><br><span class="line">//        for(Object o : list)&#123;            </span><br><span class="line">//            System.out.println(Arrays.toString((Object[])o));</span><br><span class="line">//        &#125;</span><br><span class="line"></span><br><span class="line">        //-----------------------------------------</span><br><span class="line">        tr.commit();</span><br><span class="line">        SessionFactory.closeSession();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="七、DML语句"><a href="#七、DML语句" class="headerlink" title="七、DML语句"></a>七、DML语句</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    public void DML()&#123;</span><br><span class="line">        Session session = SessionFactory.getSession();</span><br><span class="line">        Transaction tr = session.beginTransaction();</span><br><span class="line">        //-----------------------------------------</span><br><span class="line">        User u = (User)session.get(User.class, 11);</span><br><span class="line"></span><br><span class="line">        String sql = &quot;update User set name=? where id&gt;?&quot;;</span><br><span class="line">        int result = session.createQuery(sql)</span><br><span class="line">                .setParameter(0, &quot;updated&quot;)</span><br><span class="line">                .setParameter(1, 10)</span><br><span class="line">                .executeUpdate();</span><br><span class="line">        System.out.println(&quot;count of update:&quot;+result);</span><br><span class="line"></span><br><span class="line">        //the object&apos;s status in session was not updated when the object in database have been changed,so if you want</span><br><span class="line">        //to get the updated object in session,you should use method &quot;refresh&quot;.</span><br><span class="line">        session.refresh(u);</span><br><span class="line"></span><br><span class="line">        System.out.println(u);</span><br><span class="line"></span><br><span class="line">        //-----------------------------------------</span><br><span class="line">        tr.commit();</span><br><span class="line">        SessionFactory.closeSession();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="八、开启二级缓存"><a href="#八、开启二级缓存" class="headerlink" title=" 八、开启二级缓存"></a><strong> 八、开启二级缓存</strong></h2><ol>
<li>需要导入以下jar包</li>
</ol>
<p><img src="http://pangguoming.com/blog/images/2097fd1b-e755-4be4-bd58-2ae2b53fb892.png" alt=""></p>
<p>2.在hibernate.cfg.xml中加入以下配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 使用二级缓存，默认是未打开的。 --&gt;</span><br><span class="line">&lt;!-- 指定要使用的缓存的提供商，这也就打开了二级缓存--&gt; </span><br><span class="line">&lt;property name=&quot;hibernate.cache.use_second_level_cache&quot;&gt;true&lt;/property&gt;  </span><br><span class="line">&lt;property name=&quot;hibernate.cache.region.factory_class&quot;&gt;org.hibernate.cache.ehcache.EhCacheRegionFactory&lt;/property&gt;</span><br><span class="line">&lt;!-- 开启使用查询缓存 --&gt;</span><br><span class="line">&lt;property name=&quot;cache.use_query_cache&quot;&gt;true&lt;/property&gt;</span><br><span class="line">&lt;!-- 指定要使用二级缓存的实体类 --&gt;</span><br><span class="line">&lt;class-cache usage=&quot;read-write&quot; class=&quot;test.Hibernate.model.Person&quot; /&gt;</span><br></pre></td></tr></table></figure>
<h2 id="九、Hibernate对象状态及转化"><a href="#九、Hibernate对象状态及转化" class="headerlink" title="九、Hibernate对象状态及转化"></a>九、Hibernate对象状态及转化</h2><p><img src="http://pangguoming.com/blog/images/24adf51d-18ae-4a7d-b6a3-ff81d14ae3b7.png" alt=""></p>
<h1 id="Hibernate详细教程"><a href="#Hibernate详细教程" class="headerlink" title="Hibernate详细教程"></a><a href="http://www.cnblogs.com/sunniest/p/4539817.html" target="_blank" rel="noopener">Hibernate详细教程</a></h1>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/e8b1bb9.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/e8b1bb9.html" itemprop="url">【UE4+Vive】学习笔记1</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-04T10:58:00+08:00">
                2017-01-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>16.9.10<br>为了做房产项目，这两天开始学习Unreal Engine 4。之前一直用unity，但是视觉效果一直不满意，听说虚幻4的效果更好，就来试一试水。  </p>
<p>1.安装UE4  </p>
<p>参考资料一：</p>
<p><a href="http://v.youku.com/v_show/id_XOTM4Nzk4OTEy.html?beta&amp;f=23742789&amp;from=y1.7-1.4" target="_blank" rel="noopener">http://v.youku.com/v_show/id_XOTM4Nzk4OTEy.html?beta&amp;f=23742789&amp;from=y1.7-1.4</a></p>
<p>进入UE4官网，点击右上角的GET UNREAL，下载安装得到登录器Epic Games Launcher，打开登录器，更新后，下载虚幻引擎最新版，自动安装后可以启动UE4。  </p>
<p>2.新建VR工程项目  </p>
<p>参考资料二：<br><a href="http://docs.unrealengine.com/latest/INT/Platforms/SteamVR/QuickStart/2/index.html" target="_blank" rel="noopener">http://docs.unrealengine.com/latest/INT/Platforms/SteamVR/QuickStart/2/index.html</a>  </p>
<p>学习前期主要靠软件自带的教程和官方文档，这些资料都有中文的，效率提高了很多。但是学到蓝图部分就要把语言设置为英文，你懂的。设置方法是：Edit - Edit Preferences - General - Region &amp; Language，Editor Culture设为English。  </p>
<p>由于我已经设置过SteamVR，所以直接跳到建立工程。具体步骤看参考资料二，把SteamVR Development和后面有关VR的内容看完，照着做一遍。  </p>
<p>注意新建的VR_Pawn要拖到场景中才有用。就像用unity的SteamVR Plugin一样，蓝图就像预设体，VR_Pawn相当于[CameraRig],Component有Camera、MotionController_Left、MotionController_Right。  </p>
<p>手柄模型用 HTC Vive Template，以后再说。  </p>
<p>3.简单射线传送  </p>
<p>参考资料三：<a href="http://www.bilibili.com/video/av5552611/" target="_blank" rel="noopener">http://www.bilibili.com/video/av5552611/</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/a172c0fd.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/a172c0fd.html" itemprop="url">nginx 域名绑定 域名， nginx 域名绑定 端口</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-23T19:55:00+08:00">
                2016-12-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><span style="font-size: 14pt;">一、nginx 域名绑定 域名<br></span><br>nginx绑定多个域名可又把多个域名规则写一个配置文件里，也可又分别建立多个域名配置文件，我一般为了管理方便，每个域名建一个文件，有些同类域名也可又写在一个总的配置文件里。<br>一、每个域名一个文件的写法<br>       首先打开nginx域名配置文件存放目录：/usr/local/nginx/conf/servers ，如要绑定域名<a href="http://www.itblood.com/" target="_blank" rel="noopener">www.itblood.com</a> 则在此目录建一个文件：<a href="http://www.itblood.com.conf/" target="_blank" rel="noopener">www.itblood.com.conf</a>然后在此文件中写规则，如：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure>
<pre><code>&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;server{
    listen 80;
    server_name www.itblood.com; #绑定域名
    index index.htm index.html index.php; #默认文件
    root /home/www/itblood.com; #网站根目录
    include location.conf; #调用其他规则，也可去除
}
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> 然后重起nginx服务器，域名就绑定成功了nginx服务器重起命令：/etc/init.d/nginx restart  </span><br><span class="line">二、一个文件多个域名的写法  </span><br><span class="line">一个文件添加多个域名的规则也是一样，只要把上面单个域名重复写下来就ok了，如：</span><br></pre></td></tr></table></figure>

&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;server{
    listen 80;
    server_name www.itblood.com; #绑定域名
    index index.htm index.html index.php; #默认文件
    root /home/www/itblood.com; #网站根目录
    include location.conf; #调用其他规则，也可去除
}

server{
    listen 80;
    server_name msn.itblood.com; #绑定域名
    index index.htm index.html index.php; #默认文件
    root /home/www/msn.itblood.com; #网站根目录
    include location.conf; #调用其他规则，也可去除
}
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> 三、不带www的域名加301跳转  </span><br><span class="line">如果不带www的域名要加301跳转，那也是和绑定域名一样，先绑定不带www的域名，只是不用写网站目录，而是进行301跳转，如：</span><br></pre></td></tr></table></figure>

&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;server
{
    listen 80;
    server_name itblood.com;
    rewrite ^/(.*) http://www.itblood.com/$1 permanent;
}
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">四、添加404网页</span><br><span class="line"></span><br><span class="line">       添加404网页，都可又直接在里面添加，如：</span><br></pre></td></tr></table></figure>

&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;server{
    listen 80;
    server_name www.itblood.com; #绑定域名
    index index.htm index.html index.php; #默认文件
    root /home/www/itblood.com; #网站根目录
    include location.conf; #调用其他规则，也可去除
    error_page 404 /404.html;
}
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    &lt;pre name=&quot;code&quot;&gt;  </span><br><span class="line"></span><br><span class="line">nginx 域名绑定 端口</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;server &#123;</span><br><span class="line">    listen  80;  </span><br><span class="line">    server_name taqing.me www.taqing.me; ##，绑定域名</span><br><span class="line">    location / &#123;  </span><br><span class="line">         proxy_pass http://127.0.0.1:8000;  ## 指定端口号 8000</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

&lt;pre name=&quot;code&quot;&gt;  
</code></pre><p><code>`</code></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/8f2655bf.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/8f2655bf.html" itemprop="url">centos7查看端口命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-23T19:30:00+08:00">
                2016-12-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>查看Centos端口命令：   </p>
<h1 id="netstat-lntp-查看监听-Listen-的端口"><a href="#netstat-lntp-查看监听-Listen-的端口" class="headerlink" title="netstat -lntp #查看监听(Listen)的端口"></a>netstat -lntp #查看监听(Listen)的端口</h1><h1 id="netstat-antp-查看所有建立的TCP连接"><a href="#netstat-antp-查看所有建立的TCP连接" class="headerlink" title="netstat -antp #查看所有建立的TCP连接"></a>netstat -antp #查看所有建立的TCP连接</h1><p>其他关于查看服务器网络信息命令：<br>1、查看<a href="https://www.baidu.com/s?wd=Linux%E7%B3%BB%E7%BB%9F&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1YvnjF-mvnznHRvnjPWujnv0ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3EnHbzPjbLnH6LPH0LnWc1P1fzPs" target="_blank" rel="noopener">Linux系统</a>主机名： Linux学习，http:// linux.it.net.cn  </p>
<pre><code># hostname  
localhost.localdomain  
</code></pre><p>2、查看服务器IP地址：  </p>
<pre><code># ifconfig|grep &apos;inet addr:&apos;|grep -v &apos;[127.0.0.1](https://www.baidu.com/s?wd=127.0.0.1&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1YvnjF-mvnznHRvnjPWujnv0ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3EnHbzPjbLnH6LPH0LnWc1P1fzPs)&apos;|cut -d: -f2|awk &apos;{ print $1}&apos;  
192.168.17.238  
192.168.1.9  
</code></pre><p>3、查看linux网关：  </p>
<pre><code># route |grep default  
default [192.168.1.1](https://www.baidu.com/s?wd=192.168.1.1&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1YvnjF-mvnznHRvnjPWujnv0ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3EnHbzPjbLnH6LPH0LnWc1P1fzPs) 0.0.0.0 UG 0 0 0 em1  
</code></pre><p>4、查看linux打开服务：  </p>
<pre><code># chkconfig --list|grep 启用 #查看开启的服务  
sshd 0:关闭 1:关闭 2:启用 3:启用 4:启用 5:启用 6:关闭  
httpd 0:关闭 1:关闭 2:关闭 3:启用 4:关闭 5:关闭 6:关闭  
</code></pre><p>5、查看服务器DNS配置：  </p>
<pre><code># cat /etc/resolv.conf  
nameserver 192.168.0.66  
nameserver 202.106.0.20  
</code></pre><p>6、其他网络信息：  </p>
<pre><code># iptables -L #查看防火墙规则  
# route -n #查看路由表  
# netstat -s #查看网络统计信息```
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/d2cac067.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/d2cac067.html" itemprop="url">Configure Apache Virtual Hosts - CentOS 7</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-22T13:07:00+08:00">
                2016-12-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <div class="help-articles"><br><br>Difficulty: <em><span style="text-decoration: underline;">2</span></em><br>Time: <em><span style="text-decoration: underline;">15 minutes</span></em><br><br>Want to host websites on your server? Using Apache? Great. This article will show you how to do exactly that using Apache’s “virtual hosts.”<br><br>In Apache, you can use virtual hosts to direct <code>http</code> traffic for a given domain name to a particular directory (i.e. the root directory of the website for the domain in the request). This feature is commonly used to host multiple websites, but we recommend using it for every website on your server <em>including</em> the first.<br><br>Throughout this article, we’ll use an example domain - <em><span style="text-decoration: underline;">coolexample.com</span></em> - but you should replace it with the domain name or subdomain you want to host on your server.<br><br>## Install the Apache web server<br><br>To get Apache on your server, you can either install it as part of a <a href="https://sg.godaddy.com/zh/help/build-a-lamp-stack-linux-apache-mysql-php-centos-7-17344" target="_blank" rel="noopener">LAMP stack</a>, or you can install Apache by itself:<br><br>1.  Update your packages using <code>yum</code>:<br><div class="hacker code-sample-blue">sudo yum update<br><br>2.  Install Apache:<br><div class="hacker code-sample-blue">sudo yum install httpd<br><br>3.  Start up Apache, so that the httpd service will start automatically on a reboot:<br><div class="hacker code-sample-blue">sudo service httpd start<br><br>## Set up the virtual host<br><br>1.  Create the virtual directories for your domain:<br><div class="hacker code-sample-blue">sudo mkdir -p /var/www/<em><span style="text-decoration: underline;">coolexample.com</span></em>/public_html<br><br>2.  Change the ownership to the Apache group:<br><div class="hacker code-sample-blue">sudo chown -R apache:apache /var/www/<em><span style="text-decoration: underline;">coolexample.com</span></em>/public_html<br><br>This lets Apache modify files in your web directories.<br>3.  Change the directory’s permissions so they can be read from the internet:<br><div class="hacker code-sample-blue">sudo chmod -R 755 /var/www/<br><br>## Create content for the website<br><br>If you have the content for the website prepped, you can upload it to the <code>/public_html</code>folder you created in the last section.<br><br>If you don’t have content ready to upload, you can create a sample home page (also known as an index file, which is the first page that loads when visitors come to your domain).<br><br>1.  Create the index file:<br><div class="hacker code-sample-blue">sudo vim /var/www/<em><span style="text-decoration: underline;">coolexample.com</span></em>/public_html/index.html<br><br>2.  Add some content to the file:<br><br><html><br>        <head><meta name="generator" content="Hexo 3.8.0"><br>        <title>Welcome to my site!</title><br>        </head><br>        <body><br>        <h1>Hooray! Your virtual host is working!</h1><br>        </body><br>    </html><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    3.  Save and close the file:</span><br><span class="line">    &lt;div class=&quot;hacker code-sample-blue&quot;&gt;:wq!</span><br><span class="line"></span><br><span class="line">    ## Configure your virtual host directories</span><br><span class="line"></span><br><span class="line">We&apos;re going to copy a configuration usually used in Ubuntu/Debian and create two directories: one to store the virtual host files (`sites-available`) and another to hold symbolic links to virtual hosts that will be published (`sites-enabled`).</span><br><span class="line"></span><br><span class="line">    ### Create sites-available and sites-enabled directories</span><br><span class="line"></span><br><span class="line">    *   Create the directories:</span><br><span class="line">    &lt;div class=&quot;hacker code-sample-blue&quot;&gt;sudo mkdir /etc/httpd/sites-available</span><br><span class="line">    &lt;div class=&quot;hacker code-sample-blue&quot;&gt;sudo mkdir /etc/httpd/sites-enabled</span><br><span class="line"></span><br><span class="line">    ### Edit your Apache configuration file</span><br><span class="line"></span><br><span class="line">Edit the main configuration file (`httpd.conf`) so that Apache will look for virtual hosts in the `sites-enabled` directory.</span><br><span class="line"></span><br><span class="line">    1.  Open your config file:</span><br><span class="line">    &lt;div class=&quot;hacker code-sample-blue&quot;&gt;sudo vim /etc/httpd/conf/httpd.conf</span><br><span class="line"></span><br><span class="line">    2.  Add this line at the very end of the file:</span><br><span class="line">    &lt;div class=&quot;hacker code-sample-blue&quot;&gt;IncludeOptional sites-enabled/*.conf</span><br><span class="line">    This way, we&apos;re telling Apache to look for additional config files in the `sites-enabled` directory.</span><br><span class="line">    3.  Save and close the file:</span><br><span class="line">    &lt;div class=&quot;hacker code-sample-blue&quot;&gt;:wq!</span><br><span class="line"></span><br><span class="line">    ## Create virtual host file</span><br><span class="line"></span><br><span class="line">We&apos;re going to build it from a new file in your `sites-available` directory.</span><br><span class="line"></span><br><span class="line">    1.  Create a new config file:</span><br><span class="line">    &lt;div class=&quot;hacker code-sample-blue&quot;&gt;sudo vim /etc/httpd/sites-available/*&lt;span style=&quot;text-decoration: underline;&quot;&gt;coolexample.com.conf&lt;/span&gt;*</span><br><span class="line"></span><br><span class="line">    2.  Paste this code in, replacing your own domain for *&lt;span style=&quot;text-decoration: underline;&quot;&gt;coolexample.com.conf&lt;/span&gt;*.</span><br><span class="line"></span><br><span class="line">Here&apos;s what the whole file could look like after your changes:</span><br><span class="line"></span><br><span class="line">    &lt;pre class=&quot;code-sample-blue&quot;&gt;&lt;VirtualHost *:80&gt;</span><br><span class="line">        ServerAdmin webmaster@dummy-host.example.com    </span><br><span class="line">        ServerName www.coolexample.com</span><br><span class="line">        ServerAlias coolexample.com </span><br><span class="line">        DocumentRoot /var/www/coolexample.com/public_html </span><br><span class="line">        ErrorLog /var/www/coolexample.com/error.log </span><br><span class="line">        CustomLog /var/www/coolexample.com/requests.log combined </span><br><span class="line">    &lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure><br><br>The lines <code>ErrorLog</code> and <code>CustomLog</code> are not required to set up your virtual host, but we’ve included them, in case you do want to tell Apache where to keep error and request logs for your site.<br><br>    <em>   Save and close the file:<br>    <div class="hacker code-sample-blue">:wq!

    </div></em>   Enable your virtual host file with a sym link to the <code>sites-enabled</code> directory:<br>    <div class="hacker code-sample-blue">sudo ln -s /etc/httpd/sites-available/<em><span style="text-decoration: underline;">coolexample.com</span></em>.conf /etc/httpd/sites-enabled/<em><span style="text-decoration: underline;">coolexample.com</span></em>.conf<br><br>    <em>   Restart Apache:<br>    <div class="hacker code-sample-blue">sudo service httpd restart<br><br>    ## Point your domain name to your server<br><br>If your domain name isn’t currently loading another website, you should point it to your server to test your new config.<br><br>How you do this depends on where your domain name is registered and whose server you’re using:<br><br>    <table><br>    <tbody><br>    <tr><th>Domain registered?</th><th>Server hosted?</th><th>Do this…</th></tr><br>    <tr><br>    <td>GoDaddy</td><br>    <td>GoDaddy</td><br>    <td><a href="https://sg.godaddy.com/zh/help/point-your-domain-name-to-a-server-19116" target="_blank" rel="noopener">Point your domain name to a server</a></td><br>    </tr><br>    <tr><br>    <td>Another company</td><br>    <td>GoDaddy</td><br>    <td><a href="https://sg.godaddy.com/zh/help/find-a-servers-public-ip-address-19051" target="_blank" rel="noopener">Find a server’s public IP address</a> and then update your domain name’s primary (“@”) A record.</td><br>    </tr><br>    <tr><br>    <td>GoDaddy</td><br>    <td>Another company</td><br>    <td>Find your server’s IP address, and then <a href="https://sg.godaddy.com/zh/help/change-my-ip-address-20134" target="_blank" rel="noopener">change your domain’s IP address to use it</a>.</td><br>    </tr><br>    <tr><br>    <td>Another company</td><br>    <td>Another company</td><br>    <td>Find your server’s IP address, and then change your domain’s IP address to use it.</td><br>    </tr><br>    </tbody><br>    </table><br><br>Changes to your domain can take up to 48 hours to display across the internet. However, once they do, you can visit your domain name and view the test page you created earlier!<br><br>    ## Adding additional virtual hosts<br><br>To create additional sites, repeat the following sections:<br><br>    1.  Set up the virtual host<br>    2.  Create content for the website<br>    3.  Create virtual host file — but for additional virtual hosts, you will need to create new config files in <code>/etc/httpd/sites-available/</code>, for example:<br>    <div class="hacker code-sample-blue">/etc/httpd/sites-available/</div></div></em><span style="text-decoration: underline;">your second domain name</span>*<br><br>    4.  Point your domain name to your server<br><br>    ##<br><br>    </div></div></div></div></div></div></div></div></div><br>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/24d0b8fb.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/24d0b8fb.html" itemprop="url">CentOS7 安装MongoDB 3.0服务器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-22T08:55:00+08:00">
                2016-12-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1，下载-amp-安装"><a href="#1，下载-amp-安装" class="headerlink" title="1，下载&amp;安装"></a>1，下载&amp;安装</h3><p>MongoDB 3.0 正式版本发布!这标志着 MongoDB 数据库进入了一个全新的发展阶段，提供强大、灵活而且易于管理的数据库管理系统。MongoDB宣称，3.0新版本不只提升7到10倍的写入效率以及增加80%的数据压缩率，还能减少95%的运维成本。<br> MongoDB 3.0主要新特性包括：<br> ·可插入式的存储引擎 API<br> ·支持 WiredTiger 存储引擎<br> ·MMAPv1 提升<br> ·复制集全面提升<br> ·集群方面的改进<br> ·提升了安全性<br> ·工具的提升<br>WiredTiger 存储引擎是一项难以置信的技术实现，提供无门闩、非堵塞算法来利用先进的硬件平台(如大容量芯片缓存和线程化架构)来提升性能。通过 WiredTiger，MongoDB 3.0 实现了文档级别的并发控制，因此大幅提升了大并发下的写负载。</p>
<p>MongoDB 提供了centos yum安装方式。<br>参考：<a href="http://docs.mongodb.org/manual/tutorial/install-mongodb-on-red-hat/" target="_blank" rel="noopener">http://docs.mongodb.org/manual/tutorial/install-mongodb-on-red-hat/</a><br>pdf 手册：<br><a href="http://docs.mongodb.org/manual/MongoDB-manual.pdf" target="_blank" rel="noopener">http://docs.mongodb.org/manual/MongoDB-manual.pdf</a></p>
<p>vi /etc/yum.repos.d/mongodb-org-3.0.repo</p>
<p><code class="hljs ini has-numbering"><span class="hljs-title">[mongodb-org-3.0]<br>    <span class="hljs-setting">name=<span class="hljs-value">MongoDB Repository<br>    <span class="hljs-setting">baseurl=<span class="hljs-value"><a href="http://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/" target="_blank" rel="noopener">http://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/</a><span class="hljs-number">3.0/x86_64/<br>    <span class="hljs-setting">gpgcheck=<span class="hljs-value"><span class="hljs-number">0<br>    <span class="hljs-setting">enabled=<span class="hljs-value"><span class="hljs-number">1</span></span></span></span></span></span></span></span></span></span></span></span></code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">安装mongodb</span><br><span class="line"></span><br><span class="line">    &lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs lasso has-numbering&quot;&gt;yum install &lt;span class=&quot;hljs-attribute&quot;&gt;-y mongodb&lt;span class=&quot;hljs-attribute&quot;&gt;-org&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;</span><br></pre></td></tr></table></figure></p>
<p>安装了所有相关服务。</p>
<pre><code>&lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs lasso has-numbering&quot;&gt;&lt;span class=&quot;hljs-attribute&quot;&gt;...&lt;span class=&quot;hljs-attribute&quot;&gt;...
Running transaction
  Installing : mongodb&lt;span class=&quot;hljs-attribute&quot;&gt;-org&lt;span class=&quot;hljs-attribute&quot;&gt;-shell&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;3.0&lt;span class=&quot;hljs-number&quot;&gt;.2&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;1.el7&lt;span class=&quot;hljs-built_in&quot;&gt;.x86_64      &lt;span class=&quot;hljs-number&quot;&gt;1/&lt;span class=&quot;hljs-number&quot;&gt;5 
  Installing : mongodb&lt;span class=&quot;hljs-attribute&quot;&gt;-org&lt;span class=&quot;hljs-attribute&quot;&gt;-tools&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;3.0&lt;span class=&quot;hljs-number&quot;&gt;.2&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;1.el7&lt;span class=&quot;hljs-built_in&quot;&gt;.x86_64      &lt;span class=&quot;hljs-number&quot;&gt;2/&lt;span class=&quot;hljs-number&quot;&gt;5 
  Installing : mongodb&lt;span class=&quot;hljs-attribute&quot;&gt;-org&lt;span class=&quot;hljs-attribute&quot;&gt;-mongos&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;3.0&lt;span class=&quot;hljs-number&quot;&gt;.2&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;1.el7&lt;span class=&quot;hljs-built_in&quot;&gt;.x86_64     &lt;span class=&quot;hljs-number&quot;&gt;3/&lt;span class=&quot;hljs-number&quot;&gt;5 
  Installing : mongodb&lt;span class=&quot;hljs-attribute&quot;&gt;-org&lt;span class=&quot;hljs-attribute&quot;&gt;-server&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;3.0&lt;span class=&quot;hljs-number&quot;&gt;.2&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;1.el7&lt;span class=&quot;hljs-built_in&quot;&gt;.x86_64     &lt;span class=&quot;hljs-number&quot;&gt;4/&lt;span class=&quot;hljs-number&quot;&gt;5 
  Installing : mongodb&lt;span class=&quot;hljs-attribute&quot;&gt;-org&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;3.0&lt;span class=&quot;hljs-number&quot;&gt;.2&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;1.el7&lt;span class=&quot;hljs-built_in&quot;&gt;.x86_64            &lt;span class=&quot;hljs-number&quot;&gt;5/&lt;span class=&quot;hljs-number&quot;&gt;5 
  Verifying  : mongodb&lt;span class=&quot;hljs-attribute&quot;&gt;-org&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;3.0&lt;span class=&quot;hljs-number&quot;&gt;.2&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;1.el7&lt;span class=&quot;hljs-built_in&quot;&gt;.x86_64           &lt;span class=&quot;hljs-number&quot;&gt;1/&lt;span class=&quot;hljs-number&quot;&gt;5 
  Verifying  : mongodb&lt;span class=&quot;hljs-attribute&quot;&gt;-org&lt;span class=&quot;hljs-attribute&quot;&gt;-server&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;3.0&lt;span class=&quot;hljs-number&quot;&gt;.2&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;1.el7&lt;span class=&quot;hljs-built_in&quot;&gt;.x86_64    &lt;span class=&quot;hljs-number&quot;&gt;2/&lt;span class=&quot;hljs-number&quot;&gt;5 
  Verifying  : mongodb&lt;span class=&quot;hljs-attribute&quot;&gt;-org&lt;span class=&quot;hljs-attribute&quot;&gt;-mongos&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;3.0&lt;span class=&quot;hljs-number&quot;&gt;.2&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;1.el7&lt;span class=&quot;hljs-built_in&quot;&gt;.x86_64    &lt;span class=&quot;hljs-number&quot;&gt;3/&lt;span class=&quot;hljs-number&quot;&gt;5 
  Verifying  : mongodb&lt;span class=&quot;hljs-attribute&quot;&gt;-org&lt;span class=&quot;hljs-attribute&quot;&gt;-tools&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;3.0&lt;span class=&quot;hljs-number&quot;&gt;.2&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;1.el7&lt;span class=&quot;hljs-built_in&quot;&gt;.x86_64     &lt;span class=&quot;hljs-number&quot;&gt;4/&lt;span class=&quot;hljs-number&quot;&gt;5 
  Verifying  : mongodb&lt;span class=&quot;hljs-attribute&quot;&gt;-org&lt;span class=&quot;hljs-attribute&quot;&gt;-shell&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;3.0&lt;span class=&quot;hljs-number&quot;&gt;.2&lt;span class=&quot;hljs-subst&quot;&gt;-&lt;span class=&quot;hljs-number&quot;&gt;1.el7&lt;span class=&quot;hljs-built_in&quot;&gt;.x86_64     &lt;span class=&quot;hljs-number&quot;&gt;5/&lt;span class=&quot;hljs-number&quot;&gt;5&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">配置文件在：/etc/mongod.conf  数据文件在：/var/lib/mongo  日志文件在：/var/log/mongodb  mongodb服务使用</span><br><span class="line"></span><br><span class="line">    &lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs vala has-numbering&quot;&gt;&lt;span class=&quot;hljs-preprocessor&quot;&gt;#启动</span><br><span class="line">    service mongod start</span><br><span class="line">    &lt;span class=&quot;hljs-preprocessor&quot;&gt;#停止</span><br><span class="line">    service mongod stop</span><br><span class="line">    &lt;span class=&quot;hljs-preprocessor&quot;&gt;#重启</span><br><span class="line">    service mongod restart</span><br><span class="line">    &lt;span class=&quot;hljs-preprocessor&quot;&gt;#增加开机启动</span><br><span class="line">    chkconfig mongod on&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;</span><br></pre></td></tr></table></figure>

### 2，MongoDB CRUD
</code></pre><p>参考：  <a href="http://docs.mongodb.org/manual/core/crud-introduction/" target="_blank" rel="noopener">http://docs.mongodb.org/manual/core/crud-introduction/</a></p>
<p>连接到MongoDB，很简单，执行mongo就可以了。</p>
<pre><code>&lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs livecodeserver has-numbering&quot;&gt;&lt;span class=&quot;hljs-comment&quot;&gt;# mongo
MongoDB &lt;span class=&quot;hljs-built_in&quot;&gt;shell &lt;span class=&quot;hljs-built_in&quot;&gt;version: &lt;span class=&quot;hljs-number&quot;&gt;3.0&lt;span class=&quot;hljs-number&quot;&gt;.2
connecting &lt;span class=&quot;hljs-built_in&quot;&gt;to: test
Welcome &lt;span class=&quot;hljs-built_in&quot;&gt;to &lt;span class=&quot;hljs-operator&quot;&gt;the MongoDB &lt;span class=&quot;hljs-built_in&quot;&gt;shell.
For interactive help, type &lt;span class=&quot;hljs-string&quot;&gt;&quot;help&quot;.
For more comprehensive documentation, see
        &lt;span class=&quot;hljs-keyword&quot;&gt;http://docs.mongodb.org/
Questions? Try &lt;span class=&quot;hljs-operator&quot;&gt;the support group
        &lt;span class=&quot;hljs-keyword&quot;&gt;http://groups.google.com/group/mongodb-user
Server has startup warnings: 
&lt;span class=&quot;hljs-number&quot;&gt;2015-&lt;span class=&quot;hljs-number&quot;&gt;04-&lt;span class=&quot;hljs-number&quot;&gt;29T18:&lt;span class=&quot;hljs-number&quot;&gt;03:&lt;span class=&quot;hljs-number&quot;&gt;17.544+&lt;span class=&quot;hljs-number&quot;&gt;0800 I STORAGE  [initandlisten] 
&lt;span class=&quot;hljs-number&quot;&gt;2015-&lt;span class=&quot;hljs-number&quot;&gt;04-&lt;span class=&quot;hljs-number&quot;&gt;29T18:&lt;span class=&quot;hljs-number&quot;&gt;03:&lt;span class=&quot;hljs-number&quot;&gt;17.544+&lt;span class=&quot;hljs-number&quot;&gt;0800 I STORAGE  [initandlisten] ** WARNING: Readahead &lt;span class=&quot;hljs-keyword&quot;&gt;for /var/lib/mongo is &lt;span class=&quot;hljs-built_in&quot;&gt;set &lt;span class=&quot;hljs-built_in&quot;&gt;to &lt;span class=&quot;hljs-number&quot;&gt;4096KB
&lt;span class=&quot;hljs-number&quot;&gt;2015-&lt;span class=&quot;hljs-number&quot;&gt;04-&lt;span class=&quot;hljs-number&quot;&gt;29T18:&lt;span class=&quot;hljs-number&quot;&gt;03:&lt;span class=&quot;hljs-number&quot;&gt;17.544+&lt;span class=&quot;hljs-number&quot;&gt;0800 I STORAGE  [initandlisten] **          We suggest setting &lt;span class=&quot;hljs-keyword&quot;&gt;it &lt;span class=&quot;hljs-built_in&quot;&gt;to &lt;span class=&quot;hljs-number&quot;&gt;256KB (&lt;span class=&quot;hljs-number&quot;&gt;512 sectors) &lt;span class=&quot;hljs-operator&quot;&gt;or less
&lt;span class=&quot;hljs-number&quot;&gt;2015-&lt;span class=&quot;hljs-number&quot;&gt;04-&lt;span class=&quot;hljs-number&quot;&gt;29T18:&lt;span class=&quot;hljs-number&quot;&gt;03:&lt;span class=&quot;hljs-number&quot;&gt;17.544+&lt;span class=&quot;hljs-number&quot;&gt;0800 I STORAGE  [initandlisten] **          &lt;span class=&quot;hljs-keyword&quot;&gt;http://dochub.mongodb.org/core/readahead
&lt;span class=&quot;hljs-number&quot;&gt;2015-&lt;span class=&quot;hljs-number&quot;&gt;04-&lt;span class=&quot;hljs-number&quot;&gt;29T18:&lt;span class=&quot;hljs-number&quot;&gt;03:&lt;span class=&quot;hljs-number&quot;&gt;17.679+&lt;span class=&quot;hljs-number&quot;&gt;0800 I CONTROL  [initandlisten] 
&lt;span class=&quot;hljs-number&quot;&gt;2015-&lt;span class=&quot;hljs-number&quot;&gt;04-&lt;span class=&quot;hljs-number&quot;&gt;29T18:&lt;span class=&quot;hljs-number&quot;&gt;03:&lt;span class=&quot;hljs-number&quot;&gt;17.679+&lt;span class=&quot;hljs-number&quot;&gt;0800 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/enabled is &lt;span class=&quot;hljs-string&quot;&gt;&apos;always&apos;.
&lt;span class=&quot;hljs-number&quot;&gt;2015-&lt;span class=&quot;hljs-number&quot;&gt;04-&lt;span class=&quot;hljs-number&quot;&gt;29T18:&lt;span class=&quot;hljs-number&quot;&gt;03:&lt;span class=&quot;hljs-number&quot;&gt;17.679+&lt;span class=&quot;hljs-number&quot;&gt;0800 I CONTROL  [initandlisten] **        We suggest setting &lt;span class=&quot;hljs-keyword&quot;&gt;it &lt;span class=&quot;hljs-built_in&quot;&gt;to &lt;span class=&quot;hljs-string&quot;&gt;&apos;never&apos;
&lt;span class=&quot;hljs-number&quot;&gt;2015-&lt;span class=&quot;hljs-number&quot;&gt;04-&lt;span class=&quot;hljs-number&quot;&gt;29T18:&lt;span class=&quot;hljs-number&quot;&gt;03:&lt;span class=&quot;hljs-number&quot;&gt;17.679+&lt;span class=&quot;hljs-number&quot;&gt;0800 I CONTROL  [initandlisten] 
&lt;span class=&quot;hljs-number&quot;&gt;2015-&lt;span class=&quot;hljs-number&quot;&gt;04-&lt;span class=&quot;hljs-number&quot;&gt;29T18:&lt;span class=&quot;hljs-number&quot;&gt;03:&lt;span class=&quot;hljs-number&quot;&gt;17.679+&lt;span class=&quot;hljs-number&quot;&gt;0800 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/defrag is &lt;span class=&quot;hljs-string&quot;&gt;&apos;always&apos;.
&lt;span class=&quot;hljs-number&quot;&gt;2015-&lt;span class=&quot;hljs-number&quot;&gt;04-&lt;span class=&quot;hljs-number&quot;&gt;29T18:&lt;span class=&quot;hljs-number&quot;&gt;03:&lt;span class=&quot;hljs-number&quot;&gt;17.679+&lt;span class=&quot;hljs-number&quot;&gt;0800 I CONTROL  [initandlisten] **        We suggest setting &lt;span class=&quot;hljs-keyword&quot;&gt;it &lt;span class=&quot;hljs-built_in&quot;&gt;to &lt;span class=&quot;hljs-string&quot;&gt;&apos;never&apos;
&lt;span class=&quot;hljs-number&quot;&gt;2015-&lt;span class=&quot;hljs-number&quot;&gt;04-&lt;span class=&quot;hljs-number&quot;&gt;29T18:&lt;span class=&quot;hljs-number&quot;&gt;03:&lt;span class=&quot;hljs-number&quot;&gt;17.679+&lt;span class=&quot;hljs-number&quot;&gt;0800 I CONTROL  [initandlisten] 
&lt;span class=&quot;hljs-number&quot;&gt;2015-&lt;span class=&quot;hljs-number&quot;&gt;04-&lt;span class=&quot;hljs-number&quot;&gt;29T18:&lt;span class=&quot;hljs-number&quot;&gt;03:&lt;span class=&quot;hljs-number&quot;&gt;17.679+&lt;span class=&quot;hljs-number&quot;&gt;0800 I CONTROL  [initandlisten] ** WARNING: soft rlimits too low. rlimits &lt;span class=&quot;hljs-built_in&quot;&gt;set &lt;span class=&quot;hljs-built_in&quot;&gt;to &lt;span class=&quot;hljs-number&quot;&gt;4096 processes, &lt;span class=&quot;hljs-number&quot;&gt;64000 &lt;span class=&quot;hljs-built_in&quot;&gt;files. Number &lt;span class=&quot;hljs-operator&quot;&gt;of processes should be &lt;span class=&quot;hljs-keyword&quot;&gt;at least &lt;span class=&quot;hljs-number&quot;&gt;32000 : &lt;span class=&quot;hljs-number&quot;&gt;0.5 times &lt;span class=&quot;hljs-built_in&quot;&gt;number &lt;span class=&quot;hljs-operator&quot;&gt;of &lt;span class=&quot;hljs-built_in&quot;&gt;files.
&lt;span class=&quot;hljs-number&quot;&gt;2015-&lt;span class=&quot;hljs-number&quot;&gt;04-&lt;span class=&quot;hljs-number&quot;&gt;29T18:&lt;span class=&quot;hljs-number&quot;&gt;03:&lt;span class=&quot;hljs-number&quot;&gt;17.679+&lt;span class=&quot;hljs-number&quot;&gt;0800 I CONTROL  [initandlisten] 
&gt; &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    #### 2.1，创建数据：</span><br><span class="line"></span><br><span class="line">http://docs.mongodb.org/manual/tutorial/insert-documents/  http://docs.mongodb.org/manual/reference/method/db.collection.insert/</span><br><span class="line"></span><br><span class="line">    &lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs r has-numbering&quot;&gt;&gt; db.users.insert(</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... &#123;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... name:&lt;span class=&quot;hljs-string&quot;&gt;&quot;zhang san&quot;,</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... age:&lt;span class=&quot;hljs-number&quot;&gt;26,</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... city:&lt;span class=&quot;hljs-string&quot;&gt;&quot;bei jing&quot;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... &#125;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... )</span><br><span class="line">    WriteResult(&#123; &lt;span class=&quot;hljs-string&quot;&gt;&quot;nInserted&quot; : &lt;span class=&quot;hljs-number&quot;&gt;1 &#125;)</span><br><span class="line">    &gt; db.users.insert(</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... &#123;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... _id:&lt;span class=&quot;hljs-number&quot;&gt;1,</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... name:&lt;span class=&quot;hljs-string&quot;&gt;&quot;zhang san&quot;,</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... age:&lt;span class=&quot;hljs-number&quot;&gt;26,</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... city:&lt;span class=&quot;hljs-string&quot;&gt;&quot;bei jing&quot;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... &#125;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... )</span><br><span class="line">    WriteResult(&#123; &lt;span class=&quot;hljs-string&quot;&gt;&quot;nInserted&quot; : &lt;span class=&quot;hljs-number&quot;&gt;1 &#125;)</span><br><span class="line">    &gt; db.users.insert(</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... &#123;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... _id:&lt;span class=&quot;hljs-number&quot;&gt;1,</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... name:&lt;span class=&quot;hljs-string&quot;&gt;&quot;zhang san&quot;,</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... age:&lt;span class=&quot;hljs-number&quot;&gt;26,</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... city:&lt;span class=&quot;hljs-string&quot;&gt;&quot;bei jing&quot;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... &#125;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... )</span><br><span class="line">    WriteResult(&#123;</span><br><span class="line">            &lt;span class=&quot;hljs-string&quot;&gt;&quot;nInserted&quot; : &lt;span class=&quot;hljs-number&quot;&gt;0,</span><br><span class="line">            &lt;span class=&quot;hljs-string&quot;&gt;&quot;writeError&quot; : &#123;</span><br><span class="line">                    &lt;span class=&quot;hljs-string&quot;&gt;&quot;code&quot; : &lt;span class=&quot;hljs-number&quot;&gt;11000,</span><br><span class="line">                    &lt;span class=&quot;hljs-string&quot;&gt;&quot;errmsg&quot; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;E11000 duplicate key error index: test.users.$_id_ dup key: &#123; : 1.0 &#125;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    &gt; db.users.insert(</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... &#123;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... _id:&lt;span class=&quot;hljs-number&quot;&gt;2,</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... name:&lt;span class=&quot;hljs-string&quot;&gt;&quot;li si&quot;,</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... age:&lt;span class=&quot;hljs-number&quot;&gt;28,</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... city:&lt;span class=&quot;hljs-string&quot;&gt;&quot;shang hai&quot;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... &#125;</span><br><span class="line">    &lt;span class=&quot;hljs-keyword&quot;&gt;... )</span><br><span class="line">    WriteResult(&#123; &lt;span class=&quot;hljs-string&quot;&gt;&quot;nInserted&quot; : &lt;span class=&quot;hljs-number&quot;&gt;1 &#125;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;</span><br></pre></td></tr></table></figure>
</code></pre><p>数据可以没有主键_id，如果没有，会自动生成一个。如果设置了_id主键，就必须不重复。  否则报主键冲突：“E11000 duplicate key error index: test.users.$_id_ dup key: { : 1.0 }”</p>
<pre><code>#### 2.2，更新数据：
</code></pre><p><a href="http://docs.mongodb.org/manual/tutorial/modify-documents/" target="_blank" rel="noopener">http://docs.mongodb.org/manual/tutorial/modify-documents/</a></p>
<pre><code>&lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs r has-numbering&quot;&gt;&gt; db.users.update(
&lt;span class=&quot;hljs-keyword&quot;&gt;... {_id:&lt;span class=&quot;hljs-number&quot;&gt;2},
&lt;span class=&quot;hljs-keyword&quot;&gt;... {
&lt;span class=&quot;hljs-keyword&quot;&gt;... $set: {
&lt;span class=&quot;hljs-keyword&quot;&gt;... city:&lt;span class=&quot;hljs-string&quot;&gt;&quot;guang zhou&quot;
&lt;span class=&quot;hljs-keyword&quot;&gt;... }
&lt;span class=&quot;hljs-keyword&quot;&gt;... }
&lt;span class=&quot;hljs-keyword&quot;&gt;... )
WriteResult({ &lt;span class=&quot;hljs-string&quot;&gt;&quot;nMatched&quot; : &lt;span class=&quot;hljs-number&quot;&gt;1, &lt;span class=&quot;hljs-string&quot;&gt;&quot;nUpserted&quot; : &lt;span class=&quot;hljs-number&quot;&gt;0, &lt;span class=&quot;hljs-string&quot;&gt;&quot;nModified&quot; : &lt;span class=&quot;hljs-number&quot;&gt;1 })
&gt; db.users.update(
&lt;span class=&quot;hljs-keyword&quot;&gt;... {_id:&lt;span class=&quot;hljs-number&quot;&gt;3},
&lt;span class=&quot;hljs-keyword&quot;&gt;... {
&lt;span class=&quot;hljs-keyword&quot;&gt;... $set: {
&lt;span class=&quot;hljs-keyword&quot;&gt;... city:&lt;span class=&quot;hljs-string&quot;&gt;&quot;si chuan&quot;
&lt;span class=&quot;hljs-keyword&quot;&gt;... }
&lt;span class=&quot;hljs-keyword&quot;&gt;... },
&lt;span class=&quot;hljs-keyword&quot;&gt;... { upsert: true }
&lt;span class=&quot;hljs-keyword&quot;&gt;... )
WriteResult({ &lt;span class=&quot;hljs-string&quot;&gt;&quot;nMatched&quot; : &lt;span class=&quot;hljs-number&quot;&gt;0, &lt;span class=&quot;hljs-string&quot;&gt;&quot;nUpserted&quot; : &lt;span class=&quot;hljs-number&quot;&gt;1, &lt;span class=&quot;hljs-string&quot;&gt;&quot;nModified&quot; : &lt;span class=&quot;hljs-number&quot;&gt;0, &lt;span class=&quot;hljs-string&quot;&gt;&quot;_id&quot; : &lt;span class=&quot;hljs-number&quot;&gt;3 })&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">更新使用update，如果增加&#123; upsert: true &#125;，则表示没有查询到数据直接插入。</span><br><span class="line"></span><br><span class="line">    #### 2.3，删除：</span><br><span class="line"></span><br><span class="line">http://docs.mongodb.org/manual/tutorial/remove-documents/</span><br><span class="line"></span><br><span class="line">    &lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs avrasm has-numbering&quot;&gt;&gt; db&lt;span class=&quot;hljs-preprocessor&quot;&gt;.users&lt;span class=&quot;hljs-preprocessor&quot;&gt;.remove(&#123;_id:&lt;span class=&quot;hljs-number&quot;&gt;3&#125;)</span><br><span class="line">    WriteResult(&#123; &lt;span class=&quot;hljs-string&quot;&gt;&quot;nRemoved&quot; : &lt;span class=&quot;hljs-number&quot;&gt;1 &#125;)</span><br><span class="line">    &gt; db&lt;span class=&quot;hljs-preprocessor&quot;&gt;.users&lt;span class=&quot;hljs-preprocessor&quot;&gt;.remove(&#123;_id:&lt;span class=&quot;hljs-number&quot;&gt;4&#125;)</span><br><span class="line">    WriteResult(&#123; &lt;span class=&quot;hljs-string&quot;&gt;&quot;nRemoved&quot; : &lt;span class=&quot;hljs-number&quot;&gt;0 &#125;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;</span><br></pre></td></tr></table></figure>
</code></pre><p>查询到数据才进行删除，并且返回删除数量。</p>
<pre><code>#### 2.4，查询：
</code></pre><p><a href="http://docs.mongodb.org/manual/tutorial/query-documents/" target="_blank" rel="noopener">http://docs.mongodb.org/manual/tutorial/query-documents/</a></p>
<pre><code>&lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs avrasm has-numbering&quot;&gt;&gt; db&lt;span class=&quot;hljs-preprocessor&quot;&gt;.users&lt;span class=&quot;hljs-preprocessor&quot;&gt;.find({age:{ $gt: &lt;span class=&quot;hljs-number&quot;&gt;26}})
{ &lt;span class=&quot;hljs-string&quot;&gt;&quot;_id&quot; : &lt;span class=&quot;hljs-number&quot;&gt;2, &lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;li si&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;age&quot; : &lt;span class=&quot;hljs-number&quot;&gt;28, &lt;span class=&quot;hljs-string&quot;&gt;&quot;city&quot; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;guang zhou&quot; }
&gt; db&lt;span class=&quot;hljs-preprocessor&quot;&gt;.users&lt;span class=&quot;hljs-preprocessor&quot;&gt;.find({age:{ $gt: &lt;span class=&quot;hljs-number&quot;&gt;25}})
{ &lt;span class=&quot;hljs-string&quot;&gt;&quot;_id&quot; : ObjectId(&lt;span class=&quot;hljs-string&quot;&gt;&quot;5540adf29b0f52a6786de216&quot;), &lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;zhang san&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;age&quot; : &lt;span class=&quot;hljs-number&quot;&gt;26, &lt;span class=&quot;hljs-string&quot;&gt;&quot;city&quot; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;bei jing&quot; }
{ &lt;span class=&quot;hljs-string&quot;&gt;&quot;_id&quot; : &lt;span class=&quot;hljs-number&quot;&gt;1, &lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;zhang san&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;age&quot; : &lt;span class=&quot;hljs-number&quot;&gt;26, &lt;span class=&quot;hljs-string&quot;&gt;&quot;city&quot; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;bei jing&quot; }
{ &lt;span class=&quot;hljs-string&quot;&gt;&quot;_id&quot; : &lt;span class=&quot;hljs-number&quot;&gt;2, &lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;li si&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;age&quot; : &lt;span class=&quot;hljs-number&quot;&gt;28, &lt;span class=&quot;hljs-string&quot;&gt;&quot;city&quot; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;guang zhou&quot; }
&lt;span class=&quot;hljs-preprocessor&quot;&gt;#查询全部数据
&gt; db&lt;span class=&quot;hljs-preprocessor&quot;&gt;.users&lt;span class=&quot;hljs-preprocessor&quot;&gt;.find()
{ &lt;span class=&quot;hljs-string&quot;&gt;&quot;_id&quot; : ObjectId(&lt;span class=&quot;hljs-string&quot;&gt;&quot;5540adf29b0f52a6786de216&quot;), &lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;zhang san&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;age&quot; : &lt;span class=&quot;hljs-number&quot;&gt;26, &lt;span class=&quot;hljs-string&quot;&gt;&quot;city&quot; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;bei jing&quot; }
{ &lt;span class=&quot;hljs-string&quot;&gt;&quot;_id&quot; : &lt;span class=&quot;hljs-number&quot;&gt;1, &lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;zhang san&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;age&quot; : &lt;span class=&quot;hljs-number&quot;&gt;26, &lt;span class=&quot;hljs-string&quot;&gt;&quot;city&quot; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;bei jing&quot; }
{ &lt;span class=&quot;hljs-string&quot;&gt;&quot;_id&quot; : &lt;span class=&quot;hljs-number&quot;&gt;2, &lt;span class=&quot;hljs-string&quot;&gt;&quot;name&quot; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;li si&quot;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;age&quot; : &lt;span class=&quot;hljs-number&quot;&gt;28, &lt;span class=&quot;hljs-string&quot;&gt;&quot;city&quot; : &lt;span class=&quot;hljs-string&quot;&gt;&quot;guang zhou&quot; }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    #### 2.5，更多方法</span><br><span class="line"></span><br><span class="line">db.collection.aggregate()  db.collection.count()  db.collection.copyTo()  db.collection.createIndex()  db.collection.getIndexStats()  db.collection.indexStats()  db.collection.dataSize()  db.collection.distinct()  db.collection.drop()  db.collection.dropIndex()  db.collection.dropIndexes()  db.collection.ensureIndex()  db.collection.explain()  db.collection.find()  db.collection.findAndModify()  db.collection.findOne()  db.collection.getIndexes()  db.collection.getShardDistribution()  db.collection.getShardVersion()  db.collection.group()  db.collection.insert()  db.collection.isCapped()  db.collection.mapReduce()  db.collection.reIndex()  db.collection.remove()  db.collection.renameCollection()  db.collection.save()  db.collection.stats()  db.collection.storageSize()  db.collection.totalSize()  db.collection.totalIndexSize()  db.collection.update()  db.collection.validate()</span><br><span class="line"></span><br><span class="line">    ### 3，MongoDB可视化工具</span><br><span class="line"></span><br><span class="line">http://www.robomongo.org/  ![](http://img.blog.csdn.net/20150429173107179)</span><br><span class="line"></span><br><span class="line">使用可视化工具，方便使用MongoDB管理。  首先要修改下端口和ip  vi /etc/mongod.conf</span><br><span class="line"></span><br><span class="line">    &lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs delphi has-numbering&quot;&gt;port=&lt;span class=&quot;hljs-number&quot;&gt;27017</span><br><span class="line"></span><br><span class="line">    dbpath=/&lt;span class=&quot;hljs-keyword&quot;&gt;var/lib/mongo</span><br><span class="line"></span><br><span class="line">    # location &lt;span class=&quot;hljs-keyword&quot;&gt;of pidfile</span><br><span class="line">    pidfilepath=/&lt;span class=&quot;hljs-keyword&quot;&gt;var/run/mongodb/mongod.pid</span><br><span class="line"></span><br><span class="line">    # Listen &lt;span class=&quot;hljs-keyword&quot;&gt;to local &lt;span class=&quot;hljs-keyword&quot;&gt;interface only. Comment &lt;span class=&quot;hljs-keyword&quot;&gt;out &lt;span class=&quot;hljs-keyword&quot;&gt;to listen &lt;span class=&quot;hljs-keyword&quot;&gt;on all interfaces.</span><br><span class="line">    bind_ip=&lt;span class=&quot;hljs-number&quot;&gt;192.168.&lt;span class=&quot;hljs-number&quot;&gt;1.36&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;</span><br></pre></td></tr></table></figure>
</code></pre><p>然后重启MongoDB</p>
<pre><code>&lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;&lt;code class=&quot;hljs  has-numbering&quot;&gt;service mongod restart&lt;/code&gt;```
</code></pre><p>接下来就可以创建一个mongodb连接：  <img src="http://img.blog.csdn.net/20150501093025462" alt="">  连接成功之后效果：  <img src="http://img.blog.csdn.net/20150501093249373" alt=""></p>
<pre><code>### 4，总结
</code></pre><p>本文原文连接: <a href="http://blog.csdn.net/freewebsys/article/details/45368809" target="_blank" rel="noopener">http://blog.csdn.net/freewebsys/article/details/45368809</a> 转载请注明出处！</p>
<p>MongoDB 3.0操作起来还是很方便的。能高效的使用。  同时MongoDB扩展也很方便。接下来研究。  对应互联网业务来说没有复杂的join查询。只追求高效，快速访问。<br></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/3b3187d5.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/3b3187d5.html" itemprop="url">centos7安装redis</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-22T08:45:00+08:00">
                2016-12-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>方法一：使用命令安装（前提是已经安装了EPEL）。  </p>
<p>安装redis:  </p>
<p>yum -y install redis  </p>
<p>启动/停止/重启 Redis<br> 启动服务：<br> 1<br> systemctl start redis.service<br> 停止服务：  </p>
<p>systemctl stop redis.service  </p>
<p>重启服务：  </p>
<p>systemctl restart redis.service  </p>
<p>检查状态：  </p>
<p>[root@idoseek ~]# systemctl status redis.service<br> redis.service - Redis persistent key-value database<br>    Loaded: loaded (/usr/lib/systemd/system/redis.service; enabled)<br>    Active: active (running) since 二 2014-10-21 21:37:22 EDT; 5h 26min ago<br>  Main PID: 30413 (redis-server)<br>    CGroup: /system.slice/redis.service<br>            └─30413 /usr/bin/redis-server 127.0.0.1:6379  </p>
<p> 10月 21 21:37:22 idoseek.com systemd[1]: Started Redis persistent key-value database.  </p>
<p>随系统启动服务：  </p>
<p>[root@idoseek ~]# systemctl enable redis.service<br> ln -s ‘/usr/lib/systemd/system/redis.service’ ‘/etc/systemd/system/multi-user.target.wants/redis.service’  </p>
<p>关闭随机启动：  </p>
<p>[root@idoseek ~]# systemctl disable redis.service<br> rm ‘/etc/systemd/system/mult(<a href="http://www.111cn.net%29i-user.target.wants/redis.service&#39;" target="_blank" rel="noopener">www.111cn.net)i-user.target.wants/redis.service’</a>  </p>
<p>方法二：编译安装  </p>
<p>下载安装编译:  </p>
<h1 id="wget-http-download-redis-io-releases-redis-2-8-17-tar-gz"><a href="#wget-http-download-redis-io-releases-redis-2-8-17-tar-gz" class="headerlink" title="wget http://download.redis.io/releases/redis-2.8.17.tar.gz"></a>wget <a href="http://download.redis.io/releases/redis-2.8.17.tar.gz" target="_blank" rel="noopener">http://download.redis.io/releases/redis-2.8.17.tar.gz</a></h1><h1 id="tar-xzf-redis-2-8-17-tar-gz"><a href="#tar-xzf-redis-2-8-17-tar-gz" class="headerlink" title="tar xzf redis-2.8.17.tar.gz"></a>tar xzf redis-2.8.17.tar.gz</h1><h1 id="cd-redis-2-8-17"><a href="#cd-redis-2-8-17" class="headerlink" title="cd redis-2.8.17"></a>cd redis-2.8.17</h1><h1 id="make"><a href="#make" class="headerlink" title="make"></a>make</h1><h1 id="make-install"><a href="#make-install" class="headerlink" title="make install"></a>make install</h1><p>设置配置文件路径:  </p>
<h1 id="mkdir-p-etc-redis-amp-amp-cp-redis-conf-etc-redis"><a href="#mkdir-p-etc-redis-amp-amp-cp-redis-conf-etc-redis" class="headerlink" title="mkdir -p /etc/redis &amp;&amp; cp redis.conf /etc/redis"></a>mkdir -p /etc/redis &amp;&amp; cp redis.conf /etc/redis</h1><p>修改配置文件：  </p>
<h1 id="vim-etc-redis-redis-conf"><a href="#vim-etc-redis-redis-conf" class="headerlink" title="vim /etc/redis/redis.conf"></a>vim /etc/redis/redis.conf</h1><p> 修改为： daemonize yes<br> 启动Redis:  </p>
<h1 id="usr-local-bin-redis-server-etc-redis-redis-conf"><a href="#usr-local-bin-redis-server-etc-redis-redis-conf" class="headerlink" title="/usr/local/bin/redis-server /etc/redis/redis.conf"></a>/usr/local/bin/redis-server /etc/redis/redis.conf</h1><p> #关闭服务  </p>
<p>redis-cli shutdown  </p>
<p>或者在cli中执行shutdown  </p>
<p>redis 127.0.0.1:6379&gt; shutdown  </p>
<p>清除缓存  </p>
<p>redis-cli flushall  </p>
<p>更多文档请参考软件包内的“README”文件。<br> 查看状态 ：  </p>
<h1 id="ss-nlp-grep-redis"><a href="#ss-nlp-grep-redis" class="headerlink" title="ss -nlp|grep redis"></a>ss -nlp|grep redis</h1><p>或者  </p>
<h1 id="ps-ef-grep-redis"><a href="#ps-ef-grep-redis" class="headerlink" title="ps -ef | grep redis"></a>ps -ef | grep redis</h1><p>下面介绍为PHP添加redis插件。  </p>
<p>从官网下载最新的拓展，地址：<a href="http://pecl.php.net/package/redis" target="_blank" rel="noopener">http://pecl.php.net/package/redis</a>或者<a href="https://github.com/phpredis/phpredis" target="_blank" rel="noopener">https://github.com/phpredis/phpredis</a>  </p>
<p>#wget <a href="http://pecl.php.net/get/redis-2.2.5.tgz" target="_blank" rel="noopener">http://pecl.php.net/get/redis-2.2.5.tgz</a>  </p>
<p> #phpize  </p>
<p> #./configure –prefix=/opt/redis –enable-redis –with-php-config=/opt/php/bin/php-config  </p>
<p> #make &amp;&amp; make install  </p>
<p>把拓展添加至php.ini，重启php-fpm：  </p>
<p>service php-fpm restart<br>from:<a href="http://www.111cn.net/sys/CentOS/85292.htm" target="_blank" rel="noopener">http://www.111cn.net/sys/CentOS/85292.htm</a></p>
<p>错误描述</p>
<p><a href="http://www.41443.com/HTML/xuniji/20150117/285110.html" target="_blank" rel="noopener">安装</a><a href="http://www.41443.com/HTML/Java/20150430/368050.html" target="_blank" rel="noopener">Redis</a> 2.8.18时<a href="http://www.41443.com/HTML/Oracle/20150206/321149.html" target="_blank" rel="noopener">报错</a>：</p>
<p>zmalloc.h:50:31: <a href="http://www.41443.com/HTML/Delphi/20121115/5955.html" target="_blank" rel="noopener">error</a>: jemalloc/jemalloc.h: No such file or directory<br>zmalloc.h:55:2: <a href="http://www.41443.com/HTML/Delphi/20121115/5955.html" target="_blank" rel="noopener">error</a>: #error “Newer version of jemalloc required”<br>make[1]: <strong><em> [adlist.o] Error 1<br>make[1]: Leaving directory `/data0/src/redis-2.6.2/src’<br>make: </em></strong> [all] Error 2</p>
<p>原因分析</p>
<p>在README 有这个一段话。</p>
<h2 id="Allocator"><a href="#Allocator" class="headerlink" title="Allocator    "></a>Allocator    </h2><p>Selecting a non-default memory allocator when building <a href="http://www.41443.com/HTML/Java/20150430/368050.html" target="_blank" rel="noopener">Redis</a> is done by setting<br>the <code>MALLOC</code> environment variable. Redis is compiled and linked against libc<br>malloc by default, with the exception of jemalloc being the default on Linux<br>systems. This default was picked because jemalloc has proven to have fewer<br>fragmentation problems than libc malloc.    </p>
<p>To force compiling against libc malloc, use:    </p>
<p>% make MALLOC=libc    </p>
<p>To compile against jemalloc on Mac OS X systems, use:    </p>
<p>% make MALLOC=jemalloc</p>
<p>说关于分配器allocator， 如果有MALLOC  这个 环境变量， 会有用这个环境变量的 去建立Redis。</p>
<p>而且libc 并不是默认的 分配器， 默认的是 jemalloc, 因为 jemalloc 被证明 有更少的 fragmentation problems 比libc。</p>
<p>但是如果你又没有jemalloc 而只有 libc 当然 make 出错。 所以加这么一个参数。</p>
<p>解决办法</p>
<p>make MALLOC=libc</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/7965f17d.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/7965f17d.html" itemprop="url">Centos下Yum安装PHP5.5,5.6,7.0</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-21T15:46:00+08:00">
                2016-12-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>默认的版本太低了，手动安装有一些麻烦，想采用Yum安装的可以使用下面的方案：</p>
<div>1.检查当前安装的PHP包<br><div><br><div>yum list installed | grep php<br><br><div>如果有安装的PHP包，先删除他们<br><div><br><div> yum remove php.x86_64 php-cli.x86_64 php-common.x86_64 php-gd.x86_64 php-ldap.x86_64 php-mbstring.x86_64 php-mcrypt.x86_64 php-mysql.x86_64 php-pdo.x86_64<br><br><div>2.Centos 5.X<br><div><br><div>  rpm -Uvh <a href="http://mirror.webtatic.com/yum/el5/latest.rpm" target="_blank" rel="noopener">http://mirror.webtatic.com/yum/el5/latest.rpm</a><br>  CentOs 6.x<br>  rpm -Uvh <a href="http://mirror.webtatic.com/yum/el6/latest.rpm" target="_blank" rel="noopener">http://mirror.webtatic.com/yum/el6/latest.rpm</a><br>  CentOs 7.X<br>rpm -Uvh <a href="https://mirror.webtatic.com/yum/el7/epel-release.rpm" target="_blank" rel="noopener">https://mirror.webtatic.com/yum/el7/epel-release.rpm</a><br>rpm -Uvh <a href="https://mirror.webtatic.com/yum/el7/webtatic-release.rpm" target="_blank" rel="noopener">https://mirror.webtatic.com/yum/el7/webtatic-release.rpm</a><br><br><div><br><div>如果想删除上面安装的包，重新安装<br>rpm -qa | grep webstatic<br>rpm -e  上面搜索到的包即可<br><br>3.运行yum install<br><div>  yum install php55w.x86_64 php55w-cli.x86_64 php55w-common.x86_64 php55w-gd.x86_64 php55w-ldap.x86_64 php55w-mbstring.x86_64 php55w-mcrypt.x86_64 php55w-mysql.x86_64 php55w-pdo.x86_64<br><br><div>yum install php56w.x86_64 php56w-cli.x86_64 php56w-common.x86_64 php56w-gd.x86_64 php56w-ldap.x86_64 php56w-mbstring.x86_64 php56w-mcrypt.x86_64 php56w-mysql.x86_64 php56w-pdo.x86_64<br><br>注：如果想升级到5.6把上面的55w换成56w就可以了。<br><br>yum install php70w.x86_64 php70w-cli.x86_64 php70w-common.x86_64 php70w-gd.x86_64 php70w-ldap.x86_64 php70w-mbstring.x86_64 php70w-mcrypt.x86_64 php70w-mysql.x86_64 php70w-pdo.x86_64<br>4.安装PHP FPM<br><br><div>yum install php55w-fpm<br>yum install php56w-fpm<br>yum install php70w-fpm<br>注：如果想升级到5.6把上面的55w换成56w就可以了。<br><br></div></div></div></div></div></div></div></div></div></div></div></div></div></div>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://pangguoming.com/post/6b5dfdb9.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="庞国明">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="庞国明-博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/post/6b5dfdb9.html" itemprop="url">Linux下如何修改Apache根目录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-21T13:33:00+08:00">
                2016-12-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li><div class="content-list-text">

</div></li>
</ol>
<p>创建自己需要更改的新目录，并更改宿主权限为apache用户 chown -R apache:apache /mnt/www</p>
<p><div class="content-list-media"></div></p>
<p><div class="content-list-image clearfix"><a href="http://jingyan.baidu.com/album/e75aca8550cd15142fdac678.html?picindex=1" target="_blank" rel="noopener"><img src="http://c.hiphotos.baidu.com/exp/w=500/sign=2fea1df700087bf47dec57e9c2d2575e/6a600c338744ebf828334683dbf9d72a6159a7cf.jpg" alt="Linux下如何修改Apache根目录"></a></div></p>
<p></p>
<ol start="2">
<li><div class="list-icon"> <div class="content-list-text">

</div></div></li>
</ol>
<p>停止Apache服务 service httpd stop</p>
<p><div class="content-list-media"></div></p>
<p><div class="content-list-image clearfix"><a href="http://jingyan.baidu.com/album/e75aca8550cd15142fdac678.html?picindex=2" target="_blank" rel="noopener"><img src="http://c.hiphotos.baidu.com/exp/w=500/sign=266dc7d4cebf6c81f7372ce88c3fb1d7/d53f8794a4c27d1e68f4187819d5ad6edcc438bf.jpg" alt="Linux下如何修改Apache根目录"></a></div></p>
<p></p>
<ol start="3">
<li><div class="list-icon">3<div class="content-list-text">

</div></div></li>
</ol>
<p>修改Apache的配置文件，默认在/etc/httpd/conf/httpd.conf,找到Document Root修改为你的新路径，如下图所示</p>
<p><div class="content-list-media"></div></p>
<p><div class="content-list-image clearfix"><a href="http://jingyan.baidu.com/album/e75aca8550cd15142fdac678.html?picindex=3" target="_blank" rel="noopener"><img src="http://a.hiphotos.baidu.com/exp/w=500/sign=36f6c3b38594a4c20a23e72b3ef51bac/79f0f736afc37931ea2ba495e9c4b74542a911ce.jpg" alt="Linux下如何修改Apache根目录"></a></div></p>
<p></p>
<ol start="4">
<li><div class="list-icon">4<div class="content-list-text">

</div></div></li>
</ol>
<p>以及下方的 Directory 为你的新路径，如下图所示</p>
<p><div class="content-list-media"></div></p>
<p><div class="content-list-image clearfix"><a href="http://jingyan.baidu.com/album/e75aca8550cd15142fdac678.html?picindex=4" target="_blank" rel="noopener"><img src="http://d.hiphotos.baidu.com/exp/w=500/sign=224ddf19d343ad4ba62e46c0b2035a89/8ad4b31c8701a18b7ca830f39c2f07082938fecf.jpg" alt="Linux下如何修改Apache根目录"></a></div></p>
<p></p>
<ol start="5">
<li><div class="list-icon">5<div class="content-list-text">

</div></div></li>
</ol>
<p>保存配置文件后，重启Apache服务，你的Apache目录更改就会生效了。</p>
<p><div class="content-list-media"></div></p>
<p><div class="content-list-image clearfix"><a href="http://jingyan.baidu.com/album/e75aca8550cd15142fdac678.html?picindex=5" target="_blank" rel="noopener"><img src="http://e.hiphotos.baidu.com/exp/w=500/sign=062aa495e9c4b7453494b716fffd1e78/03087bf40ad162d9feac40a013dfa9ec8b13cdcf.jpg" alt="Linux下如何修改Apache根目录"></a></div></p>
<p></p>
<ol start="6">
<li></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/31/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/31/">31</a><span class="page-number current">32</span><a class="page-number" href="/page/33/">33</a><span class="space">&hellip;</span><a class="page-number" href="/page/42/">42</a><a class="extend next" rel="next" href="/page/33/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://avatars0.githubusercontent.com/u/7269202?s=460&v=4"
                alt="庞国明" />
            
              <p class="site-author-name" itemprop="name">庞国明</p>
              <p class="site-description motion-element" itemprop="description">Software make the information world run, and programer make the softeware run.</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">420</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">267</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/pangguoming" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:pangguoming@yeah.net" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/pangguoming" target="_blank" title="Twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://stackoverflow.com/users/1570700/pangguoming" target="_blank" title="StackOverflow">
                      
                        <i class="fa fa-fw fa-stack-overflow"></i>StackOverflow</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://instagram.com/pangguoming" target="_blank" title="Instagram">
                      
                        <i class="fa fa-fw fa-instagram"></i>Instagram</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">庞国明</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  







<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    
<!-- END LOCAL -->

    

    







  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.4"></script>



  

  

  

  
  

  

  

  

</body>
</html>
